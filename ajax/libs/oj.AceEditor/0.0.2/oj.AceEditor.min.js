// oj.AceEditor.min.js v0.0.2 | Copyright 2013 Evan Moran | ojjs.org/license
(function(){var e,t=function(t,n){t.isClient&&t.dependency("ace"),typeof n!="object"&&(n={});var r=t.createType("AceEditor",{base:t.ModelKeyView,constructor:function(){var n=t.unionArguments(arguments),i=n.options,s=n.args;i.id=i.id||t.id();var o={width:400,height:200,fontSize:14,showFoldWidgets:!1,showPrintMargin:!1,useSoftTabs:!0,behaviorsEnabled:!0,foldStyle:"markbegin",hScrollBarAlwaysVisible:!1,vScrollBarAlwaysVisible:!1,useWorker:!1};for(k in o)i[k]==null&&(i[k]=o[k]);this.el=t(function(){t.div(function(){t.div("function(){}",{c:"oj-AceEditor-editor",style:{position:"absolute",width:i.width,height:i.height}})},{style:{position:"relative",width:i.width,height:i.height}})}),this.$editor=this.$(".oj-AceEditor-editor");if(t.isClient&&typeof ace!="undefined"){this.editor=ace.edit(this.$editor.get(0)),this.editor.resize();var u=this;this.session.doc.on("change",e(50,function(){typeof u.viewChanged=="function"&&u.viewChanged(),typeof u.change=="function"&&u.change()}))}var a=["theme","mode","width","height","wrapLimit","showPrintMargin","readOnly","fontSize","tabSize","foldStyle","selectionStyle","showPrintMargin","showInvisibles","showGutter","showIndentGuides","showFoldWidgets","highlightSelectedWord","highlightActiveLine","useSoftTabs","useWrapMode","wrapLimitRange","printMarginColumn","animatedScroll","useWorker","hScrollBarAlwaysVisible","vScrollBarAlwaysVisible","fadeFoldWidgets","behaviorsEnabled"];for(var f=0;f<a.length;f++){var l=a[f];i[l]!=null&&(this[l]=t.argumentShift(i,l))}value=t.argumentShift(i,"value")||s.join("\n"),r.base.constructor.apply(this,[i]),this.$scrollbar=this.$(".ace_scrollbar"),this.$scroller=this.$(".ace_scroller"),this.$content=this.$(".ace_content"),value&&(this.value=value)},properties:{value:{get:function(){if(this.session)return this.session.getValue()},set:function(e){if(this.session){var t=this.cursorPosition;this.session.setValue(e),this.cursorPosition=t}}},editor:{get:function(){return this._editor},set:function(e){this._editor=e}},session:{get:function(){if(this.editor)return this.editor.getSession()},set:function(e){this.editor&&this.editor.setSession(e)}},renderer:{get:function(){if(this.editor)return this.editor.renderer}},change:{get:function(){return this._change},set:function(e){this._change=e}},eventHandler:{get:function(){return this._eventHandler||(this._eventHandler=ace.require("ace/lib/event"))}},containerEl:{get:function(){return this._container||(this._container=this.$(".editor-container")[0])}},theme:{get:function(){if(!this.editor)return;var e=this.editor.getTheme(),t="ace/theme/";return e&&e.indexOf(t)===0&&(e=e.slice(t.length)),e},set:function(e){if(!this.editor)return;var t="ace/theme/";e&&e.indexOf(t)!=0&&(e=t+e),this.editor.setTheme(e)}},mode:{get:function(){if(!this.session)return;var e=this.session.getMode().$id,t="ace/mode/";return e&&e.indexOf(t)===0&&(e=e.slice(t.length)),e},set:function(e){if(!this.session)return;var t="ace/mode/";e&&e.indexOf(t)!=0&&(e=t+e),this.session.setMode(e)}},width:{get:function(){return this.$el.width()},set:function(e){this.$el.width(e),this.updateWidth()}},height:{get:function(){return this.$el.height()},set:function(e){this.$el.height(e),this.$editor.height(e),this.editor&&this.editor.resize()}},wrapLimit:{get:function(){if(this.session)return this.wrapLimitRange},set:function(e){this.session&&(!e||e==="off"?(this.useWrapMode=!1,this.printMarginColumn=80):e==="auto"?(this.useWrapMode=!0,this.wrapLimitRange=null,this.printMarginColumn=80):typeof e=="number"&&(this.wrapLimitRange=e,this.printMarginColumn=e,this.useWrapMode=!0))}},readOnly:{get:function(){if(this.editor)return this.editor.getReadOnly()},set:function(e){this.editor&&this.editor.setReadOnly(e)}},fontSize:{get:function(){if(this.editor)return this._fontSize},set:function(e){this.editor&&(this.editor.setFontSize(e),this._fontSize=e)}},tabSize:{get:function(){if(this.editor)return this.session.getTabSize()},set:function(e){this.editor&&this.session.setTabSize(e)}},cursorPosition:{get:function(){if(this.editor)return this.editor.getCursorPosition()},set:function(e){this.editor&&this.editor.moveCursorToPosition(e)}},showPrintMargin:{get:function(){if(this.editor)return this.editor.getShowPrintMargin()},set:function(e){this.editor&&this.editor.setShowPrintMargin(e)}},showInvisibles:{get:function(){if(this.editor)return this.editor.getShowInvisibles()},set:function(e){this.editor&&this.editor.setShowInvisibles(e)}},showGutter:{get:function(){if(this.editor)return this.renderer.getShowGutter()},set:function(e){this.editor&&this.renderer.setShowGutter(e)}},showIndentGuides:{get:function(){if(this.editor)return this.editor.getDisplayIndentGuides()},set:function(e){this.editor&&this.editor.setDisplayIndentGuides(e)}},showFoldWidgets:{get:function(){if(this.editor)return this.editor.getShowFoldWidgets()},set:function(e){this.editor&&this.editor.setShowFoldWidgets(e)}},highlightSelectedWord:{get:function(){if(this.editor)return this.editor.getHighlightSelectedWord()},set:function(e){this.editor&&this.editor.setHighlightSelectedWord(e)}},highlightActiveLine:{get:function(){if(this.editor)return this.editor.getHighlightActiveLine()},set:function(e){this.editor&&this.editor.setHighlightActiveLine(e)}},selectionStyle:{get:function(){if(this.editor)return this.editor.getSelectionStyle()||"line"},set:function(e){if(this.editor){if(e!=="line"&&e!=="text")throw new Error("oj.AceEditor: selectionStyle expects 'line' or 'text'");this.editor.setSelectionStyle(e)}}},foldStyle:{get:function(){if(this.session)return this._foldStyle},set:function(e){this.session&&(this._foldStyle=e,this.session.setFoldStyle(e))}},behaviorsEnabled:{get:function(){if(this.editor)return this.editor.getBehavioursEnabled()},set:function(e){this.editor&&this.editor.setBehavioursEnabled(e)}},useSoftTabs:{get:function(){if(this.session)return this.session.getUseSoftTabs()},set:function(e){this.session&&this.session.setUseSoftTabs(e)}},useWrapMode:{get:function(){if(this.session)return this.session.getUseWrapMode()},set:function(e){this.session&&this.session.setUseWrapMode(e)}},wrapLimitRange:{get:function(){if(this.session)return this.session.getWrapLimitRange()},set:function(e){this.session&&this.session.setWrapLimitRange(e,e)}},printMarginColumn:{get:function(){if(this.renderer)return this.renderer.getPrintMarginColumn()},set:function(e){this.renderer&&this.renderer.setPrintMarginColumn(e)}},animatedScroll:{get:function(){if(this.editor)return this.editor.getAnimatedScroll()},set:function(e){this.editor&&this.editor.setAnimatedScroll(e)}},useWorker:{get:function(){if(this.session)return this.session.getUseWorker()},set:function(e){this.session&&this.session.setUseWorker(e)}},hScrollBarAlwaysVisible:{get:function(){if(this.editor)return this.renderer.getHScrollBarAlwaysVisible()},set:function(e){this.editor&&this.renderer.setHScrollBarAlwaysVisible(e)}},vScrollBarAlwaysVisible:{get:function(){return this._vScrollBarAlwaysVisible||!1},set:function(e){this._vScrollBarAlwaysVisible=e,this.$scrollbar!=null&&(e?(this.$scrollbar.show(),this.updateWidth()):(this.$scrollbar.hide(),this.updateWidth()))}},fadeFoldWidgets:{get:function(){if(this.editor)return this.editor.getFadeFoldWidgets()},set:function(e){this.editor&&this.editor.setFadeFoldWidgets(e)}},$scrollbar:null,$scroller:null,$content:null},methods:{viewChanged:function(){r.base.inserted.apply(this,arguments)},inserted:function(){r.base.inserted.apply(this,arguments),this.value=this.value,this.vScrollBarAlwaysVisible=this.vScrollBarAlwaysVisible},updateWidth:function(){var e=this.width;widthScroll=this.vScrollBarAlwaysVisible?0:this.scrollWidth(),this.$editor.width(e+widthScroll),this.editor&&this.editor.resize()},scrollWidth:function(){if(this._scrollWidth!=null)return this._scrollWidth;if(this.isInserted){var e=$('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');$("body").append(e);var t=$("div",e).innerWidth();e.css("overflow-y","scroll");var n=$("div",e).innerWidth();return $(e).remove(),this._scrollWidth=t-n}}}});return{AceEditor:r}};e=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=t.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,e),a&&(i=t.apply(s,o)),i}},typeof oj!="undefined"&&oj.use(t),typeof module!="undefined"&&typeof module.exports!="undefined"&&(module.exports=t)})(this)