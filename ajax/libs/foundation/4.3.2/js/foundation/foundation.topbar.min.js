(function(c,b,a,d){Foundation.libs.topbar={name:"topbar",version:"4.3.2",settings:{index:0,stickyClass:"sticky",custom_back_text:true,back_text:"Back",is_hover:true,mobile_show_parent_link:false,scrolltop:true,init:false},init:function(g,h,f){Foundation.inherit(this,"data_options addCustomRule");var e=this;if(typeof h==="object"){c.extend(true,this.settings,h)}else{if(typeof f!=="undefined"){c.extend(true,this.settings,f)}}if(typeof h!=="string"){c(".top-bar, [data-topbar]").each(function(){c.extend(true,e.settings,e.data_options(c(this)));e.settings.$w=c(b);e.settings.$topbar=c(this);e.settings.$section=e.settings.$topbar.find("section");e.settings.$titlebar=e.settings.$topbar.children("ul").first();e.settings.$topbar.data("index",0);var j=e.settings.$topbar.parent();if(j.hasClass("fixed")||j.hasClass(e.settings.stickyClass)){e.settings.$topbar.data("height",e.outerHeight(j));e.settings.$topbar.data("stickyoffset",j.offset().top)}else{e.settings.$topbar.data("height",e.outerHeight(e.settings.$topbar))}var i=c("<div class='top-bar-js-breakpoint'/>").insertAfter(e.settings.$topbar);e.settings.breakPoint=i.width();i.remove();e.assemble();if(e.settings.is_hover){e.settings.$topbar.find(".has-dropdown").addClass("not-click")}e.addCustomRule(".f-topbar-fixed { padding-top: "+e.settings.$topbar.data("height")+"px }");if(e.settings.$topbar.parent().hasClass("fixed")){c("body").addClass("f-topbar-fixed")}});if(!e.settings.init){this.events()}return this.settings.init}else{return this[h].call(this,f)}},toggle:function(){var f=this;var e=c(".top-bar, [data-topbar]"),g=e.find("section, .section");if(f.breakpoint()){if(!f.rtl){g.css({left:"0%"});g.find(">.name").css({left:"100%"})}else{g.css({right:"0%"});g.find(">.name").css({right:"100%"})}g.find("li.moved").removeClass("moved");e.data("index",0);e.toggleClass("expanded").css("height","")}if(f.settings.scrolltop){if(!e.hasClass("expanded")){if(e.hasClass("fixed")){e.parent().addClass("fixed");e.removeClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(e.parent().hasClass("fixed")){if(f.settings.scrolltop){e.parent().removeClass("fixed");e.addClass("fixed");c("body").removeClass("f-topbar-fixed");b.scrollTo(0,0)}else{e.parent().removeClass("expanded")}}}}else{if(e.parent().hasClass(f.settings.stickyClass)){e.parent().addClass("fixed")}if(e.parent().hasClass("fixed")){if(!e.hasClass("expanded")){e.removeClass("fixed");e.parent().removeClass("expanded");f.updateStickyPositioning()}else{e.addClass("fixed");e.parent().addClass("expanded")}}}},timer:null,events:function(){var e=this;c(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(f){f.preventDefault();e.toggle()}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(j){var g=c(this),i=c(j.target),h=g.closest("[data-topbar], .top-bar"),f=h.data("topbar");if(i.data("revealId")){e.toggle();return}if(e.breakpoint()){return}if(e.settings.is_hover&&!Modernizr.touch){return}j.stopImmediatePropagation();if(i[0].nodeName==="A"&&i.parent().hasClass("has-dropdown")){j.preventDefault()}if(g.hasClass("hover")){g.removeClass("hover").find("li").removeClass("hover");g.parents("li.hover").removeClass("hover")}else{g.addClass("hover")}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(k){if(e.breakpoint()&&c(b).width()!=e.settings.breakPoint){k.preventDefault();var j=c(this),g=j.closest(".top-bar, [data-topbar]"),i=g.find("section, .section"),h=j.next(".dropdown").outerHeight(),f=j.closest("li");g.data("index",g.data("index")+1);f.addClass("moved");if(!e.rtl){i.css({left:-(100*g.data("index"))+"%"});i.find(">.name").css({left:100*g.data("index")+"%"})}else{i.css({right:-(100*g.data("index"))+"%"});i.find(">.name").css({right:100*g.data("index")+"%"})}g.css("height",e.outerHeight(j.siblings("ul"),true)+e.settings.$topbar.data("height"))}});c(b).on("resize.fndtn.topbar",function(){if(typeof e.settings.$topbar==="undefined"){return}var g=e.settings.$topbar.parent("."+this.settings.stickyClass);var h;if(!e.breakpoint()){var f=e.settings.$topbar.hasClass("expanded");c(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover");if(f){e.toggle()}}if(g.length>0){if(g.hasClass("fixed")){g.removeClass("fixed");h=g.offset().top;if(c(a.body).hasClass("f-topbar-fixed")){h-=e.settings.$topbar.data("height")}e.settings.$topbar.data("stickyoffset",h);g.addClass("fixed")}else{h=g.offset().top;e.settings.$topbar.data("stickyoffset",h)}}}.bind(this));c("body").on("click.fndtn.topbar",function(g){var f=c(g.target).closest("li").closest("li.hover");if(f.length>0){return}c(".top-bar li, [data-topbar] li").removeClass("hover")});c(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(k){k.preventDefault();var j=c(this),g=j.closest(".top-bar, [data-topbar]"),i=g.find("section, .section"),h=j.closest("li.moved"),f=h.parent();g.data("index",g.data("index")-1);if(!e.rtl){i.css({left:-(100*g.data("index"))+"%"});i.find(">.name").css({left:100*g.data("index")+"%"})}else{i.css({right:-(100*g.data("index"))+"%"});i.find(">.name").css({right:100*g.data("index")+"%"})}if(g.data("index")===0){g.css("height","")}else{g.css("height",e.outerHeight(f,true)+e.settings.$topbar.data("height"))}setTimeout(function(){h.removeClass("moved")},300)})},breakpoint:function(){return c(a).width()<=this.settings.breakPoint||c("html").hasClass("lt-ie9")},assemble:function(){var e=this;this.settings.$section.detach();this.settings.$section.find(".has-dropdown>a").each(function(){var f=c(this),i=f.siblings(".dropdown"),g=f.attr("href");if(e.settings.mobile_show_parent_link&&g&&g.length>1){var h=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+g+'">'+f.text()+"</a></li>")}else{var h=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li>')}if(e.settings.custom_back_text==true){h.find("h5>a").html(e.settings.back_text)}else{h.find("h5>a").html("&laquo; "+f.html())}i.prepend(h)});this.settings.$section.appendTo(this.settings.$topbar);this.sticky()},height:function(f){var g=0,e=this;f.find("> li").each(function(){g+=e.outerHeight(c(this),true)});return g},sticky:function(){var f=c(b),e=this;f.scroll(function(){e.updateStickyPositioning()})},updateStickyPositioning:function(){var e="."+this.settings.stickyClass;var f=c(b);if(c(e).length>0){var g=this.settings.$topbar.data("stickyoffset");if(!c(e).hasClass("expanded")){if(f.scrollTop()>(g)){if(!c(e).hasClass("fixed")){c(e).addClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(f.scrollTop()<=g){if(c(e).hasClass("fixed")){c(e).removeClass("fixed");c("body").removeClass("f-topbar-fixed")}}}}}},off:function(){c(this.scope).off(".fndtn.topbar");c(b).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document));