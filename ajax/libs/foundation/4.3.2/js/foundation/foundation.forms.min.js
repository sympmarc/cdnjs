(function(d,c,a,e){Foundation.libs.forms={name:"forms",version:"4.3.2",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(g,h,f){if(typeof h==="object"){d.extend(true,this.settings,h)}if(typeof h!=="string"){if(!this.settings.init){this.events()}this.assemble();return this.settings.init}else{return this[h].call(this,f)}},assemble:function(){var f=this;d('form.custom input[type="radio"],[type="checkbox"]',d(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(function(g,h){f.set_custom_markup(h)}).change(function(){f.set_custom_markup(this)});d("form.custom select",d(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var f=this;d(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(g){g.preventDefault();g.stopPropagation();f.toggle_checkbox(d(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(g){g.preventDefault();g.stopPropagation();f.toggle_radio(d(this))}).on("change.fndtn.forms","form.custom select",function(h,g){if(d(this).is('[data-customforms="disabled"]')){return}f.refresh_custom_select(d(this),g)}).on("click.fndtn.forms","form.custom label",function(i){if(d(i.target).is("label")){var g=d("#"+f.escape(d(this).attr("for"))).not('[data-customforms="disabled"]'),j,h;if(g.length!==0){if(g.attr("type")==="checkbox"){i.preventDefault();j=d(this).find("span.custom.checkbox");if(j.length===0){j=g.add(this).siblings("span.custom.checkbox").first()}f.toggle_checkbox(j)}else{if(g.attr("type")==="radio"){i.preventDefault();h=d(this).find("span.custom.radio");if(h.length===0){h=g.add(this).siblings("span.custom.radio").first()}f.toggle_radio(h)}}}}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return false}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(j){var i=d(this),h=i.closest("div.custom.dropdown"),g=b(h,"select");if(!h.hasClass("open")){d(f.scope).trigger("click")}j.preventDefault();if(false===g.is(":disabled")){h.toggleClass("open");if(h.hasClass("open")){d(f.scope).on("click.fndtn.forms.customdropdown",function(){h.removeClass("open");d(f.scope).off(".fndtn.forms.customdropdown")})}else{d(f.scope).on(".fndtn.forms.customdropdown")}return false}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(m){var l=d(this),i=l.closest("div.custom.dropdown"),j=b(i,"select"),h=0;m.preventDefault();m.stopPropagation();if(!d(this).hasClass("disabled")){d("div.dropdown").not(i).removeClass("open");var g=l.closest("ul").find("li.selected");g.removeClass("selected");l.addClass("selected");i.removeClass("open").find("a.current").text(l.text());l.closest("ul").find("li").each(function(n){if(l[0]===this){h=n}});j[0].selectedIndex=h;j.data("prevalue",g.html());if(typeof(a.createEvent)!="undefined"){var k=a.createEvent("HTMLEvents");k.initEvent("change",true,true);j[0].dispatchEvent(k)}else{j[0].fireEvent("onchange")}}});d(c).on("keydown",function(j){var o=a.activeElement,m=Foundation.libs.forms,n=d(".custom.dropdown"),l=b(n,"select"),i=d("input,select,textarea,button");if(n.length>0&&n.hasClass("open")){j.preventDefault();if(j.which===9){d(i[d(i).index(l)+1]).focus();n.removeClass("open")}if(j.which===13){n.find("li.selected").trigger("click")}if(j.which===27){n.removeClass("open")}if(j.which>=65&&j.which<=90){var h=m.go_to(n,j.which),k=n.find("li.selected");if(h){k.removeClass("selected");m.scrollTo(h.addClass("selected"),300)}}if(j.which===38){var k=n.find("li.selected"),g=k.prev(":not(.disabled)");if(g.length>0){g.parent()[0].scrollTop=g.parent().scrollTop()-m.outerHeight(g);k.removeClass("selected");g.addClass("selected")}}else{if(j.which===40){var k=n.find("li.selected"),h=k.next(":not(.disabled)");if(h.length>0){h.parent()[0].scrollTop=h.parent().scrollTop()+m.outerHeight(h);k.removeClass("selected");h.addClass("selected")}}}}});d(c).on("keyup",function(h){var g=a.activeElement,i=d(".custom.dropdown");if(g===i.find(".current")[0]){i.find(".selector").focus().click()}});this.settings.init=true},go_to:function(l,k){var g=l.find("li"),j=g.length;if(j>0){for(var h=0;h<j;h++){var f=g.eq(h).text().charAt(0).toLowerCase();if(f===String.fromCharCode(k).toLowerCase()){return g.eq(h)}}}},scrollTo:function(i,j){if(j<0){return}var h=i.parent();var g=this.outerHeight(i);var k=(g*(i.index()))-h.scrollTop();var f=k/j*10;this.scrollToTimerCache=setTimeout(function(){if(!isNaN(parseInt(f,10))){h[0].scrollTop=h.scrollTop()+f;this.scrollTo(i,j-10)}}.bind(this),10)},set_custom_markup:function(h){var i=d(h),g=i.attr("type"),f=i.next("span.custom."+g);if(!i.parent().hasClass("switch")){i.addClass("hidden-field")}if(f.length===0){f=d('<span class="custom '+g+'"></span>').insertAfter(i)}f.toggleClass("checked",i.is(":checked"));f.toggleClass("disabled",i.is(":disabled"))},append_custom_select:function(r,h){var u=Foundation.libs.forms,n=d(h),m=n.next("div.custom.dropdown"),o=m.find("ul"),p=m.find(".current"),t=m.find(".selector"),l=n.find("option"),i=l.filter(":selected"),k=n.attr("class")?n.attr("class").split(" "):[],s=0,q="",g,f=false;if(m.length===0){var j=n.hasClass("small")?"small":n.hasClass("medium")?"medium":n.hasClass("large")?"large":n.hasClass("expand")?"expand":"";m=d('<div class="'+["custom","dropdown",j].concat(k).filter(function(x,w,v){if(x===""){return false}return v.indexOf(x)===w}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>');t=m.find(".selector");o=m.find("ul");q=l.map(function(){var v=d(this).attr("class")?d(this).attr("class"):"";return"<li class='"+v+"'>"+d(this).html()+"</li>"}).get().join("");o.append(q);f=m.prepend('<a href="#" class="current">'+(i.html()||"")+"</a>").find(".current");n.after(m).addClass("hidden-field")}else{q=l.map(function(){return"<li>"+d(this).html()+"</li>"}).get().join("");o.html("").append(q)}u.assign_id(n,m);m.toggleClass("disabled",n.is(":disabled"));g=o.find("li");u.cache[m.data("id")]=g.length;l.each(function(v){if(this.selected){g.eq(v).addClass("selected");if(f){f.html(d(this).html())}}if(d(this).is(":disabled")){g.eq(v).addClass("disabled")}});if(!m.is(".small, .medium, .large, .expand")){m.addClass("open");var u=Foundation.libs.forms;u.hidden_fix.adjust(o);s=(u.outerWidth(g)>s)?u.outerWidth(g):s;Foundation.libs.forms.hidden_fix.reset();m.removeClass("open")}},assign_id:function(f,h){var g=[+new Date(),Foundation.random_str(5)].join("-");f.attr("data-id",g);h.attr("data-id",g)},refresh_custom_select:function(g,h){var n=this;var l=0,j=g.next(),i=g.find("option"),k=j.find("ul"),f=j.find("li");if(i.length!==this.cache[j.data("id")]||h){k.html("");var m="";i.each(function(){var q=d(this),p=q.html(),o=this.selected;m+='<li class="'+(o?" selected ":"")+(q.is(":disabled")?" disabled ":"")+'">'+p+"</li>";if(o){j.find(".current").html(p)}});k.html(m);j.removeAttr("style");k.removeAttr("style");j.find("li").each(function(){j.addClass("open");if(n.outerWidth(d(this))>l){l=n.outerWidth(d(this))}j.removeClass("open")});f=j.find("li");this.cache[j.data("id")]=f.length}},refresh_custom_selection:function(f){var g=d("option:selected",f).text();d("a.current",f.next()).text(g)},toggle_checkbox:function(f){var h=f.prev(),g=h[0];if(false===h.is(":disabled")){g.checked=((g.checked)?false:true);f.toggleClass("checked");h.trigger("change")}},toggle_radio:function(f){var i=f.prev(),h=i.closest("form.custom"),g=i[0];if(false===i.is(":disabled")){h.find('input[type="radio"][name="'+this.escape(i.attr("name"))+'"]').next().not(f).removeClass("checked");if(!f.hasClass("checked")){f.toggleClass("checked")}g.checked=f.hasClass("checked");i.trigger("change")}},escape:function(f){if(!f){return""}return f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(g){var f=this;f.hidden=g.parents();f.hidden=f.hidden.add(g).filter(":hidden");f.hidden.each(function(){var h=d(this);f.tmp.push(h.attr("style"));h.css({visibility:"hidden",display:"block"})})},reset:function(){var f=this;f.hidden.each(function(h){var g=d(this),j=f.tmp[h];if(j===e){g.removeAttr("style")}else{g.attr("style",j)}});f.tmp=[];f.hidden=null}},off:function(){d(this.scope).off(".fndtn.forms")},reflow:function(){}};var b=function(g,f){var g=g.prev();while(g.length){if(g.is(f)){return g}g=g.prev()}return d()}}(Foundation.zj,this,this.document));