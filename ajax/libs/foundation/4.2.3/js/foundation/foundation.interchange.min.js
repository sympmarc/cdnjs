!function(a,b,c){"use strict";Foundation.libs.interchange={name:"interchange",version:"4.2.2",cache:{},settings:{load_attr:"interchange",named_queries:{"default":"only screen and (min-width: 1px)",small:"only screen and (min-width: 768px)",medium:"only screen and (min-width: 1280px)",large:"only screen and (min-width: 1440px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(a,b){if(/IMG/.test(a[0].nodeName)){var c=b.split("/"),d=c[c.length-1],e=a[0].src;if(new RegExp(d,"i").test(a[0].src))return;return a[0].src=b,a.trigger("replace",[a[0].src,e])}}}},init:function(b,c,d){return Foundation.inherit(this,"throttle"),"object"==typeof c&&a.extend(!0,this.settings,c),this.events(),this.images(),"string"!=typeof c?this.settings.init:this[c].call(this,d)},events:function(){var c=this;a(b).on("resize.fndtn.interchange",c.throttle(function(){c.resize.call(c)},50))},resize:function(){var a=this.cache;for(var b in a)if(a.hasOwnProperty(b)){var c=this.results(b,a[b]);c&&this.settings.directives[c.scenario[1]](c.el,c.scenario[0])}},results:function(b,c){var d=c.length;if(d>0)for(var f=a('[data-uuid="'+b+'"]'),g=d-1;g>=0;g--){var h=c[g][2];if(this.settings.named_queries.hasOwnProperty(h))var i=matchMedia(this.settings.named_queries[h]);else var i=matchMedia(c[g][2]);if(i.matches)return{el:f,scenario:c[g]}}return!1},images:function(a){return"undefined"==typeof this.cached_images||a?this.update_images():this.cached_images},update_images:function(){var b=c.getElementsByTagName("img"),d=b.length,e="data-"+this.settings.load_attr;this.cached_images=[];for(var f=d-1;f>=0;f--)this.loaded(a(b[f]),0===f,function(a,b){if(a){var c=a.getAttribute(e)||"";c.length>0&&this.cached_images.push(a)}b&&this.enhance()}.bind(this));return"deferred"},loaded:function(a,b,c){function d(){c(a[0],b)}function e(){if(this.one("load",d),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var a=this.attr("src"),b=a.match(/\?/)?"&":"?";b+="random="+(new Date).getTime(),this.attr("src",a+b)}}return a.attr("src")?(a[0].complete||4===a[0].readyState?d():e.call(a),void 0):(d(),void 0)},enhance:function(){for(var c=this.images().length,d=c-1;d>=0;d--)this._object(a(this.images()[d]));return a(b).trigger("resize")},parse_params:function(a,b,c){return[this.trim(a),this.convert_directive(b),this.trim(c)]},convert_directive:function(a){var b=this.trim(a);return b.length>0?b:"replace"},_object:function(a){var b=this.parse_data_attr(a),c=[],d=b.length;if(d>0)for(var e=d-1;e>=0;e--){var f=b[e].split(/\((.*?)(\))$/);if(f.length>1){var g=f[0].split(","),h=this.parse_params(g[0],g[1],f[1]);c.push(h)}}return this.store(a,c)},uuid:function(a){function c(){return(0|65536*(1+Math.random())).toString(16).substring(1)}var b=a||"-";return c()+c()+b+c()+b+c()+b+c()+b+c()+c()+c()},store:function(a,b){var c=this.uuid(),d=a.data("uuid");return d?this.cache[d]:(a.attr("data-uuid",c),this.cache[c]=b)},trim:function(b){return"string"==typeof b?a.trim(b):b},parse_data_attr:function(a){for(var b=a.data(this.settings.load_attr).split(/\[(.*?)\]/),c=b.length,d=[],e=c-1;e>=0;e--)b[e].replace(/[\W\d]+/,"").length>4&&d.push(b[e]);return d},reflow:function(){this.images(!0)}}}(Foundation.zj,this,this.document);