//(c) Copyright IBM Corp. 2013
// Licensed under Apache 2.0
//>>built
require({cache:{"sbt/dom":function(){define(["./_bridge/dom"],function(h){return h})},"sbt/_bridge/dom":function(){define(["dojo/dom","dojo/_base/window","dojo/dom-construct","dojo/dom-class"],function(h,g,c){return{byId:function(c){return h.byId(c)},createTextNode:function(c){return g.doc.createTextNode(c)},create:function(f,b,a){return c.create(f,b,a)},destroy:function(f){return c.destroy(f)},removeAll:function(c){if(c=this.byId(c))for(;c.firstChild;)c.removeChild(c.firstChild);return c},setText:function(c,
b){if(c=this.byId(c))this.removeAll(c),c.appendChild(this.createTextNode(b));return c},setAttr:function(c,b,a){(c=this.byId(c))&&(a?c.setAttribute(b,a):c.removeAttribute(b));return c}}})},"sbt/emailService":function(){define(["./declare","./lang","./config","./_bridge/Transport","./json"],function(h,g,c,f,b){var a=new f;return{send:function(i){var d=c.Properties.serviceUrl+"/mailer",i={method:"POST",data:b.stringify(i),headers:{"Content-Type":"application/json"},handleAs:"json"};return a.request(d,
i)}}})},"sbt/json":function(){define(["./_bridge/json","./_bridge/lang","./log","./stringUtil"],function(h,g,c,f){return{parse:function(b){return(JSON||h).parse(b)},stringify:function(b){return(JSON||h).stringify(b)},jsonBeanStringify:function(b){if(g.isArray(b)){for(var a="[",i=0;i<b.length;i++)a+=this._jsonBeanStringify(b[i]),i+1<b.length&&(a+=",\n");return a+"]"}return this._jsonBeanStringify(b)},jsonBean:function(b){if(g.isArray(b)){for(var a=[],i=0;i<b.length;i++)a.push(this._jsonBean(b[i]));
return a}return this._jsonBean(b)},_jsonBeanStringify:function(b){return this._stringifyCyclicCheck(this.jsonBean(b),4)},_stringifyCyclicCheck:function(b,a){var i=[],d=this;return(JSON||h).stringify(b,function(a,b){if(g.isObject(b)){if(0<=i.indexOf(b)&&!d._isBuiltin(b))return;i.push(b)}return b},a)},_jsonBean:function(b,a){a||(a=[]);if(!(0<=a.indexOf(b))){a.push(b);var i={},d;for(d in b){var c=this._getObjectValue(b,d,a);if(c||!isNaN(c))i[d]=c}return i}},_notReserved:function(b){return"isInstanceOf"!==
b&&"getInherited"!==b},_getObjectValue:function(b,a,i){if(g.isFunction(b[a])){if((f.startsWith(a,"get")||f.startsWith(a,"is"))&&this._notReserved(a))try{var d=b[a].apply(b);return d&&!this._isBuiltin(d)&&g.isObject(d)?this._jsonBean(d,i):d}catch(c){}}else if(!f.startsWith(a,"_")&&!f.startsWith(a,"-"))return b[a]},_isBuiltin:function(b){return b instanceof Date||b instanceof Number||b instanceof Boolean||g.isArray(b)}}})},"sbt/_bridge/json":function(){define(["dojo/json"],function(h){return h})},"sbt/itemFactory":function(){define(["./lang",
"./xpath","./base/core"],function(h,g,c){var f=/^count\(.*\)$/;return{createItems:function(b,a,i,d){var e=g.selectNodes(b,c.feedXPath.entry,c.namespaces),n=[];0==e.length&&(e=g.selectNodes(b,"a:entry",c.namespaces));for(b=0;b<e.length;b++)n.push(this.createItem(e[b],a,i,d));return n},createItem:function(b,a,i,d){for(var e={element:b,getValue:function(a){return this[a]}},n=this.getAttribs(a),l=0;l<n.length;l++){var m=n[l],o=a[m];if(h.isFunction(o))e[m]=o(i,e);else if(o.match(f))e[m]=g.selectNumber(b,
o,c.namespaces);else if((o=g.selectNodes(b,o,c.namespaces))&&1==o.length)e[m]=o[0].text||o[0].textContent;else if(o){e[m]=[];for(var p=0;p<o.length;p++)e[m].push(o[p].text||o[p].textContent)}else e[m]=null;e[m]=d?d.decode(e[m]):e[m]}return e},getAttribs:function(b){var a=[],i;for(i in b)b.hasOwnProperty(i)&&a.push(i);return a}}})},"sbt/xpath":function(){define(["./declare"],function(h){var g=h(null,{ie:!1,constructor:function(c,f){this.xpath=c;this.nsArray=f||{};if(!document.createExpression&&(this.ie=
!0,this.nsString="",this.nsArray))for(var b in this.nsArray)this.nsString+=" xmlns:"+b+'="'+this.nsArray[b]+'"'},selectSingleNode:function(c){var f=c.ownerDocument||c;if(this.ie)try{f.setProperty("SelectionLanguage","XPath");f.setProperty("SelectionNamespaces",this.nsString);if(c===f)c=f.documentElement;return c.selectSingleNode(this.xpath)}catch(b){throw"XPath is not supported";}else{var a=this;return f.evaluate(this.xpath,c,function(b){return a.nsArray[b]},XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}},
selectNumber:function(c){var f=c.ownerDocument||c;if(this.ie)try{f.setProperty("SelectionLanguage","XPath");f.setProperty("SelectionNamespaces",this.nsString);if(c===f)c=f.documentElement;return c.selectNodes(this.xpath).length}catch(b){throw"XPath is not supported";}else{var a=this;return f.evaluate(this.xpath,c,function(b){return a.nsArray[b]},XPathResult.NUMBER_TYPE,null).numberValue}},selectNodes:function(c){var f=c.ownerDocument||c;if(this.ie)try{f.setProperty("SelectionLanguage","XPath");f.setProperty("SelectionNamespaces",
this.nsString);if(c===f)c=f.documentElement;return c.selectNodes(this.xpath)}catch(b){throw"XPath is not supported";}else{for(var a=this,c=f.evaluate(this.xpath,c,function(b){return a.nsArray[b]},XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),f=[],i=0;i<c.snapshotLength;i++)f.push(c.snapshotItem(i));return f}},selectText:function(c){return(c=this.selectSingleNode(c))?c.text||c.textContent:null}});return{selectNodes:function(c,f,b){return(new g(f,b)).selectNodes(c)},selectSingleNode:function(c,f,b){return(new g(f,
b)).selectSingleNode(c)},selectText:function(c,f,b){return(new g(f,b)).selectText(c)},selectNumber:function(c,f,b){return(new g(f,b)).selectNumber(c)}}})},"sbt/base/core":function(){define(["../config"],function(){return{namespaces:{o:"http://ns.opensocial.org/2008/opensocial",app:"http://www.w3.org/2007/app",thr:"http://purl.org/syndication/thread/1.0",fh:"http://purl.org/syndication/history/1.0",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/",a:"http://www.w3.org/2005/Atom",
h:"http://www.w3.org/1999/xhtml",td:"urn:ibm.com/td",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",ibmsc:"http://www.ibm.com/search/content/2010",xhtml:"http://www.w3.org/1999/xhtml"},feedXPath:{entry:"/a:feed/a:entry",entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},entryXPath:{title:"a:title",summaryText:"a:summary[@type='text']",selfUrl:"a:link[@rel='self']/@href",
terms:"a:category/@term",contentHtml:"a:content[@type='html']",published:"a:published",updated:"a:updated",authorId:"a:author/snx:userid",contributorId:"a:contributor/snx:userid"}}})},"sbt/ready":function(){define(["./_bridge/ready"],function(h){return h})},"sbt/_bridge/ready":function(){define(["dojo/ready"],function(h){return function(g){h(g)}})},"sbt/text":function(){define(["./_bridge/text"],function(h){return h})},"sbt/_bridge/text":function(){define(["dojo/text"],function(h){return{load:function(g,
c,f){h.load(g,c,f)}}})},"dojo/text":function(){define(["./_base/kernel","require","./has","./_base/xhr"],function(h,g,c,f){var b;b=function(a,b,i){f("GET",{url:a,sync:!!b,load:i,headers:h.config.textPluginHeaders||{}})};var a={},i=function(a){if(a){var a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},d={},e={};h.cache=function(d,c,e){var f;"string"==typeof d?/\//.test(d)?(f=d,e=c):f=g.toUrl(d.replace(/\./g,
"/")+(c?"/"+c:"")):(f=d+"",e=c);d=void 0!=e&&"string"!=typeof e?e.value:e;e=e&&e.sanitize;if("string"==typeof d)return a[f]=d,e?i(d):d;if(null===d)return delete a[f],null;f in a||b(f,!0,function(b){a[f]=b});return e?i(a[f]):a[f]};return{dynamic:!0,normalize:function(a,b){var i=a.split("!"),d=i[0];return(/^\./.test(d)?b(d):d)+(i[1]?"!"+i[1]:"")},load:function(c,f,g){var c=c.split("!"),o=1<c.length,p=c[0],r=f.toUrl(c[0]),c="url:"+r,j=d,k=function(a){g(o?i(a):a)};p in a?j=a[p]:c in f.cache?j=f.cache[c]:
r in a&&(j=a[r]);if(j===d)if(e[r])e[r].push(k);else{var q=e[r]=[k];b(r,!f.async,function(k){a[p]=a[r]=k;for(var b=0;b<q.length;)q[b++](k);delete e[r]})}else k(j)}}})},"sbt/validate":function(){define(["./log","./stringUtil","sbt/i18n!sbt/nls/validate","./util"],function(h,g,c,f){return{_validateInputTypeAndNotify:function(b,a,i,d,e,n){return!d||"object"==typeof d&&d.declaredClass&&d.declaredClass!=e||"object"==typeof d&&!d.declaredClass&&typeof d!=e||"object"!=typeof d&&typeof d!=e?(b=d?g.substitute(c.validate_expectedType,
[b,a,"object"==typeof d&&d.declaredClass?d.declaredClass:typeof d,e,i]):g.substitute(c.validate_nullObject,[b,a,i,e]),f.notifyError({code:400,message:b},n),!1):!0},_validateInputTypesAndNotify:function(b,a,i,d,c,f){for(var g in d)if(!this._validateInputTypeAndNotify(b,a,i[g],d[g],c[g],f))return!1;return!0}}})},"sbt/xsl":function(){define(["./Cache","./xml","./lang"],function(h,g,c){return{xsltTransform:function(f,b){if(!f)return null;c.isString(f)&&(f=g.parse(sbt.cache.get(f)));if(!b)return c.clone(f);
b=sbt.cache.get(b);if(window.ActiveXObject)return f.transformNode(b);if(document.implementation&&document.implementation.createDocument){var a=new XSLTProcessor;a.importStyleSheet(b);return a.transformToFragment(f,document)}return c.clone(f)}}})},"sbt/Cache":function(){define(["./declare"],function(h){return h(null,{constructor:function(g){this.limit=g;this._cache={};this.tail=this.head=null;this.count=0},get:function(g){if(g=this._cache[g]){if(this.head!=g){if(g.prev)g.prev.next=g.next;g.next?g.next.prev=
g.prev:this.tail=g.prev;g.next=this.head;this.head.prev=g;g.prev=null;this.head=g}return g.value}return null},put:function(g,c){this._cache[g]&&(this.remove(g),this.count--);var f=this._cache[g]={key:g,value:c};this.count==this.limit&&(this.remove(this.tail.key),this.count--);f.next=this.head;f.next?f.next.prev=f:this.tail=f;this.head=f;f.prev=null;this.count++},remove:function(g){var c=this._cache[g];if(c)c.next?c.next.prev=c.prev:this.tail=c.prev,c.prev?c.prev.next=c.next:this.head=c.next,c.next=
c.prev=null,delete this._cache[g],this.count--},browse:function(g){if(g)for(var c in this._cache){var f=this._cache[c];if(f=g(f.key,f.value))return f}return null}})})},"sbt/authenticator/GadgetOAuth":function(){define(["../declare","../lang"],function(h,g){return h(null,{constructor:function(c){g.mixin(this,c||{})},authenticate:function(c){(new gadgets.oauth.Popup(c.error.response.oauthApprovalUrl,null,function(){},function(){})).createOpenerOnClick()}})})},"sbt/authenticator/SSO":function(){define(["../declare",
"../lang","../util","../i18n!../nls/messageSSO"],function(h,g,c,f){return h(null,{loginUi:"",messageSSO:"/sbt/authenticator/templates/MessageSSO.html",dialogMessageSSO:"authenticator/templates/MessageDialogSSO.html",url:"",constructor:function(b){g.mixin(this,b||{})},authenticate:function(b){var a=this;require(["sbt/config"],function(i){var d=b.loginUi||i.Properties.loginUi||a.loginUi,c=b.messageSSO||i.Properties.messageSSO||a.messageSSO,i=b.dialogMessageSSO||i.Properties.dialogMessageSSO||a.dialogMessageSSO;
"popup"==d?a._authPopup(b,c,a.url):"dialog"==d?a._authDialog(b,i):a._authMainWindow(b,c,a.url)});return!0},_authPopup:function(b,a,i){var d=c.createQuery({loginUi:"popup"},"&"),a=i+a+"?"+d,i=c.createQuery({width:window.screen.availWidth/2,height:window.screen.availHeight/2,left:window.screen.availWidth/4,top:window.screen.availHeight/4,menubar:0,toolbar:0,status:0,location:0,scrollbars:1,resizable:1},","),a=window.open(a,"Authentication",i);a.globalSSOStrings=f;a.globalEndpointAlias=b.name;a.focus();
return!0},_authDialog:function(b,a){require(["sbt/_bridge/ui/SSO_Dialog","sbt/dom"],function(i,d){i.show(b,a,f);d.setText("reloginMessage",f.message);d.setAttr(d.byId("ssoLoginFormOK"),"value",f.relogin_button_text)});return!0},_authMainWindow:function(b,a,i){b=c.createQuery({redirectURL:document.URL,loginUi:"mainWindow",message_title:f.message_title,message:f.message,relogin_button_text:f.relogin_button_text},"&");window.location.href=i+a+"?"+b;return!0}})})},"sbt/authenticator/templates/login":function(){},
"sbt/authenticator/templates/messageSSO":function(){},"sbt/base/AtomEntity":function(){define("../declare,../lang,../stringUtil,./BaseConstants,./BaseEntity,./XmlDataHandler".split(","),function(h,g,c,f,b,a){return h(b,{contentType:"html",categoryScheme:"",constructor:function(b){this.dataHandler=new a({service:b.service,data:b.data,namespaces:g.mixin(f.Namespaces,b.namespaces||{}),xpath:g.mixin(f.AtomEntryXPath,b.xpath||this.xpath||{})})},getId:function(){return this.getAsString("id")},getTitle:function(){return this.getAsString("title")},
setTitle:function(a){return this.setAsString("title",a)},getSummary:function(){return this.getAsString("summary")},setSummary:function(a){return this.setAsString("summary",a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getCategoryTerms:function(){return this.getAsArray("categoryTerm")},setCategoryTerms:function(a){return this.setAsArray("categoryTerm",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName",
"authorEmail"])},getContributor:function(){return this.getAsObject(["contributorUserid","contributorName","contributorEmail"])},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getAlternateUrl:function(){return this.getAsString("alternateUrl")},getSelfUrl:function(){return this.getAsString("selfUrl")},getEditUrl:function(){return this.getAsString("editUrl")},createPostData:function(){var a=c.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"><title type="text">${getTitle}</title><content type="${contentType}">${getContent}</content>${categoryScheme}${createEntryData}</entry>',
this,function(a){return a},this);return c.trim(a)},createEntryData:function(){return""}})})},"sbt/base/BaseConstants":function(){define(["../config"],function(){return{sbtErrorCodes:{badRequest:400},Namespaces:{o:"http://ns.opensocial.org/2008/opensocial",app:"http://www.w3.org/2007/app",thr:"http://purl.org/syndication/thread/1.0",fh:"http://purl.org/syndication/history/1.0",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/",a:"http://www.w3.org/2005/Atom",h:"http://www.w3.org/1999/xhtml",
td:"urn:ibm.com/td",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",ibmsc:"http://www.ibm.com/search/content/2010",xhtml:"http://www.w3.org/1999/xhtml"},AtomFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},AtomEntryXPath:{entry:"/a:entry",uid:"a:id",id:"a:id",title:"a:title",updated:"a:updated",published:"a:published",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",
authorEmail:"a:author/a:email",contributorUserid:"a:contributor/snx:userid",contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email",content:"a:content[@type='html']",categoryTerm:"a:category/@term",editUrl:"a:link[@rel='edit']/@href",selfUrl:"a:link[@rel='self']/@href",alternateUrl:"a:link[@rel='alternate']/@href"},AtomXmlHeaders:{"Content-Type":"application/atom+xml"}}})},"sbt/base/BaseEntity":function(){define(["../declare","../lang","../log","../stringUtil"],function(h,
g,c,f){return h(null,{id:null,service:null,dataHandler:null,_fields:null,constructor:function(b){g.mixin(this,b);if(!this._fields)this._fields={};if(!this.service)throw Error("Invalid BaseEntity, an associated service must be specified.");},setDataHandler:function(b){this._fields={};this.dataHandler=b},setData:function(b){this._fields={};this.dataHandler.setData(b)},isLoaded:function(){return dataHandler?!0:!1},getAsString:function(b){this._validateFieldName(b,"getAsString");return this._fields.hasOwnProperty(b)?
this._fields[b]:this.dataHandler?this.dataHandler.getAsString(b):null},getAsNumber:function(b){this._validateFieldName(b,"getAsNumber");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsNumber(b):null},getAsDate:function(b){this._validateFieldName(b,"getAsDate");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsDate(b):null},getAsBoolean:function(b){this._validateFieldName(b,"getAsBoolean");return void 0==this._fields[b]?
this.dataHandler.getAsBoolean(b):this.dataHandler?this._fields[b]:null},getAsArray:function(b){this._validateFieldName(b,"getAsArray");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsArray(b):null},getAsObject:function(b){for(var a={},i=0;i<b.length;i++)this._validateFieldName(b[i],"getAsObject"),a[b[i]]=this.getAsString(b[i]);return a},setAsString:function(b,a){this._validateFieldName(b,"setAsString",a);null===a||void 0===a?delete this._fields[b]:this._fields[b]=
a.toString();return this},setAsNumber:function(b,a){this._validateFieldName(b,"setAsNumber",a);if(a instanceof Number)this._fields[b]=a;else if(a){var i=new Number(a);if(isNaN(i))throw i=f.substitute("Invalid argument for BaseService.setAsNumber {0},{1}",[b,a]),Error(i);this._fields[b]=i}else delete this._fields[b];return this},setAsDate:function(b,a){this._validateFieldName(b,"setAsDate",a);if(a instanceof Date)this._fields[b]=a;else if(a){var i=new Date(a);if(isNaN(i.getDate()))throw i=f.substitute("Invalid argument for BaseService.setAsDate {0},{1}",
[b,a]),Error(i);this._fields[b]=i}else delete this._fields[b];return this},setAsBoolean:function(b,a){this._validateFieldName(b,"setAsBoolean",a);null!=a?this._fields[b]=a?!0:!1:delete this._fields[b];return this},setAsArray:function(b,a){this._validateFieldName(b,"setAsArray",a);g.isArray(a)?this._fields[b]=a.slice(0):g.isString(a)?this._fields[b]=0<a.length?a.split(/[ ,]+/):[]:a?this._fields[b]=[a]:delete this._fields[b];return this},setAsObject:function(b){for(var a in b)if(b.hasOwnProperty(a)){var i=
b[a];i?this._fields[a]=i:delete this._fields[a]}},remove:function(b){delete this._fields[b]},toJson:function(){return this.dataHandler?this.dataHandler.toJson():{}},_validateFieldName:function(b,a,i){if(!b)throw b=f.substitute("Invalid argument for BaseService.{1} {0},{2}",[b,a,i||""]),Error(b);}})})},"sbt/base/XmlDataHandler":function(){define("../declare,../lang,../stringUtil,../xml,../xpath,./DataHandler".split(","),function(h,g,c,f,b,a){return h(a,{dataType:"xml",xpath:null,namespaces:null,_values:null,
_summary:null,constructor:function(a){g.mixin(this,a);this._values={};this.data=this._fromNodeOrString(a.data)},setData:function(a){this._values={};this.data=this._fromNodeOrString(a)},getAsString:function(a){this._validateProperty(a,"getAsString");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectText(a)),this._values[a]):_selectText(a)},getAsNumber:function(a){this._validateProperty(a,"getAsNumber");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=
this._selectNumber(a)),this._values[a]):this._selectNumber(a)},getAsDate:function(a){this._validateProperty(a,"getAsDate");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectDate(a)),this._values[a]):this._selectDate(a)},getAsBoolean:function(a){this._validateProperty(a,"getAsBoolean");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectBoolean(a)),this._values[a]):this._selectBoolean(a)},getAsArray:function(a){this._validateProperty(a,
"getAsArray");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectArray(a)),this._values[a]):this._selectArray(a)},getEntityId:function(){return c.trim(this.getAsString("uid"))},getEntityData:function(a){var d=this.xpath.entry;if(!d)return a;this._values.entry||(this._values.entry=b.selectNodes(a,d,this.namespaces)[0]||[]);return this._values.entry},getSummary:function(){if(!this._summary&&this._getXPath("totalResults"))this._summary={totalResults:b.selectNumber(this.data,
this._getXPath("totalResults"),this.namespaces),startIndex:b.selectNumber(this.data,this._getXPath("startIndex"),this.namespaces),itemsPerPage:b.selectNumber(this.data,this._getXPath("itemsPerPage"),this.namespaces)};return this._summary},getEntitiesDataArray:function(){var a=this.xpath.entries;if(!a)return this.data;this._values.entries||(this._values.entries=b.selectNodes(this.data,a,this.namespaces));return this._values.entries},toJson:function(){var a={},b;for(b in this.xpath)this.xpath.hasOwnProperty(b)&&
(a[b]=this.getAsString(b));return a},_fromNodeOrString:function(a){return g.isString(a)?(a=c.trim(a),this.getEntityData(f.parse(a))):a},_getXPath:function(a){return this.xpath[a]||a},_validateProperty:function(a,b){if(!a){var e=c.substitute("Invalid argument for XmlDataHandler.{1} {0}",[a,b]);throw Error(e);}},_selectText:function(a){return!this.data?null:c.trim(b.selectText(this.data,this._getXPath(a),this.namespaces))},_selectNumber:function(a){return!this.data?null:b.selectNumber(this.data,this._getXPath(a),
this.namespaces)},_selectDate:function(a){return!this.data?null:(a=this._selectText(a))?new Date(a):null},_selectBoolean:function(a){return!this.data?null:this._selectText(a)?!0:!1},_selectArray:function(a){if(!this.data)return null;var a=b.selectNodes(this.data,this._getXPath(a),this.namespaces),d=null;if(a)for(var d=[],e=0;e<a.length;e++)d.push(c.trim(a[e].text||a[e].textContent));return d}})})},"sbt/base/DataHandler":function(){define(["../declare","../lang"],function(h,g){return h(null,{dataType:null,
data:null,constructor:function(c){g.mixin(this,c)},setData:function(c){this.data=c},getAsString:function(){return null},getAsNumber:function(){return null},getAsDate:function(){return null},getAsBoolean:function(){return null},getAsArray:function(){return null},getEntityId:function(){return null},getEntityData:function(){return data},getSummary:function(){return null},getEntitiesDataArray:function(){return[]},toJson:function(){}})})},"sbt/base/BaseService":function(){define("../config,../declare,../lang,../log,../stringUtil,../Cache,../Promise,../util".split(","),
function(h,g,c,f,b,a,i,d){var e={};return g(null,{endpoint:null,_cache:null,_regExp:/\/{2}/,constructor:function(b){if(b&&b.endpoint)this.endpoint=h.findEndpoint(b.endpoint);if(b&&b.cacheSize)this._cache=new a(b.cacheSize)},constructUrl:function(a,d,c){if(!a)throw Error("BaseService.constructUrl: Invalid argument, url is undefined or null.");c&&(a=b.replace(a,c),-1!=a.indexOf("//")&&(a=a.replace(this._regExp,"/")));if(d)for(param in d)-1==a.indexOf("?")?a+="?":a.indexOf("&")!=a.length-1&&(a+="&"),
(c=encodeURIComponent(d[param]))&&(a+=param+"="+c);return a},getEntities:function(a,b,d){var c=this,e=new i;this.request(a,b,null,e).response.then(function(a){e.response=a;for(var b=d.createEntities.apply(c,[c,a.data,a]),k=b.getEntitiesDataArray(),q=[],i=0;i<k.length;i++){var t=d.createEntity.apply(c,[c,k[i],a]);q.push(t)}e.summary=b.getSummary();e.fulfilled(q)},function(a){e.rejected(a)});return e},getEntity:function(a,b,d,c){var e=this._validateEntityId(d);if(e)return e;var e=new i,f=this.getFromCache(d);
if(f)return e.fulfilled(f),e;var j=this;this.request(a,b,d,e).response.then(function(a){e.response=a;var b=c.createEntity.apply(j,[j,a.data,a]);j._cache&&d?j.fullFillOrRejectPromises.apply(j,[d,b,a]):e.fulfilled(b)},function(a){j._cache&&d?j.fullFillOrRejectPromises.apply(j,[d,a]):e.rejected(a)});return e},updateEntity:function(a,b,d){var c=this,e=new i;this.endpoint.request(a,b,null,e).response.then(function(a){e.response=a;a=d.createEntity.apply(c,[c,a.data,a]);a instanceof i?a.then(function(a){e.fulfilled(a)},
function(a){e.rejected(a)}):(a.id&&c.removeFromCache(a.id),a.id&&a.data&&c.addToCache(a.id,a),e.fulfilled(a))},function(a){e.rejected(a)});return e},deleteEntity:function(a,b,d){var c=this._validateEntityId(d);if(c)return c;var e=this,c=new i;this.endpoint.request(a,b,d,c).response.then(function(a){c.response=a;c.fulfilled(d);e.removeFromCache(d)},function(a){c.rejected(a)});return c},request:function(a,b,d,c){this._cache&&d&&this.pushPromise(d,c);return this.endpoint.request(a,b)},pushPromise:function(a,
b){f.debug("pushPromise, id : {0}, promise : {1}",a,b);e[a]||(e[a]=[]);e[a].push(b)},fullFillOrRejectPromises:function(a,b,d){f.debug("fullFillOrRejectPromises, id : {0}, data : {1}, response : {2}",a,b,d);this.addToCache(a,b);var c=e[a];if(c){delete e[a];for(a=0;a<c.length;a++)this.fullFillOrReject.apply(this,[c[a],b,d])}},fullFillOrReject:function(a,b,d){if(a)try{a.response=d,b instanceof Error?a.rejected(b):a.fulfilled(b)}catch(c){f.debug("fullFillOrReject: "+c.message)}},addToCache:function(a,
b){this._cache&&!(b instanceof Error)&&this._cache.put(a,b)},removeFromCache:function(a){this._cache&&this._cache.remove(a)},getFromCache:function(a){if(this._cache)return this._cache.get(a)},createBadRequestError:function(a){var b=Error();b.code=400;b.message=a;return b},createBadRequestPromise:function(a){return new i(this.createBadRequestError(a))},isEmail:function(a){return a&&0<=a.indexOf("@")},getLocationParameter:function(a,b){var d=a.getHeader("Location")||void 0;if(d)return this.getUrlParameter(d,
b)},getUrlParameter:function(a,b){return decodeURIComponent((RegExp("[?|&]"+b+"=([^&;]+?)(&|#|;|$)").exec(a)||[,""])[1].replace(/\+/g,"%20"))||null},validateField:function(a,d){if(!d){var c;c=b.substitute("Invalid value {0} for field {1}, the field must not be empty or undefined.",[d||"'undefined'",a]);return this.createBadRequestPromise(c)}},validateFields:function(a){for(var b in a){var d=this.validateField(b,a[b]);if(d)return d}},validateHTML5FileSupport:function(){if(!window.File||!window.FormData)return this.createBadRequestPromise("HTML 5 File API is not supported by the Browser.");
if(-1!=d.getJavaScriptLibrary().indexOf("Dojo 1.4"))return this.createBadRequestPromise("Dojo 1.4.* is not supported for Update Profile Photo")},_validateEntityId:function(a){if(!a||!c.isString(a))return a=b.substitute("Invalid argument {0}, expected valid entity identifier.",[a||"'undefined'"]),this.createBadRequestPromise(a)}})})},"sbt/base/JsonDataHandler":function(){define("../declare,../lang,../json,./DataHandler,../Jsonpath,../stringUtil".split(","),function(h,g,c,f,b,a){return h(f,{dataType:"json",
jsonpath:null,_values:null,constructor:function(a){g.mixin(this,a);this._values={};this.data=a.data},getAsString:function(a){this._validateProperty(a,"getAsString");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._get(a).toString()),this._values[a]):_get(a)},getAsNumber:function(a){this._validateProperty(a,"getAsNumber");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._getNumber(a)),this._values[a]):_getNumber(a)},getAsDate:function(a){this._validateProperty(a,
"getAsDate");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._getDate(a)),this._values[a]):_getDate(a)},getAsBoolean:function(a){this._validateProperty(a,"getAsBoolean");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._getBoolean(a)),this._values[a]):_getBoolean(a)},getAsArray:function(a){this._validateProperty(a,"getAsArray");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._get(a)),this._values[a]):_get(a)},getEntityId:function(){return a.trim(this.getAsString(this.jsonpath.id))},
getEntityData:function(){return this.data},getSummary:function(){if(!this._summary&&this._get("totalResults")[0])this._summary={totalResults:this.getAsNumber("totalResults"),startIndex:this.getAsNumber("startIndex"),itemsPerPage:this.getAsNumber("itemsPerPage")};return this._summary},getEntitiesDataArray:function(){return this._get(this._getJPath("entry"))[0]},toJson:function(){return this.data},_getDate:function(a){a=this._get(a)[0];return a instanceof Date?a:new Date(a)},_getBoolean:function(a){return this._get(a)[0]?
!0:!1},_getNumber:function(a){a=this._get(a)[0];return"number"===typeof a?a:g.isArray(a)?a.length:Number(a)},_validateProperty:function(b,d){if(!b){var c=a.substitute("Invalid argument for JsonDataHandler.{1} {0}",[b,d]);throw Error(c);}},_validateObject:function(b){if(!b)throw b=a.substitute("Invalid argument for JsonDataHandler.{0}",[b]),Error(b);},_evalJson:function(a){return b(this.data,a)},_evalJsonWithData:function(a,d){return b(d,a)},_get:function(a){this._validateObject(this.data);return this._evalJson(this._getJPath(a))},
_getJPath:function(a){return this.jsonpath[a]||a},extractFirstElement:function(a){this._validateObject(a);return this._evalJsonWithData("$[0]",a)}})})},"sbt/Jsonpath":function(){define(["./declare"],function(){return function(h,g,c){var f={resultType:c&&c.resultType||"VALUE",result:[],normalize:function(a){var b=[];return a.replace(/[\['](\??\(.*?\))[\]']/g,function(a,c){return"[#"+(b.push(c)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").replace(/#([0-9]+)/g,
function(a,c){return b[c]})},asPath:function(a){for(var a=a.split(";"),b="$",d=1,c=a.length;d<c;d++)b+=/^[0-9*]+$/.test(a[d])?"["+a[d]+"]":"['"+a[d]+"']";return b},store:function(a,b){a&&(f.result[f.result.length]="PATH"==f.resultType?f.asPath(a):b);return!!a},trace:function(a,b,d){if(a){var a=a.split(";"),c=a.shift(),a=a.join(";");if(b&&b.hasOwnProperty(c))f.trace(a,b[c],d+";"+c);else if("*"===c)f.walk(c,a,b,d,function(a,b,d,c,j){f.trace(a+";"+d,c,j)});else if(".."===c)f.trace(a,b,d),f.walk(c,a,
b,d,function(a,b,d,c,j){"object"===typeof c[a]&&f.trace("..;"+d,c[a],j+";"+a)});else if(/,/.test(c))for(var c=c.split(/'?,'?/),g=0,h=c.length;g<h;g++)f.trace(c[g]+";"+a,b,d);else/^\(.*?\)$/.test(c)?f.trace(f.eval(c,b,d.substr(d.lastIndexOf(";")+1))+";"+a,b,d):/^\?\(.*?\)$/.test(c)?f.walk(c,a,b,d,function(a,b,d,c,j){f.eval(b.replace(/^\?\((.*?)\)$/,"$1"),c[a],a)&&f.trace(a+";"+d,c,j)}):/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(c)&&f.slice(c,a,b,d)}else f.store(d,b)},walk:function(a,b,d,c,f){if(d instanceof
Array)for(var g=0,m=d.length;g<m;g++)g in d&&f(g,a,b,d,c);else if("object"===typeof d)for(g in d)d.hasOwnProperty(g)&&f(g,a,b,d,c)},slice:function(a,b,c,e){if(c instanceof Array){var g=c.length,h=0,m=g,o=1;a.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function(a,b,c,k){h=parseInt(b||h);m=parseInt(c||m);o=parseInt(k||o)});h=0>h?Math.max(0,h+g):Math.min(g,h);m=0>m?Math.max(0,m+g):Math.min(g,m);for(a=h;a<m;a+=o)f.trace(a+";"+b,c,e)}},eval:function(a,c){try{return b&&c&&eval(a.replace(/@/g,"_v"))}catch(d){throw new SyntaxError("jsonPath: "+
d.message+": "+a.replace(/@/g,"_v").replace(/\^/g,"_a"));}}},b=h;if(g&&h&&("VALUE"==f.resultType||"PATH"==f.resultType))return f.trace(f.normalize(g).replace(/^\$;/,""),h,"$"),f.result.length?f.result:!1}})},"sbt/base/MyAtomEntity":function(){define(["../declare","../lang","./BaseConstants","./BaseEntity","./XmlDataHandler"],function(h){return h(null,{})})},"sbt/base/VCardDataHandler":function(){define(["../declare","../lang","../config","../stringUtil","./XmlDataHandler"],function(h,g,c,f,b){return h(b,
{lineDelim:"\n",itemDelim:":",_vcard:null,constructor:function(){this.parseVCard()},parseVCard:function(){var a=f.trim(this.getAsString("vcard")).split(this.lineDelim);this._vcard={};for(var b=1;b<a.length-1;b++){var c=f.trim(a[b]),e=c.indexOf(this.itemDelim),g=c.substring(0,e),c=c.substring(e+1);this._vcard[g]=c}},_selectText:function(a){var b=this._getXPath(a);if(this._vcard&&this._vcard.hasOwnProperty(b))return this._vcard[b];try{return this.inherited(arguments,[a])}catch(c){return null}}})})},
"sbt/connections/ActivityConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin(g,{ActivitiesFeedXPath:g.ConnectionsFeedXPath,ActivityXPath:{entry:"/a:entry",uid:"a:id",id:"a:id",title:"a:title",updated:"a:updated",published:"a:published",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",contributorUserid:"a:contributor/snx:userid",contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email",content:"a:content[@type='text']",
tags:"a:category[not(@scheme)]/@term",activity:"snx:activity",position:"snx:position",depth:"snx:depth",permissions:"snx:permissions",icon:"snx:icon",recentUpdatesUrl:"a:link[@rel='alternate']/@href"},AtomActivitiesEverything:"/activities/service/atom2/everything",AtomActivitiesMy:"activities/service/atom2/activities",AtomActivitiesCompleted:"activities/service/atom2/completed"})})},"sbt/connections/ConnectionsConstants":function(){define([],function(){return{BadRequest:400,Namespaces:{o:"http://ns.opensocial.org/2008/opensocial",
app:"http://www.w3.org/2007/app",thr:"http://purl.org/syndication/thread/1.0",fh:"http://purl.org/syndication/history/1.0",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/",a:"http://www.w3.org/2005/Atom",h:"http://www.w3.org/1999/xhtml",td:"urn:ibm.com/td",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",ibmsc:"http://www.ibm.com/search/content/2010",xhtml:"http://www.w3.org/1999/xhtml"},ConnectionsFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",
startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},AtomXmlHeaders:{"Content-Type":"application/atom+xml"},AuthTypes:{OAuth:"oauth",Basic:"basic"}}})},"sbt/connections/ActivityService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./ActivityConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler".split(","),function(h,g,c,f,b,a,i,d,e){var n=h(d,{constructor:function(){},getId:function(){return this.getAsString("id")},
getActivityId:function(){return this.getAsString("activity")},getPosition:function(){return this.getAsNumber("position")},getDepth:function(){return this.getAsNumber("depth")},getPermissions:function(){return this.getAsString("permissions")},getIcon:function(){return this.getAsString("icon")},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",
a)},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName","authorEmail"])},getContributor:function(){return this.getAsObject(["contributorUserid","contributorName","contributorEmail"])},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")}}),l={createEntities:function(b,c){return new e({service:b,data:c,namespaces:a.Namespaces,
xpath:a.ActivitiesFeedXPath})},createEntity:function(b,c){var d=new e({service:b,data:c,namespaces:a.Namespaces,xpath:a.ActivityXPath});return new n({service:b,dataHandler:d})}};return h(i,{constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getMyActivities:function(b){return this.getEntities(a.AtomActivitiesMy,{method:"GET",handleAs:"text",query:b||{}},l)},getAllActivities:function(b){return this.getEntities(a.AtomActivitiesEverything,
{method:"GET",handleAs:"text",query:b||{}},l)},getCompletedActivities:function(b){return this.getEntities(a.AtomActivitiesCompleted,{method:"GET",handleAs:"text",query:b||{}},l)}})})},"sbt/connections/ActivityStreamConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin({ASUser:{ME:"@me",PUBLIC:"@public",COMMUNITY:"urn:lsid:lconn.ibm.com:communities.community:",UBLOG:"ublog"},ASGroup:{ALL:"@all",FOLLOWING:"@following",FRIENDS:"@friends",SELF:"@self",INVOLVED:"@involved",
NOTESFORME:"@notesforme",NOTESFROMME:"@notesfromme",RESPONSES:"@responses",ACTIONS:"@actions",SAVED:"@saved"},ASApplication:{ALL:"@all",COMMUNITIES:"@communities",TAGS:"@tags",PEOPLE:"@people",STATUS:"@status",NOTESFORME:"@notesforme",NOTESFROMME:"@notesfromme",RESPONSES:"@responses",COMMENTS:"comments"},Verb:{ACCEPT:"accept",ACCESS:"access",ACKNOWLEDGE:"acknowledge",ADD:"add",AGREE:"agree",APPEND:"append",APPROVE:"approve",ARCHIVE:"archive",ASSIGN:"assign",AT:"at",ATTACH:"attach",ATTEND:"attend",
AUTHOR:"author",AUTHORIZE:"authorize",BORROW:"borrow",BUILD:"build",CANCEL:"cancel",CLOSE:"close",COMMENT:"comment",COMPLETE:"complete",CONFIRM:"confirm",CONSUME:"consume",CHECKIN:"checkin",CREATE:"create",DELETE:"delete",DELIVER:"deliver",DENY:"deny",DISAGREE:"disagree",DISLIKE:"dislike",EXPERIENCE:"experience",FAVORITE:"favorite",FIND:"find",FLAG_AS_INAPPROPRIATE:"flag-as-inappropriate",FOLLOW:"follow",GIVE:"give",HOST:"host",IGNORE:"ignore",INSERT:"insert",INSTALL:"install",INTERACT:"interact",
INVITE:"invite",JOIN:"join",LEAVE:"leave",LIKE:"like",LISTEN:"listen",LOSE:"lose",MAKE_FRIEND:"make-friend",OPEN:"open",POST:"post",PLAY:"play",PRESENT:"present",PURCHASE:"purchase",QUALIFY:"qualify",READ:"read",RECEIVE:"receive",REJECT:"reject",REMOVE:"remove",REMOVE_FRIEND:"remove-friend",REPLACE:"replace",REQUEST:"request",REQUEST_FRIEND:"request-friend",RESOLVE:"resolve",RETURN:"return",RETRACT:"retract",RSVP_MAYBE:"rsvp-maybe",RSVP_NO:"rsvp-no",RSVP_YES:"rsvp-yes",SATISFY:"satisfy",SAVE:"save",
SCHEDULE:"schedule",SEARCH:"search",SELL:"sell",SEND:"send",SHARE:"share",SPONSOR:"sponsor",START:"start",STOP_FOLLOWING:"stop-following",SUBMIT:"submit",TAG:"tag",TERMINATE:"terminate",TIE:"tie",UNFAVORITE:"unfavorite",UNLIKE:"unlike",UNSAVE:"unsave",UNSATISFY:"unsatisfy",UNSHARE:"unshare",UPDATE:"update",USE:"use",WATCH:"watch",WIN:"win"},ActivityStreamUrls:{activityStreamBaseUrl:"/connections/opensocial/",activityStreamRestUrl:"/rest/activitystreams/",activityStreamUBlogRestUrl:"/rest/ublog/"},
errorMessages:{args_object:"argument passed to get stream should be an Object",required_communityid:"Community ID is required"}},g)})},"sbt/connections/ActivityStreamService":function(){define("../declare,../lang,../stringUtil,../config,../Promise,./ActivityStreamConstants,../base/BaseService,../base/BaseEntity,../base/DataHandler,sbt/json".split(","),function(h,g,c,f,b,a,i,d,e,n){var l=h(e,{constructor:function(a){g.mixin(this,a);this.data=a.data},getSummary:function(){if(!this._summary&&this.data.totalResults)this._summary=
{totalResults:this.data.totalResults,startIndex:this.data.startIndex,itemsPerPage:this.data.itemsPerPage};return this._summary},getEntitiesDataArray:function(){return this.data.list}}),m=h(d,{data:null,getPublishedDate:function(){return this.dataHandler.data.published},getPlainTitle:function(){return this.dataHandler.data.connections.plainTitle},getActorDisplayName:function(){return this.dataHandler.data.actor.displayName},getActor:function(){return this.dataHandler.data.actor},getVerb:function(){return this.dataHandler.data.verb},
getId:function(){return this.dataHandler.data.id}}),o={createEntities:function(a,b){return new l({data:b})},createEntity:function(a,b){var c=new l({data:b});return new m({service:a,dataHandler:c})}};return h(i,{constructor:function(){if(!this.endpoint)this.endpoint=f.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getActivityStreamCallbacks:function(){return o},getStream:function(b,c,d,k){return this.getEntities(this.constructUrl(a.ActivityStreamUrls.activityStreamBaseUrl+
"{authType}"+a.ActivityStreamUrls.activityStreamRestUrl+"{userType}/{groupType}/{appType}",{},{authType:this.endpoint.authType,userType:b||a.ASUser.PUBLIC,groupType:c||a.ASGroup.ALL,appType:d||a.ASApplication.ALL}),{method:"GET",handleAs:"json",query:k||{}},this.getActivityStreamCallbacks(),k)},getMyStatusUpdates:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ALL,a.ASApplication.STATUS,b)},getUpdatesFromMyNetwork:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.FRIENDS,a.ASApplication.ALL,
b)},getUpdatesFromPeopleIFollow:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.FOLLOWING,a.ASApplication.PEOPLE,b)},getUpdatesFromCommunitiesIFollow:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ALL,a.ASApplication.COMMUNITIES,b)},getUpdatesFromACommunity:function(b,c){var d=this._validateCommunityUuid(b);return d?d:this.getStream(a.ASUser.COMMUNITY+b,a.ASGroup.ALL,a.ASApplication.ALL,c)},getUpdatesFromAUser:function(b,c){var d=this._validateUserId(b);return d?d:this.getStream(b,
a.ASGroup.INVOLVED,a.ASApplication.ALL,c)},getNotificationsForMe:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.RESPONSES,a.ASApplication.ALL,b)},getNotificationsFromMe:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.NOTESFROMME,a.ASApplication.ALL,b)},getResponsesToMyContent:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.RESPONSES,a.ASApplication.ALL,b)},getMyActionableView:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ACTIONS,a.ASApplication.ALL,b)},getMySavedView:function(b){return this.getStream(a.ASUser.ME,
a.ASGroup.SAVED,a.ASApplication.ALL,b)},searchByQuery:function(a){var b=this._validateSearchQuery(a);return b?b:this.getStream(null,null,null,{query:a})},searchByFilters:function(a){var b=this._validateSearchFilters(a);if(b)return b;b={};b.filters=a;return this.getStream(null,null,null,b)},searchByTags:function(a){var b=this._validateSearchTags(a);if(b)return b;b={};b.filters="[{'type':'tag','values':['"+a+"']}]";return this.getStream(null,null,null,b)},postEntry:function(b,c,d,k,q){c=a.ActivityStreamUrls.activityStreamBaseUrl+
this.endpoint.authType+a.ActivityStreamUrls.activityStreamRestUrl+(c||a.ASUser.ME)+"/"+(d||a.ASGroup.ALL)+"/"+(k||a.ASApplication.ALL);b={method:"POST",query:q||{},handleAs:"json",headers:{"Content-Type":"application/json"},data:n.stringify(b)};return this.updateEntity(c,b,{createEntity:function(a,b){return b}},q)},postMicroblogEntry:function(b,c,d,k,q){c=a.ActivityStreamUrls.activityStreamBaseUrl+this.endpoint.authType+a.ActivityStreamUrls.activityStreamUBlogRestUrl+(c||a.ASUser.ME)+"/"+(d||a.ASGroup.ALL)+
"/"+(k||"");b={method:"POST",query:q||{},handleAs:"json",headers:{"Content-Type":"application/json"},data:n.stringify(b)};return this.updateEntity(c,b,{createEntity:function(a,b){return b}},q)},_validateCommunityUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateSearchQuery:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateSearchTags:function(a){if(!a||
0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateSearchFilters:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateUserId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userId.")}})})},"sbt/connections/CommunityConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin({Public:"public",Moderated:"publicInviteOnly",
Restricted:"private",Owner:"owner",Member:"member",CommunityFeedXPath:g.ConnectionsFeedXPath,CommunityXPath:{entry:"/a:entry",uid:"a:id",communityUuid:"a:id",communityTheme:"snx:communityTheme",title:"a:title",summary:"a:summary[@type='text']",communityUrl:"a:link[@rel='alternate']/@href",communityAtomUrl:"a:link[@rel='self']/@href",logoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/logo']/@href",tags:"a:category[not(@scheme)]/@term",content:"a:content[@type='html']",memberCount:"snx:membercount",
communityType:"snx:communityType",published:"a:published",updated:"a:updated",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",contributorUserid:"a:contributor/snx:userid",contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email"},MemberXPath:{entry:"/a:entry",uid:"a:contributor/snx:userid",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",email:"a:contributor/a:email",role:"snx:role"},InviteXPath:{entry:"/a:entry",uid:"a:id",
title:"a:title",content:"a:content[@type='text']",updated:"a:updated",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",contributorUserid:"a:contributor/snx:userid",contributorName:"a:contributor/a:name"},AtomCommunitiesAll:"/communities/service/atom/communities/all",AtomCommunitiesMy:"/communities/service/atom/communities/my",AtomCommunityInvitesMy:"/communities/service/atom/community/invites/my",AtomCommunitySubCommunities:"communities/service/atom/community/subcommunities",AtomCommunityMembers:"communities/service/atom/community/members",
AtomCommunityInstance:"communities/service/atom/community/instance",AtomCommunityForumTopics:"/communities/service/atom/community/forum/topics"},g)})},"sbt/connections/CommunityService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./CommunityConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler,./ForumService".split(","),function(h,g,c,f,b,a,i,d,e,n){var l=h(e,{getEntityId:function(){var a=f.trim(this.getAsString("uid"));return r(this.service,a)}}),m=
h(d,{constructor:function(){},getCommunityUuid:function(){var a=this.getAsString("communityUuid");return r(this.service,a)},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},getCommunityType:function(){return this.getAsString("communityType")},setCommunityType:function(a){return this.setAsString("communityType",a)},getCommunityTheme:function(){return this.getAsString("communityTheme")},
setCommunityTheme:function(a){return this.setAsString("communityTheme",a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName","authorEmail"])},getContributor:function(){return this.getAsObject(["contributorUserid","contributorName","contributorEmail"])},
getSummary:function(){return this.getAsString("summary")},getCommunityUrl:function(){return this.getAsString("communityUrl")},getLogoUrl:function(){return this.getAsString("logoUrl")},getMemberCount:function(){return this.getAsNumber("memberCount")},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getSubCommunities:function(a){return this.service.getSubCommunities(this.getCommunityUuid(),a)},getMembers:function(a){return this.service.getMembers(this.getCommunityUuid(),
a)},addMember:function(a,b){return this.service.addMember(this.getCommunityUuid(),a,b)},removeMember:function(a,b){return this.service.removeMember(this.getCommunityUuid(),a,b)},getMember:function(a,b){return this.service.getMember(this.getCommunityUuid(),a,b)},load:function(b){var k=this.getCommunityUuid(),d=this.service._validateCommunityUuid(k);if(d)return d;var j=this,b={handleAs:"text",query:c.mixin({communityUuid:k},b||{})};return this.service.getEntity(a.AtomCommunityInstance,b,k,{createEntity:function(b,
c){j.setDataHandler(new l({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommunityXPath}));return j}})},remove:function(a){return this.service.deleteCommunity(this.getCommunityUuid(),a)},update:function(a){return this.service.updateCommunity(this,a)},save:function(a){return this.getCommunityUuid()?this.service.updateCommunity(this,a):this.service.createCommunity(this,a)},getForums:function(a){var b=this.service.getForumService(),a=c.mixin(a||{},{communityUuid:this.getCommunityUuid()});return b.getForums(a)}}),
o=h(d,{communityUuid:null,constructor:function(){this.getRole()||this.setRole(a.Member)},getCommunityUuid:function(){return this.communityUuid},getName:function(){return this.getAsString("name")},setName:function(a){return this.setAsString("name",a)},getUserid:function(){return this.getAsString("userid")},setUserid:function(a){return this.setAsString("userid",a)},getEmail:function(){return this.getAsString("email")},setEmail:function(a){return this.setAsString("email",a)},getRole:function(){return this.getAsString("role")},
setRole:function(a){return this.setAsString("role",a)},load:function(b){var k=this.communityUuid,d=this.service._validateCommunityUuid(k);if(d)return d;var j=this,k={communityUuid:k},d=null,d=this.getUserid()?k.userid=this.getUserid():k.email=this.getEmail(),k=c.mixin(k,b||{});return this.service.getEntity(a.AtomCommunityMembers,{handleAs:"text",query:k},d,{createEntity:function(b,k){j.setDataHandler(new e({data:k,namespaces:a.Namespaces,xpath:a.MemberXPath}));j.id=j.dataHandler.getEntityId();return j}})},
remove:function(a){var b=this.getUserid()||this.getEmail();return this.service.removeMember(this.getCommunityUuid(),b,a)}}),p=h(d,{communityUuid:null,constructor:function(a){this.inherited(arguments,[a])},getCommunityUuid:function(){return this.communityUuid},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getAuthor:function(){if(!this._author)this._author=
{userid:this.getAsString("authorUserid"),name:this.getAsString("authorName")};return this._author},getContributor:function(){if(!this._contributor)this._contributor={userid:this.getAsString("contributorUserid"),name:this.getAsString("contributorName")};return this._contributor}}),r=function(a,b){return b&&0==b.indexOf("http")?a.getUrlParameter(b,"communityUuid"):b},j={createEntities:function(b,k){return new l({service:b,data:k,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(b,
k){var c=new l({service:b,data:k,namespaces:a.Namespaces,xpath:a.CommunityXPath});return new m({service:b,dataHandler:c})}},k={createEntities:function(b,k){return new e({service:b,data:k,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})}},q={createEntities:function(b,k){return new e({service:b,data:k,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(b,k){var c=new e({service:b,data:k,namespaces:a.Namespaces,xpath:a.InviteXPath});return new p({service:b,id:c.getEntityId(),
dataHandler:c})}},s={createEntity:function(b,k){var c=new l({service:b,data:k,namespaces:a.Namespaces,xpath:a.CommunityXPath});return new m({service:b,id:c.getEntityId(),dataHandler:c})}};return h(i,{forumService:null,constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getForumService:function(){if(!this.forumService)this.forumService=new n,this.forumService.endpoint=this.endpoint;return this.forumService},
getPublicCommunities:function(b){return this.getEntities(a.AtomCommunitiesAll,{method:"GET",handleAs:"text",query:b||{}},this.getCommunityFeedCallbacks())},getMyCommunities:function(b){return this.getEntities(a.AtomCommunitiesMy,{method:"GET",handleAs:"text",query:b||{}},this.getCommunityFeedCallbacks())},getMembers:function(b,k){var d=this._validateCommunityUuid(b);if(d)return d;var d={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},k||{})},j=this.getMemberFeedCallbacks(b);return this.getEntities(a.AtomCommunityMembers,
d,j)},getMember:function(a,b,k){a=new o({service:this,communityUuid:a});this.isEmail(b)?a.setEmail(b):a.setUserid(b);return a.load(k)},getMyInvites:function(b){return this.getEntities(a.AtomCommunityInvitesMy,{method:"GET",handleAs:"text",query:b||{}},this.getInviteFeedCallbacks())},getSubCommunities:function(b,k){var d=this._validateCommunityUuid(b,k);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},k||{})};return this.getEntities(a.AtomCommunitySubCommunities,d,this.getCommunityFeedCallbacks())},
newCommunity:function(a){return this._toCommunity(a)},newMember:function(a){return this._toMember(a)},newInvite:function(a,b){return this._toInvite(a,b)},getCommunity:function(a,b){return(new m({service:this,_fields:{communityUuid:a}})).load(b)},createCommunity:function(b,k){var c=this._toCommunity(b),d=this._validateCommunity(c,!1,k);if(d)return d;d={method:"POST",query:k||{},headers:a.AtomXmlHeaders,data:this._constructCommunityPostData(c)};return this.updateEntity(a.AtomCommunitiesMy,d,{createEntity:function(a,
b,k){a=this.getLocationParameter(k,"communityUuid");c.setCommunityUuid(a);return c}},k)},updateCommunity:function(b,k){var d=this._toCommunity(b),j=this._validateCommunity(d,!0,k);if(j)return j;j={method:"PUT",query:c.mixin({communityUuid:d.getCommunityUuid()},k||{}),headers:a.AtomXmlHeaders,data:this._constructCommunityPostData(d)};return this.updateEntity(a.AtomCommunityInstance,j,{createEntity:function(b,k){var c=d.getCommunityUuid();if(k){var j=new l({service:b,data:k,namespaces:a.Namespaces,
xpath:a.CommunityXPath});d.setDataHandler(j)}d.setCommunityUuid(c);return d}},k)},deleteCommunity:function(b,k){var d=this._validateCommunityUuid(b);if(d)return d;d={method:"DELETE",query:c.mixin({communityUuid:b},k||{}),handleAs:"text"};return this.deleteEntity(a.AtomCommunityInstance,d,b)},addMember:function(b,k,d){var j=this._validateCommunityUuid(b);if(j)return j;var q=this._toMember(k);if(j=this._validateMember(q))return j;k={method:"POST",query:c.mixin({communityUuid:b},d||{}),headers:a.AtomXmlHeaders,
data:this._constructMemberPostData(q)};return this.updateEntity(a.AtomCommunityMembers,k,{createEntity:function(a,k,c){a=this.getLocationParameter(c,"userid");q.setUserid(a);q.communityUuid=b;return q}},d)},removeMember:function(b,k,d){var j=this._validateCommunityUuid(b);if(j)return j;k=this._toMember(k);if(j=this._validateMember(k))return j;b={communityUuid:b};j=k.getEmail()?"email":"userid";k=k.getEmail()?k.getEmail():k.getUserid();b[j]=k;b=c.mixin(b,d||{});return this.deleteEntity(a.AtomCommunityMembers,
{method:"DELETE",query:b,handleAs:"text"},k)},getForumTopics:function(b,k){var d=this._validateCommunityUuid(b);if(d)return d;k=c.mixin({communityUuid:b},args||{});return this.getEntities(a.AtomCommunityForumTopics,{method:"GET",handleAs:"text",query:k},n.ForumTopicFeedCallbacks)},getCommunityFeedCallbacks:function(){return j},getMemberFeedCallbacks:function(b){return c.mixin({createEntity:function(k,c){var d=new l({data:c,namespaces:a.Namespaces,xpath:a.MemberXPath});return new o({service:k,id:d.getEntityId(),
communityUuid:b,dataHandler:d})}},k)},getInviteFeedCallbacks:function(){return q},getCommunityCallbacks:function(){return s},_toCommunity:function(a){if(a instanceof m)return a;c.isString(a)&&(a={communityUuid:a});return new m({service:this,_fields:c.mixin({},a)})},_toCommunityUuid:function(a){var b=null;a&&(c.isString(a)?b=a:a instanceof m&&(b=a.getCommunityUuid()));return b},_toMember:function(a){if(a){if(a instanceof o)return a;var b=new o({service:this});if(c.isString(a))this.isEmail(a)?b.setEmail(a):
b.setUserid(a);else{if(a.id&&!a.userid&&!a.email)this.isEmail(a.id)?a.email=a.id:a.userid=a.id,delete a.id;b._fields=c.mixin({},a)}return b}},_validateCommunityUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateCommunity:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, community with title must be specified.");if(b&&!a.getCommunityUuid())return this.createBadRequestPromise("Invalid argument, community with UUID must be specified.")},
_validateMember:function(a){if(!a||!a.getUserid()&&!a.getEmail())return this.createBadRequestPromise("Invalid argument, member with userid or email must be specified.")},_constructCommunityPostData:function(b){b=f.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><title type="text">${getTitle}</title><content type="html">${getContent}</content><category term="community" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>${getTags}<snx:communityType>${getCommunityType}</snx:communityType><snx:isExternal>false</snx:isExternal>${getCommunityUuid}${getCommunityTheme}</entry>',
b,function(b,k){if("getTags"==k){var c=b,b="",d;for(d in c)b+=f.transform('<category term="${tag}"></category>',{tag:c[d]})}else"getCommunityType"==k&&!b?b=a.Restricted:"getCommunityUuid"==k&&b?b=f.transform('<snx:communityUuid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${communityUuid}</snx:communityUuid>',{communityUuid:b}):"getCommunityTheme"==k&&b&&(b=f.transform('<snx:communityTheme xmlns:snx="http://www.ibm.com/xmlns/prod/sn" snx:uuid="default">${ommunityTheme}</snx:communityTheme>',{communityTheme:b}));
return b},b);return f.trim(b)},_constructMemberPostData:function(a){return f.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><contributor>${getEmail}${getUserid}</contributor><snx:role xmlns:snx="http://www.ibm.com/xmlns/prod/sn" component="http://www.ibm.com/xmlns/prod/sn/communities">${getRole}</snx:role><category term="person" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category></entry>',
a,function(a,b){"getEmail"==b&&a&&(a=f.transform("<email>${email}</email>",{email:a}));"getUserid"==b&&a&&(a=f.transform('<snx:userid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${userid}</snx:userid>',{userid:a}));return a},a)}})})},"sbt/connections/ForumService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./ForumConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler".split(","),function(h,g,c,f,b,a,i,d,e){var n=h(d,{xpath:a.ForumXPath,contentType:"html",
categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-forum"></category>',constructor:function(){},getForumUuid:function(){var a=this.getAsString("forumUuid");return o(a)},setForumUuid:function(a){return this.setAsString("forumUuid",a)},getModeration:function(){return this.getAsDate("moderation")},getThreadCount:function(){return this.getAsNumber("threadCount")},getForumUrl:function(){return this.getAlternateUrl()},getTopics:function(a){return this.service.getForumTopics(this.getForumUuid(),
a)},load:function(b){var d=this.getForumUuid(),j=this.service._validateForumUuid(d);if(j)return j;var e=this,b={handleAs:"text",query:c.mixin({forumUuid:d},b||{})};return this.service.getEntity(a.AtomForum,b,d,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteForum(this.getForumUuid(),a)},update:function(a){return this.service.updateForum(this,a)},save:function(a){return this.getForumUuid()?this.service.updateForum(this,a):this.service.createForum(this,
a)}}),l=h(d,{xpath:a.ForumTopicXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-topic"></category>',constructor:function(){},getTopicUuid:function(){var a=this.getAsString("topicUuid");return o(a)},setTopicUuid:function(a){return this.setAsString("topicUuid",a)},getForumUuid:function(){var a=this.getAsString("forumUuid");return o(a)},setForumUuid:function(a){return this.setAsString("forumUuid",a)},getTopicUrl:function(){return this.getAsString("alternateUrl")},
getPermisisons:function(){return this.getAsString("permissions")},getReplies:function(a){return this.service.getForumReplies(this.getTopicUuid(),a)},load:function(b){var d=this.getTopicUuid(),j=this.service._validateTopicUuid(d);if(j)return j;var e=this,b={handleAs:"text",query:c.mixin({topicUuid:d},b||{})};return this.service.getEntity(a.AtomTopic,b,d,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteForumTopic(this.getTopicUuid(),a)},update:function(a){return this.service.updateForumTopic(this,
a)},save:function(a){return this.getTopicUuid()?this.service.updateForumTopic(this,a):this.service.createForumTopic(this,a)}}),m=h(d,{xpath:a.ForumReplyXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-reply"></category>',constructor:function(){},createEntryData:function(){if(!this.getTopicUuid())return"";var a=f.transform('<thr:in-reply-to xmlns:thr="http://purl.org/syndication/thread/1.0" ref="urn:lsid:ibm.com:forum:${getTopicUuid}" type="application/atom+xml" href=""></thr:in-reply-to>',
this,function(a){return a},this);return f.trim(a)},getReplyUuid:function(){var a=this.getAsString("replyUuid");return o(a)},setReplyUuid:function(a){return this.setAsString("replyUuid",a)},getTopicUuid:function(){var a=this.getAsString("topicUuid");return o(a)},setTopicUuid:function(a){return this.setAsString("topicUuid",a)},getReplyUrl:function(){return this.getAlternateUrl()},getPermisisons:function(){return this.getAsString("permissions")},load:function(b){var d=this.service._validateReplyUuid(this.getReplyUuid());
if(d)return d;var j=this,b={handleAs:"text",query:c.mixin({replyUuid:replyUuid},b||{})};return this.service.getEntity(a.AtomReply,b,replyUuid,{createEntity:function(a,b){j.setData(b);return j}})},remove:function(a){return this.service.deleteForumReply(this.getReplyUuid(),a)},update:function(a){return this.service.updateForumReply(this,a)},save:function(a){return this.getReplyUuid()?this.service.updateForumReply(this,a):this.service.createForumReply(this,a)}});h(d,{categoryScheme:null,constructor:function(){}});
var o=function(a){return a&&0==a.indexOf("urn:lsid:ibm.com:forum:")?a.substring(23):a},p={createEntities:function(b,d){return new e({service:b,data:d,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new n({service:a,data:b})}},r={createEntities:function(b,d){return new e({service:b,data:d,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new l({service:a,data:b})}},j={createEntities:function(b,d){return new e({service:b,data:d,
namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new m({service:a,data:b})}};return h(i,{constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},newForum:function(a){return this._toForum(a)},newForumTopic:function(a){return this._toForumTopic(a)},newForumReply:function(a){return this._toForumReply(a)},getMyForums:function(b){return this.getEntities(a.AtomForumsMy,
{method:"GET",handleAs:"text",query:b||{}},p)},getAllForums:function(b){return this.getEntities(a.AtomForums,{method:"GET",handleAs:"text",query:b||{}},p)},getPublicForums:function(b){return this.getEntities(a.AtomForumsPublic,{method:"GET",handleAs:"text",query:b||{}},p)},getForumTopics:function(b,d){var j=this._validateForumUuid(b);if(j)return j;j={method:"GET",handleAs:"text",query:c.mixin({forumUuid:b},d||{})};return this.getEntities(a.AtomTopics,j,r)},getForumReplies:function(b,d){var e=this._validateTopicUuid(b);
if(e)return e;e={method:"GET",handleAs:"text",query:c.mixin({topicUuid:b},d||{})};return this.getEntities(a.AtomReplies,e,j)},getForum:function(a,b){return(new n({service:this,_fields:{forumUuid:a}})).load(b)},createForum:function(b,d){var c=this._toForum(b),j=this._validateForum(c,!1,d);if(j)return j;j={method:"POST",query:d||{},headers:a.AtomXmlHeaders,data:c.createPostData()};return this.updateEntity(a.AtomForumsMy,j,{createEntity:function(a,b,d){c.setData(b);a=this.getLocationParameter(d,"forumUuid");
c.setForumUuid(a);return c}},d)},updateForum:function(b,d){var j=this._toForum(b),e=this._validateForum(j,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({forumUuid:j.getForumUuid()},d||{}),headers:a.AtomXmlHeaders,data:j.createPostData()};return this.updateEntity(a.AtomForum,e,{createEntity:function(a,b){var d=j.getForumUuid();j.setData(b);j.setForumUuid(d);return j}},d)},deleteForum:function(b,d){var j=this._validateForumUuid(b);if(j)return j;j={method:"DELETE",query:c.mixin({forumUuid:b},d||
{}),handleAs:"text"};return this.deleteEntity(a.AtomForum,j,b)},getForumTopic:function(a,b){return(new l({service:this,_fields:{topicUuid:a}})).load(b)},createForumTopic:function(b,d){var c=this._toForumTopic(b),j=this._validateForumTopic(c,!1,d);if(j)return j;j={method:"POST",query:d||{forumUuid:c.getForumUuid()},headers:a.AtomXmlHeaders,data:c.createPostData()};return this.updateEntity(a.AtomTopics,j,{createEntity:function(a,b,d){a=this.getLocationParameter(d,"topicUuid");c.setTopicUuid(a);c.setData(b);
return c}},d)},updateForumTopic:function(b,d){var j=this._toForumTopic(b),e=this._validateForumTopic(j,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({topicUuid:j.getTopicUuid()},d||{}),headers:a.AtomXmlHeaders,data:j.createPostData()};return this.updateEntity(a.AtomTopic,e,{createEntity:function(a,b){var d=j.getTopicUuid();j.setData(b);j.setTopicUuid(d);return j}},d)},deleteForumTopic:function(b,d){var j=this._validateTopicUuid(b);if(j)return j;j={method:"DELETE",query:c.mixin({topicUuid:b},d||
{}),handleAs:"text"};return this.deleteEntity(a.AtomTopic,j,b)},getForumReply:function(a,b){return(new m({service:this,_fields:{replyUuid:a}})).load(b)},createForumReply:function(b,d){var c=this._toForumReply(b),j=this._validateForumReply(c,!1,d);if(j)return j;j={method:"POST",query:d||{topicUuid:c.getTopicUuid()},headers:a.AtomXmlHeaders,data:c.createPostData()};return this.updateEntity(a.AtomReplies,j,{createEntity:function(a,b,d){a=this.getLocationParameter(d,"replyUuid");c.setReplyUuid(a);c.setData(b);
return c}},d)},updateForumReply:function(b,d){var j=this._toForumReply(b),e=this._validateForumReply(j,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({replyUuid:j.getReplyUuid()},d||{}),headers:a.AtomXmlHeaders,data:j.createPostData()};return this.updateEntity(a.AtomReply,e,{createEntity:function(a,b){var d=j.getReplyUuid();j.setData(b);j.setReplyUuid(d);return j}},d)},deleteForumReply:function(b,d){var j=this._validateReplyUuid(b);if(j)return j;j={method:"DELETE",query:c.mixin({replyUuid:b},d||
{}),handleAs:"text"};return this.deleteEntity(a.AtomReply,j,b)},_validateForum:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum with title must be specified.");if(b&&!a.getForumUuid())return this.createBadRequestPromise("Invalid argument, forum with UUID must be specified.")},_validateForumTopic:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum topic with title must be specified.");if(b&&!a.getTopicUuid())return this.createBadRequestPromise("Invalid argument, forum topic with UUID must be specified.")},
_validateForumReply:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum reply with title must be specified.");if(b&&!a.getReplyUuid())return this.createBadRequestPromise("Invalid argument, forum reply with UUID must be specified.")},_validateForumUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected forumUuid.")},_validateTopicUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected topicUuid.")},
_validateReplyUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected replyUuid.")},_toForum:function(a){if(a instanceof n)return a;c.isString(a)&&(a={forumUuid:a});return new n({service:this,_fields:c.mixin({},a)})},_toForumTopic:function(a){if(a instanceof l)return a;c.isString(a)&&(a={forumTopicUuid:a});return new l({service:this,_fields:c.mixin({},a)})},_toForumReply:function(a){if(a instanceof m)return a;c.isString(a)&&(a={forumReplyUuid:a});return new m({service:this,
_fields:c.mixin({},a)})}})})},"sbt/connections/ForumConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin(g,{ForumsFeedXPath:g.ConnectionsFeedXPath,ForumXPath:{entry:"/a:entry",uid:"a:id",id:"a:id",title:"a:title",updated:"a:updated",published:"a:published",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",contributorUserid:"a:contributor/snx:userid",contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email",
content:"a:content[@type='text']",moderation:"snx:moderation/@status",threadCount:"a:link[@rel='replies']/@thr:count",forumUrl:"a:link[@rel='alternate']/@href",communityUuid:"snx:communityUuid",forumUuid:"a:id"},ForumTopicXPath:{entry:"/a:entry",uid:"a:id",id:"a:id",title:"a:title",updated:"a:updated",published:"a:published",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",content:"a:content[@type='text']",permissions:"snx:permissions",alternateUrl:"a:link[@rel='alternate']/@href",
communityUuid:"snx:communityUuid",topicForumTitle:"/a:feed/a:title",threadCount:"a:link[@rel='replies']/@thr:count",topicUuid:"a:id",forumUuid:"thr:in-reply-to/@ref"},ForumReplyXPath:{entry:"/a:entry",uid:"a:id",id:"a:id",title:"a:title",updated:"a:updated",published:"a:published",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",content:"a:content[@type='html']",permissions:"snx:permissions",alternateUrl:"a:link[@rel='alternate']/@href",communityUuid:"snx:communityUuid",
replyUuid:"a:id",topicUuid:"thr:in-reply-to/@ref"},AtomForum:"forums/atom/forum",AtomTopic:"/forums/atom/topic",AtomReply:"/forums/atom/reply",AtomForums:"/forums/atom/forums",AtomForumsPublic:"/forums/atom/forums/public",AtomForumsMy:"/forums/atom/forums/my",AtomTopics:"/forums/atom/topics",AtomTopicsMy:"/forums/atom/topics/my",AtomReplies:"/forums/atom/replies",AtomTagsForum:"/atom/tags/forums",AtomTagsTopics:"/atom/tags/topics"})})},"sbt/connections/FileConstants":function(){define(["../lang",
"./ConnectionsConstants"],function(h,g){return h.mixin({FileFeedXPath:g.ConnectionsFeedXPath,CommentFeedXPath:g.ConnectionsFeedXPath,FileXPath:{entry:"/a:entry",id:"a:id",uid:"td:uuid",label:"td:label",selfUrl:"a:link[@rel='self']/@href",alternateUrl:"a:link[@rel='alternate']/@href",downloadUrl:"a:link[@rel='enclosure']/@href",type:"a:link[@rel='enclosure']/@type",length:"a:link[@rel='enclosure']/@length",editLink:"a:link[@rel='edit']/@href",editMediaLink:"a:link[@rel='edit-media']/@href",thumbnailUrl:"a:link[@rel='thumbnail']/@href",
commentsUrl:"a:link[@rel='replies']/@href",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",authorUserState:"a:author/snx:userState",title:"a:title",published:"a:published",updated:"a:updated",created:"td:created",modified:"td:modified",lastAccessed:"td:lastAccessed",modifierName:"td:modifier/td:name",modifierUserId:"td:modifier/snx:userid",modifierEmail:"td:modifier/td:email",modifierUserState:"td:modifier/snx:userState",visibility:"td:visibility",libraryId:"td:libraryId",
libraryType:"td:libraryType",versionUuid:"td:versionUuid",versionLabel:"td:versionLabel",propagation:"td:propagation",recommendationsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",commentsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",sharesCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/share']",foldersCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/collections']",attachmentsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/attachments']",
versionsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/versions']",referencesCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/references']",totalMediaSize:"td:totalMediaSize",summary:"a:summary",contentUrl:"a:content/@src",contentType:"a:content/@type",objectTypeId:"td:objectTypeId",lock:"td:lock/@type",acls:"td:permissions",hitCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",anonymousHitCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/anonymous_hit']",
tags:"a:category/@term"},CommentXPath:{entry:"a:entry",id:"a:id",uid:"td:uuid",title:"a:title",content:"a:content[@type='text']",created:"td:created",modified:"td:modified",versionLabel:"td:versionLabel",updated:"a:updated",published:"a:published",modifierName:"td:modifier/td:name",modifierUserId:"td:modifier/snx:userid",modifierEmail:"td:modifier/td:email",modifierUserState:"td:modifier/snx:userState",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",
authorUserState:"a:author/snx:userState",language:"td:language",deleteWithRecord:"td:deleteWithRecord"},AtomFileInstance:"files/basic/api/myuserlibrary/document/{documentId}/entry",AtomFileInstancePublic:"files/basic/anonymous/api/myuserlibrary/document/{documentId}/entry",AtomFilesMy:"/files/basic/api/myuserlibrary/feed",AtomFilesShared:"/files/basic/api/documents/shared/feed",AtomFilesPublic:"/files/basic/anonymous/api/documents/feed?visibility=public",AtomFoldersMy:"/files/basic/api/collections/feed",
AtomFileCommentsPublic:"/files/basic/anonymous/api/userlibrary/{userid}/document/{documentId}/feed?category=comment",AtomFileCommentsMy:"/files/basic/api/userlibrary/{userid}/document/{documentId}/feed?category=comment",AtomAddCommentToFile:"/files/basic/api/userlibrary/{userid}/document/{documentId}/feed",AtomAddCommentToMyFile:"/files/basic/api/myuserlibrary/document/{documentId}/feed",AtomUpdateFileMetadata:"/files/basic/api/myuserlibrary/document/{documentId}/entry",AtomFilesMyPinned:"/files/basic/api/myfavorites/documents/feed",
AtomPinFile:"/files/basic/api/myfavorites/documents/feed",AtomAddFilesToFolder:"/files/basic/api/collection/{collectionId}/feed",AtomDeleteFile:"files/basic/api/myuserlibrary/document/{documentId}/entry",AtomLockUnlockFile:"/files/basic/api/document/{documentId}/lock"},g)})},"sbt/connections/FileService":function(){define("../declare,../lang,../stringUtil,../Promise,./FileConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler,../config,../util,../xml".split(","),function(h,g,c,f,
b,a,i,d,e,n,l){var m=h(i,{getId:function(){return this.id||this.getAsString("uid")},getTitle:function(){return this.getAsString("title")},getContent:function(){return this.getAsString("content")},getCreated:function(){return this.getAsDate("created")},getModified:function(){return this.getAsDate("modified")},getVersionLabel:function(){return this.getAsString("versionLabel")},getUpdated:function(){return this.getAsDate("updated")},getPublished:function(){return this.getAsDate("published")},getModifier:function(){return this.getAsObject(["modifierName",
"modifierUserId","modifierEmail","modifierUserState"])},getAuthor:function(){return this.getAsObject(["authorName","authorUserId","authorEmail","authorUserState"])},getLanguage:function(){return this.getAsString("language")},getDeleteWithRecord:function(){return this.getAsBoolean("deleteWithRecord")}}),o=h(i,{getId:function(){return this.id||this._fields.id||this.getAsString("uid")},getLabel:function(){return this.getAsString("label")},getSelfUrl:function(){return this.getAsString("selfUrl")},getAlternateUrl:function(){return this.getAsString("alternateUrl")},
getDownloadUrl:function(){return e.Properties.serviceUrl+"/files/"+this.service.endpoint.proxyPath+"/connections/"+this.getId()+"/"+this.getLibraryId()},getType:function(){return this.getAsString("type")},getLength:function(){return this.getAsNumber("length")},getEditLink:function(){return this.getAsString("editLink")},getEditMediaLink:function(){return this.getAsString("editMediaLink")},getThumbnailUrl:function(){return this.getAsString("thumbnailUrl")},getCommentsUrl:function(){return this.getAsString("commentsUrl")},
getAuthor:function(){return this.getAsObject(["authorName","authorUserId","authorEmail","authorUserState"])},getTitle:function(){return this.getAsString("title")},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getCreated:function(){return this.getAsDate("created")},getModified:function(){return this.getAsDate("modified")},getLastAccessed:function(){return this.getAsDate("lastAccessed")},getModifier:function(){return this.getAsObject(["modifierName",
"modifierUserId","modifierEmail","modifierUserState"])},getVisibility:function(){return this.getAsString("visibility")},getLibraryId:function(){return this.getAsString("libraryId")},getLibraryType:function(){return this.getAsString("libraryType")},getVersionUuid:function(){return this.getAsString("versionUuid")},getVersionLabel:function(){return this.getAsString("versionLabel")},getPropagation:function(){return this.getAsString("propagation")},getRecommendationsCount:function(){return this.getAsNumber("recommendationsCount")},
getCommentsCount:function(){return this.getAsNumber("commentsCount")},getSharesCount:function(){return this.getAsNumber("sharesCount")},getFoldersCount:function(){return this.getAsNumber("foldersCount")},getAttachmentsCount:function(){return this.getAsNumber("attachmentsCount")},getVersionsCount:function(){return this.getAsNumber("versionsCount")},getReferencesCount:function(){return this.getAsNumber("referencesCount")},getTotalMediaSize:function(){return this.getAsNumber("totalMediaSize")},getSummary:function(){return this.getAsString("summary")},
getContentUrl:function(){return this.getAsString("contentUrl")},getContentType:function(){return this.getAsString("contentType")},getObjectTypeId:function(){return this.getAsString("objectTypeId")},getLock:function(){return this.getAsString("lock")},getAcls:function(){return this.getAsString("acls")},getHitCount:function(){return this.getAsNumber("hitCount")},getAnonymousHitCount:function(){return this.getAsNumber("anonymousHitCount")},getTags:function(){return this.getAsString("tags")},setLabel:function(a){return this.setAsString("label",
a)},setSummary:function(a){return this.setAsString("summary",a)},setVisibility:function(a){return this.setAsString("visibility",a)},load:function(a,c){var e=this.getId(),f=this.service.validateField("fileId",e);if(f)return f;var h=this,f={query:g.mixin({fileUuid:e},a||{})},i=b.AtomFileInstance;if(c)i=b.AtomFileInstancePublic;i=this.service.constructUrl(i,null,{documentId:e});return this.service.getEntity(i,f,e,{createEntity:function(a,c){h.dataHandler=new d({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});
return h}})},save:function(a){if(this.getId())return this.service.updateFileMetadata(this,a)},addComment:function(a,b){return this.service.addCommentToFile(this.getAuthor().authorUserId,this.getId(),a,b)},pin:function(a){return this.service.pinFile(this.getId(),a)},unpin:function(a){return this.service.unpinFile(this.getId(),a)},lock:function(a){return this.service.lockFile(this.getId(),a)},unlock:function(a){return this.service.unlockFile(this.getId(),a)},remove:function(a){return this.service.deleteFile(this.getId(),
a)},update:function(a){return this.service.updateFileMetadata(this,a)},download:function(){return this.service.downloadFile(this.getId(),this.getLibraryId())}}),p={createEntities:function(a,c){return new d({data:c,namespaces:b.Namespaces,xpath:b.FileFeedXPath})},createEntity:function(a,c){var e=null,e="object"==typeof c?c:(new d({data:c,namespaces:b.Namespaces,xpath:b.FileXPath})).data,e=new d({data:e,namespaces:b.Namespaces,xpath:b.FileXPath});return new o({service:a,dataHandler:e})}},r={createEntities:function(a,
c){return new d({data:c,namespaces:b.Namespaces,xpath:b.CommentFeedXPath})},createEntity:function(a,c){var e=null,e="object"==typeof c?c:(new d({data:c,namespaces:b.Namespaces,xpath:b.CommentXPath})).data,e=new d({data:e,namespaces:b.Namespaces,xpath:b.CommentXPath});return new m({service:a,dataHandler:e})}};return h(a,{constructor:function(a){a=a?a.endpoint?a.endpoint:this.getDefaultEndpointName():this.getDefaultEndpointName();if(!this.endpoint)this.endpoint=e.findEndpoint(a)},getDefaultEndpointName:function(){return"connections"},
getFileFeedCallbacks:function(){return p},getCommentFeedCallbacks:function(){return r},newFile:function(a){if(a instanceof o)return a;g.isString(a)&&(a={id:a});return new o({service:this,_fields:g.mixin({},a)})},getFile:function(a,b){return this.newFile({id:a}).load(b)},getMyFiles:function(a){return this.getEntities(b.AtomFilesMy,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getFilesSharedWithMe:function(a){a={method:"GET",handleAs:"text",query:g.mixin({direction:"inbound"},
a?a:{})};return this.getEntities(b.AtomFilesShared,a,this.getFileFeedCallbacks())},getFilesSharedByMe:function(a){a={method:"GET",handleAs:"text",query:g.mixin({direction:"outbound"},a?a:{})};return this.getEntities(b.AtomFilesShared,a,this.getFileFeedCallbacks())},getPublicFiles:function(a){return this.getEntities(b.AtomFilesPublic,{method:"GET",handleAs:"text",query:a||{},headers:{}},this.getFileFeedCallbacks())},getMyFolders:function(a){return this.getEntities(b.AtomFoldersMy,{method:"GET",handleAs:"text",
query:a||{}},this.getFileFeedCallbacks())},getMyFileComments:function(a,d,c){var e=this.validateField("fileId",d);e||(e=this.validateField("userId",a));if(e)return e;c={method:"GET",handleAs:"text",query:c||{}};return this.getEntities(this.constructUrl(b.AtomFileCommentsMy,null,{userid:a,documentId:d}),c,this.getCommentFeedCallbacks())},getPublicFileComments:function(a,d,c){var e=this.validateField("fileId",d);e||(e=this.validateField("userId",a));if(e)return e;c={method:"GET",handleAs:"text",query:c||
{}};return this.getEntities(this.constructUrl(b.AtomFileCommentsPublic,null,{userid:a,documentId:d}),c,this.getCommentFeedCallbacks())},addCommentToFile:function(a,d,c,e){var f=this.validateField("fileId",d);f||(f=this.validateField("comment",c));if(f)return f;c={method:"POST",query:e||{},headers:b.AtomXmlHeaders,data:this._constructPayloadForComment(!1,c)};e=null;e=a?this.constructUrl(b.AtomAddCommentToFile,null,{userid:a,documentId:d}):this.constructUrl(b.AtomAddCommentToMyFile,null,{documentId:d});
return this.updateEntity(e,c,this.getCommentFeedCallbacks())},addCommentToMyFile:function(a,b,d){return this.addCommentToFile(null,a,b,d)},updateFileMetadata:function(a,d){var c=this.validateField("fileOrJson",a);if(c)return c;var c=this.newFile(a),e={method:"PUT",query:d||{},headers:b.AtomXmlHeaders,data:this._constructPayload(c._fields,c.getId())};return this.updateEntity(this.constructUrl(b.AtomUpdateFileMetadata,null,{documentId:c.getId()}),e,this.getFileFeedCallbacks())},pinFile:function(a,d){var c=
this.validateField("fileId",a);if(c)return c;c=d?g.mixin({},d):{};c.itemId=a;return this.updateEntity(b.AtomPinFile,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:c},{createEntity:function(){return"Success"}})},unpinFile:function(a,d){var c=this.validateField("fileId",a);if(c)return c;c=d?g.mixin({},d):{};c.itemId=a;return this.deleteEntity(b.AtomPinFile,{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:c},a)},addFilesToFolder:function(a,d){var c=this.validateField("fileIds",
a);c||(c=this.validateField("folderId",d));var c=this.constructUrl(b.AtomAddFilesToFolder,null,{collectionId:d}),e="?",f;for(f in a)c+=e+"itemId="+a[f],e="&";return this.updateEntity(c,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},{createEntity:function(){return"Success"}})},getMyPinnedFiles:function(a){return this.getEntities(b.AtomFilesMyPinned,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},deleteFile:function(a){var d=this.validateField("fileId",a);return d?
d:this.deleteEntity(this.constructUrl(b.AtomDeleteFile,null,{documentId:a}),{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},lockFile:function(a,d){var c=d?g.mixin({},d):{};c.type="HARD";var e={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d||{}};return this.updateEntity(this.constructUrl(b.AtomLockUnlockFile,c,{documentId:a}),e,{createEntity:function(){return"Success"}},d)},unlockFile:function(a,d){var c=d?g.mixin({},d):{};c.type="NONE";var e={method:"POST",
headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d||{}};return this.updateEntity(this.constructUrl(b.AtomLockUnlockFile,c,{documentId:a}),e,{createEntity:function(){return"Success"}},d)},uploadFile:function(a,b){var d=this.validateField("File Control Or Id",a);if(d)return d;promose=this.validateHTML5FileSupport();if(d)return d;d=null;if("string"==typeof a)d=document.getElementById(a),filePath=d.value,d=d.files;else if("object"==typeof a)filePath=a.value,d=a.files;else return this.createBadRequestPromise("File Control or ID is required");
var d=d[0],c=new FormData;c.append("file",d);return this.uploadFileBinary(c,d.name,b)},uploadFileBinary:function(a,b,d){var c=this.validateField("Binary Content",a);return c?c:(c=this.validateField("File Name",b))?c:-1!=n.getJavaScriptLibrary().indexOf("Dojo 1.4.3")?this.createBadRequestPromise("Dojo 1.4.3 is not supported for File Upload"):this.updateEntity(this.constructUrl(e.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/"+encodeURIComponent(b),d&&d.parameters?d.parameters:
{}),{method:"POST",headers:{"Content-Type":!1,"Process-Data":!1},query:d||{},data:a},this.getFileFeedCallbacks())},downloadFile:function(a,b){window.open(e.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/"+a+"/"+b)},_constructPayloadForComment:function(a,d){var c;c='<entry xmlns="http://www.w3.org/2005/Atom"><category term="comment" label="comment" scheme="tag:ibm.com,2006:td/type"/>';c=!0==a?c+('<deleteWithRecord xmlns="'+b.Namespaces.td+'">false</deleteWithRecord>'):c+('<content type="text/plain">'+
l.encodeXmlEntry(d)+"</content>");return c+"</entry>"},_constructPayload:function(a,d){var c;c='<entry xmlns="http://www.w3.org/2005/Atom"><category term="document" label="document" scheme="tag:ibm.com,2006:td/type"></category>'+("<id>urn:lsid:ibm.com:td:"+l.encodeXmlEntry(d)+"</id>");if(a)for(key in a){var e=a[key];"label"==key?(c+='<label xmlns="'+b.Namespaces.td+'">'+l.encodeXmlEntry(e)+"</label>",c+="<title>"+l.encodeXmlEntry(e)+"</title>"):"summary"==key?c+='<summary type="text">'+l.encodeXmlEntry(e)+
"</summary>":"visibility"==key&&(c+='<visibility xmlns="'+b.Namespaces.td+'">'+l.encodeXmlEntry(e)+"</visibility>")}return c+"</entry>"}})})},"sbt/connections/ProfileAdminService":function(){define("../declare,../lang,../config,../stringUtil,./ProfileConstants,../base/BaseService,../base/XmlDataHandler,./ProfileService".split(","),function(h,g,c,f,b,a,i,d){return h(d,{createProfile:function(a,d){var c=this._toProfile(a),f=this._validateProfile(c);if(f)return f;f={};c.getUserid()?f.userid=c.getUserid():
f.email=c.getEmail();g.mixin(f,d||{});f={method:"POST",query:f,headers:b.AtomXmlHeaders,data:this._constructProfilePutData(c)};return this.updateEntity(b.AdminAtomProfileDo,f,{createEntity:function(){return c}},d)},deleteProfile:function(a,d){var c=this._validateProfileId(a);if(c)return c;c={};this.isEmail(a)?c.email=a:c.userid=a;g.mixin(c,d||{});return this.deleteEntity(b.AdminAtomProfileEntryDo,{method:"DELETE",query:c,handleAs:"text"},a,d)}})})},"sbt/connections/ProfileConstants":function(){define(["../lang",
"./ConnectionsConstants"],function(h,g){return h.mixin(g,{DefaultCacheSize:10,AddressFields:"streetAddress,extendedAddress,locality,region,postalCode,countryName".split(","),ProfileFeedXPath:g.ConnectionsFeedXPath,ProfileXPath:{entry:"/a:feed/a:entry",uid:"a:contributor/snx:userid",id:"a:id",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",email:"a:contributor/a:email",title:"a:title",updated:"a:updated",altEmail:"a:content/h:div/h:span/h:div[@class='x-groupwareMail']",photoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/image']/@href",
fnUrl:"a:content/h:div/h:span/h:div/h:a[@class='fn url']/@href",soundUrl:"a:content/h:div/h:span/h:div/h:a[@class='sound url']/@href",jobTitle:"a:content/h:div/h:span/h:div[@class='title']",organizationUnit:"a:content/h:div/h:span/h:div[@class='org']/h:span[@class='organization-unit']",telephoneNumber:"a:content/h:div/h:span/h:div[@class='tel']/h:span[@class='value']",building:"a:content/h:div/h:span/h:div/h:span[@class='x-building']",floor:"a:content/h:div/h:span/h:div/h:span[@class='x-floor']",
officeNumber:"a:content/h:div/h:span/h:div/h:span[@class='x-office-number']",streetAddress:"a:content/h:div/h:span/h:div/h:div[@class='street-address']",extendedAddress:"a:content/h:div/h:span/h:div/h:div[@class='extended-address x-streetAddress2']",locality:"a:content/h:div/h:span/h:div/h:span[@class='locality']",postalCode:"a:content/h:div/h:span/h:div/h:span[@class='postal-code']",region:"a:content/h:div/h:span/h:div/h:span[@class='region']",countryName:"a:content/h:div/h:span/h:div/h:div[@class='country-name']",
summary:"a:summary",groupwareMail:"a:content/h:div/h:span/h:div[@class='x-groupwareMail']",blogUrl:"a:content/h:div/h:span/h:div/h:a[@class='x-blog-url url']/@href",role:"a:content/h:div/h:span/h:div[@class='role']",managerUid:"a:content/h:div/h:span/h:div[@class='x-manager-uid']",isManager:"a:content/h:div/h:span/h:div[@class='x-is-manager']"},ProfileVCardXPath:{entry:"/a:feed/a:entry",uid:"a:contributor/snx:userid",vcard:"a:content",id:"a:id",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",
email:"a:contributor/a:email",title:"a:title",updated:"a:updated",altEmail:"EMAIL;X_GROUPWARE_MAIL",photoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/image']/@href",fnUrl:"URL",soundUrl:"SOUND;VALUE=URL",jobTitle:"TITLE",organizationUnit:"a:content/h:div/h:span/h:div[@class='org']/h:span[@class='organization-unit']",telephoneNumber:"TEL;WORK",building:"X_BUILDING",floor:"X_FLOOR",officeNumber:"X_OFFICE_NUMBER",workLocation:"ADR;WORK",streetAddress:"a:content/h:div/h:span/h:div/h:div[@class='street-address']",
extendedAddress:"a:content/h:div/h:span/h:div/h:div[@class='extended-address x-streetAddress2']",locality:"a:content/h:div/h:span/h:div/h:span[@class='locality']",postalCode:"a:content/h:div/h:span/h:div/h:span[@class='postal-code']",region:"a:content/h:div/h:span/h:div/h:span[@class='region']",countryName:"a:content/h:div/h:span/h:div/h:div[@class='country-name']",summary:"a:summary",groupwareMail:"EMAIL;X_GROUPWARE_MAIL"},ProfileTagsXPath:{entries:"/app:categories/a:category",targetEmail:"app:categories/snx:targetEmail",
numberOfContributors:"app:categories/@snx:numberOfContributors",entry:"/app:categories/a:category",uid:"@term",id:"@term",term:"@term",frequency:"@snx:frequency",intensity:"@snx:intensityBin",visibility:"@snx:visibilityBin",contributorName:"a:name",contributorUserid:"a:userid",contributorEmail:"a:email"},profileCreateAttributes:{guid:"com.ibm.snx_profiles.base.guid",email:"com.ibm.snx_profiles.base.email",uid:"com.ibm.snx_profiles.base.uid",distinguishedName:"com.ibm.snx_profiles.base.distinguishedName",
displayName:"com.ibm.snx_profiles.base.displayName",givenNames:"com.ibm.snx_profiles.base.givenNames",surname:"com.ibm.snx_profiles.base.surname",userState:"com.ibm.snx_profiles.base.userState"},AtomProfileDo:"/profiles{authType}/atom/profile.do",AtomProfileEntryDo:"/profiles{authType}/atom/profileEntry.do",AtomConnectionsDo:"/profiles{authType}/atom/connections.do",AtomReportingChainDo:"/profiles{authType}/atom/reportingChain.do",AtomPeopleManagedDo:"/profiles{authType}/atom/peopleManaged.do",AtomConnectionsInCommonDo:"/profiles{authType}/atom/connectionsInCommon.do",
AtomSearchDo:"/profiles{authType}/atom/search.do",AtomPeopleManagedDo:"/profiles{authType}/atom/peopleManaged.do",AtomTagsDo:"/profiles{authType}/atom/profileTags.do",AdminAtomProfileDo:"/profiles/admin/atom/profiles.do",AdminAtomProfileEntryDo:"/profiles/admin/atom/profileEntry.do"})})},"sbt/connections/ProfileService":function(){define("../declare,../lang,../config,../stringUtil,./ProfileConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler,../base/VCardDataHandler,../Cache,../util".split(","),
function(h,g,c,f,b,a,i,d,e,n){var l=h(i,{constructor:function(){},getUserid:function(){return this.getAsString("userid")},getName:function(){return this.getAsString("name")},getEmail:function(){return this.getAsString("email")},getGroupwareMail:function(){return this.getAsString("groupwareMail")},getThumbnailUrl:function(){return this.getAsString("photoUrl")},getJobTitle:function(){return this.getAsString("jobTitle")},getDepartment:function(){return this.getAsString("organizationUnit")},getAddress:function(){return this.getAsObject(b.AddressFields)},
getTelephoneNumber:function(){return this.getAsString("telephoneNumber")},getProfileUrl:function(){return this.getAsString("fnUrl")},getBuilding:function(){return this.getAsString("building")},getFloor:function(){return this.getAsString("floor")},getPronunciationUrl:function(){return this.getAsString("soundUrl")},getSummary:function(){return this.getAsString("summary")},setTelephoneNumber:function(a){this.setAsString("telephoneNumber",a)},setBuilding:function(a){this.setAsString("building",a)},setFloor:function(a){this.setAsString("floor",
a)},setJobTitle:function(a){this.setAsString("jobTitle",a)},setPhotoLocation:function(a){this.setAsString("imageLocation",a)},setAddress:function(a){this.setAsObject(a)},load:function(a){var c=this.getUserid()||this.getEmail(),e=this.service._validateProfileId(c);if(e)return e;var f=this,e={};this.service.isEmail(c)?e.email=c:e.userid=c;g.mixin(e,a||{});e={handleAs:"text",query:e};return this.service.getEntity(this.service.constructUrl(b.AtomProfileDo,{},{authType:this.service._getProfileAuthString()}),
e,c,{createEntity:function(a,c){f.dataHandler=new d({data:c,namespaces:b.Namespaces,xpath:b.ProfileXPath});f.id=f.dataHandler.getEntityId();return f}},a)},update:function(a){return this.service.updateProfile(this,a)},getColleagues:function(a){return this.service.getColleagues(this,a)}}),m=h(i,{constructor:function(){},getTerm:function(){return this.getAsString("term")},getFrequency:function(){return this.getAsNumber("frequency")},getIntensity:function(){return this.getAsNumber("intensity")},getVisibility:function(){return this.getAsNumber("visibility")}}),
o={createEntity:function(a,c,f){var g=null,g=f.args&&"vcard"==f.args.format?new e({data:c,namespaces:b.Namespaces,xpath:b.ProfileVCardXPath}):new d({data:c,namespaces:b.Namespaces,xpath:b.ProfileXPath});return new l({service:a,id:g.getEntityId(),dataHandler:g})}},p={createEntities:function(a,c){return new d({data:c,namespaces:b.Namespaces,xpath:b.ProfileFeedXPath})},createEntity:function(a,c,f){var g=null,g=f.args&&"vcard"==f.args.format?new e({data:c,namespaces:b.Namespaces,xpath:b.ProfileVCardXPath}):
new d({data:c,namespaces:b.Namespaces,xpath:b.ProfileXPath});return new l({service:a,id:g.getEntityId(),dataHandler:g})}},r={createEntities:function(a,c){return new d({data:c,namespaces:b.Namespaces,xpath:b.ProfileTagsXPath})},createEntity:function(a,c){var e=new d({data:c,namespaces:b.Namespaces,xpath:b.ProfileTagsXPath});return new m({service:a,id:e.getEntityId(),dataHandler:e})}};return h(a,{constructor:function(){if(!this.endpoint)this.endpoint=c.findEndpoint(this.getDefaultEndpointName());if(!this._cache&&
(c.Properties.ProfileCacheSize||b.DefaultCacheSize))this._cache=new n(c.Properties.ProfileCacheSize||b.DefaultCacheSize)},getDefaultEndpointName:function(){return"connections"},newProfile:function(a){return this._toProfile(a)},getProfile:function(a,b){var c=this._toProfile(a),d=this._validateProfile(c);return d?d:c.load(b)},updateProfile:function(a,c){var d=this._toProfile(a),e=this._validateProfile(d);if(e)return e;e={};d.getUserid()?e.userid=d.getUserid():e.email=d.getEmail();g.mixin(e,c||{});e=
{method:"PUT",query:e,headers:b.AtomXmlHeaders,data:this._constructProfilePostData(d)};return this.updateEntity(this.constructUrl(b.AtomProfileEntryDo,{},{authType:this._getProfileAuthString()}),e,{createEntity:function(){return d}},c)},getTags:function(a,c){var d=this._toTargetObject(a),e=this._validateTargetObject(d);if(e)return e;d={method:"GET",handleAs:"text",query:g.mixin(d,c||{})};return this.getEntities(this.constructUrl(b.AtomTagsDo,{},{authType:this._getProfileAuthString()}),d,this.getProfileTagFeedCallbacks(),
c)},getColleagues:function(a,c){var d=this._toIdObject(a),e=this._validateIdObject(d);if(e)return e;d={method:"GET",handleAs:"text",query:g.mixin(d,{connectionType:"colleague",outputType:"profile"},c||{})};return this.getEntities(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),d,this.getProfileFeedCallbacks(),c)},getReportingChain:function(a,c){var d=this._toIdObject(a),e=this._validateIdObject(d);if(e)return e;d={method:"GET",handleAs:"text",query:g.mixin(d,c||{})};
return this.getEntities(this.constructUrl(b.AtomReportingChainDo,{},{authType:this._getProfileAuthString()}),d,this.getProfileFeedCallbacks(),c)},getPeopleManaged:function(a,c){var d=this._toIdObject(a),e=this._validateIdObject(d);if(e)return e;d={method:"GET",handleAs:"text",query:g.mixin(d,c||{})};return this.getEntities(this.constructUrl(b.AtomPeopleManagedDo,{},{authType:this._getProfileAuthString()}),d,this.getProfileFeedCallbacks(),c)},search:function(a){if(!a)return this.createBadRequestPromise("Invalid arguments, one or more of the input parameters to narrow the search must be specified.");
var c={method:"GET",handleAs:"text",query:a};return this.getEntities(this.constructUrl(b.AtomSearchDo,{},{authType:this._getProfileAuthString()}),c,this.getProfileFeedCallbacks(),a)},updateProfilePhoto:function(a,b,d){var e=this.validateField("File Control Or Id",a);if(e)return e;promose=this.validateHTML5FileSupport();if(e)return e;b=this._toIdObject(b);e=null;if("string"==typeof a)a=document.getElementById(a),filePath=a.value,e=a.files;else if("object"==typeof a)filePath=a.value,e=a.files;else return this.createBadRequestPromise("File Control or ID is required");
if(1!=e.length)return this.createBadRequestPromise("Only one file needs to be provided to this API");a=e[0];e=new FormData;e.append("file",a);b=g.mixin(b,d||{});return this.updateEntity(this.constructUrl(c.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/"+encodeURIComponent(a.name),d&&d.parameters?d.parameters:{}),{method:"PUT",headers:{"Content-Type":!1,"Process-Data":!1},query:b||{},data:e},{createEntity:function(a,b){return b}})},getProfileFeedCallbacks:function(){return p},
getProfileCallbacks:function(){return o},getProfileTagFeedCallbacks:function(){return r},_toIdObject:function(a){var b={};if(g.isString(a))this.isEmail(a)?b.email=a:b.userid=a;else if(a instanceof l)if(a.getUserid())b.userid=a.getUserid();else if(a.getEmail())b.email=a.getEmail();return b},_toTargetObject:function(a){var b={};if(g.isString(a))this.isEmail(a)?b.targetEmail=a:b.targetKey=a;else if(a instanceof l)if(a.getUserid())b.targetKey=a.getUserid();else if(a.getEmail())b.targetEmail=a.getEmail();
return b},_validateIdObject:function(a){if(!a.userid&&!a.email)return this.createBadRequestPromise("Invalid argument, userid or email must be specified.")},_validateTargetObject:function(a){if(!a.targetKey&&!a.targetEmail)return this.createBadRequestPromise("Invalid argument, userid or email must be specified.")},_toProfile:function(a){if(a instanceof l)return a;var b=a;if(g.isString(a))b={},this.isEmail(a)?b.email=a:b.userid=a;else if(b&&b.id&&!b.userid&&!b.email)this.isEmail(b.id)?b.email=b.id:
b.userid=b.id,delete b.id;return new l({service:this,_fields:g.mixin({},b)})},_isAddressSet:function(a){return a._fields.streetAddress||a._fields.extendedAddress||a._fields.locality||a._fields.region||a._fields.postalCode||a._fields.countryName},_constructProfilePostData:function(a){return f.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns:app="http://www.w3.org/2007/app" xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:fh="http://purl.org/syndication/history/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns="http://www.w3.org/2005/Atom"><category term="profile" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category><content type="text">\nBEGIN:VCARD\nVERSION:2.1\n${jobTitle}${address}${telephoneNumber}${building}${floor}END:VCARD\n</content></entry>',
a,function(c,d){return c="address"==d?a.service._isAddressSet(a)?f.transform("ADR;WORK:;;${streetAddress},${extendedAddress};${locality};${region};${postalCode};${countryName}\n",{streetAddress:a._fields.streetAddress,extendedAddress:a._fields.extendedAddress,locality:a._fields.locality,region:a._fields.region,postalCode:a._fields.postalCode,countryName:a._fields.countryName}):null:a._fields[d]?f.transform("${attributeName}:${attributeValue}\n",{attributeName:b.ProfileVCardXPath[d],attributeValue:a._fields[d]}):
null},a)},_constructProfilePutData:function(a){return f.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns:app="http://www.w3.org/2007/app" xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:fh="http://purl.org/syndication/history/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns="http://www.w3.org/2005/Atom"><category term="profile" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category><content type="application/xml"><person xmlns="http://ns.opensocial.org/2008/opensocial"><com.ibm.snx_profiles.attrib>${guid}${email}${uid}${distinguishedName}${displayName}${givenNames}${surname}${userState}</com.ibm.snx_profiles.attrib></person></content></entry>',
a,function(d,c){if(a._fields[c])return d=f.transform("<entry><key>${attributeName}</key><value><type>text</type><data>${attributeValue}</data></value></entry>",{attributeName:b.profileCreateAttributes[c],attributeValue:a._fields[c]})},a)},_validateProfile:function(a){if(!a||!a.getUserid()&&!a.getEmail())return this.createBadRequestPromise("Invalid argument, profile with valid userid or email must be specified.")},_validateProfileId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid or email")},
_getProfileAuthString:function(){return this.endpoint.authType==b.AuthTypes.Basic?"":this.endpoint.authType==b.AuthTypes.OAuth?"/oauth":""}})})},"sbt/connections/SearchConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin(g,{Namespaces:{a:"http://www.w3.org/2005/Atom",ibmsc:"http://www.ibm.com/search/content/2010",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",snx:"http://www.ibm.com/xmlns/prod/sn",
spelling:"http://a9.com/-/opensearch/extensions/spelling/1.0/"},SearchFeedXPath:g.ConnectionsFeedXPath,SearchXPath:{entry:"/a:entry",uid:"a:id",title:"a:title",content:"a:content",updated:"a:updated",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",rank:"snx:rank",relevance:"relevance:score",summary:"a:summary",authorState:"a:author/snx:userState",type:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",application:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/component']/@term",
applicationCount:"count(a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/component']/@term)",primaryComponent:"a:category[ibmsc:field[@id='primaryComponent']]/@term",tags:"a:category[not(@scheme)]/@term",commentCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",resultLink:"a:link[not(@rel)]/@href",bookmarkLink:"ibmsc:field[@id='dogearURL']",eventStartDate:"ibmsc:field[@id='eventStartDate']",authorJobTitle:"a:content/xhtml:div/xhtml:span/xhtml:div[@class='title']",authorJobLocation:"a:content/xhtml:div/xhtml:span/xhtml:div[@class='location']",
authorCount:"count(a:contributor)",contributorCount:"count(a:author)",tagCount:"count(a:category[not(@scheme)])",highlightField:"ibmsc:field[@id='highlight']",fileExtension:"ibmsc:field[@id='fileExtension']",memberCount:"snx:membercount",communityUuid:"snx:communityUuid",containerType:"ibmsc:field[@id='container_type']",communityParentLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container' and @type='text/html']/@href",parentageMetaID:"ibmsc:field[contains(@id, 'ID')]/@id",parentageMetaURL:"ibmsc:field[contains(@id, 'URL')]",
parentageMetaURLID:"ibmsc:field[contains(@id, 'URL')]/@id",objectRefDisplayName:"ibmsc:field[@id='FIELD_OBJECT_REF_DISPLAY_NAME']",objectRefUrl:"ibmsc:field[@id='FIELD_OBJECT_REF_URL']",accessControl:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/accesscontrolled']/@term",commentsSummary:"ibmsc:field[@id='commentsSummary']"},publicSearch:"/search/atom/search/results",mySearch:"/search/atom/mysearch/results",peopleSearch:"/search/atom/search/facets/people",myPeopleSearch:"/search/atom/mysearch/facets/people",
tagsSearch:"/search/atom/search/facets/tags",myTagsSearch:"/search/atom/mysearch/facets/tags",dateSearch:"/search/atom/search/facets/date",myDateSearch:"/search/atom/mysearch/facets/date",sourceSearch:"/search/atom/search/facets/source",mySourceSearch:"/search/atom/mysearch/facets/source"})})},"sbt/connections/SearchService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./SearchConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler".split(","),function(h,
g,c,f,b,a,i,d,e){var n=h(d,{constructor:function(){},getId:function(){return this.getAsString("id")},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName","authorEmail"])},getSummary:function(){return this.getAsString("summary")},getScore:function(){return this.getAsNumber("relevance")},
getRank:function(){return this.getAsNumber("rank")},getUpdated:function(){return this.getAsDate("updated")}}),l={createEntities:function(b,c){return new e({service:b,data:c,namespaces:a.Namespaces,xpath:a.SearchFeedXPath})},createEntity:function(b,c){var d=new e({service:b,data:c,namespaces:a.Namespaces,xpath:a.SearchXPath});return new n({service:b,dataHandler:d})}};return h(i,{constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},
getResults:function(b,d){var e={method:"GET",handleAs:"text",query:c.mixin({query:b},d||{})};return this.getEntities(a.publicSearch,e,l)},getMyResults:function(b,d){var e={method:"GET",handleAs:"text",query:c.mixin({query:b},d||{})};return this.getEntities(a.mySearch,e,l)},getPeople:function(b,d){var e={method:"GET",handleAs:"text",query:c.mixin({query:b},d||{})};return this.getEntities(a.peopleSearch,e,l)},getMyPeople:function(b,d){var e={method:"GET",handleAs:"text",query:c.mixin({query:b},d||{})};
return this.getEntities(a.myPeopleSearch,e,l)},getTags:function(b,d){var e={method:"GET",handleAs:"text",query:c.mixin({query:b},d||{})};return this.getEntities(a.tagsSearch,e,l)},getMyTags:function(b,d){var e={method:"GET",handleAs:"text",query:c.mixin({query:b},d||{})};return this.getEntities(a.myTagsSearch,e,l)},getApplications:function(b,d){var e={method:"GET",handleAs:"text",query:c.mixin({query:b},d||{})};return this.getEntities(a.sourceSearch,e,l)},getMyApplications:function(b,d){var e={method:"GET",
handleAs:"text",query:c.mixin({query:b},d||{})};return this.getEntities(a.mySourceSearch,e,l)},getDates:function(b,d){var e={method:"GET",handleAs:"text",query:c.mixin({query:b},d||{})};return this.getEntities(a.dateSearch,e,l)},getMyDates:function(b,d){var e={method:"GET",handleAs:"text",query:c.mixin({query:b},d||{})};return this.getEntities(a.myDateSearch,e,l)}})})},"sbt/data/AtomReadStore":function(){define("../declare,../config,../lang,../base/core,../xml,../xpath,dojox/html/entities".split(","),
function(h,g,c,f,b,a,i){return h(null,{_endpoint:null,_xmlData:null,totalResults:0,startIndex:0,itemsPerPage:5,items:null,url:"",sendQuery:!0,unescapeHTML:!1,urlPreventCache:!1,atom:f.feedXPath,attributes:f.entryXPath,namespaces:f.namespaces,paramSchema:{},constructor:function(a){this._endpoint=g.findEndpoint(a.endpoint||"connections");if(a&&(this.url=a.url,this.attributes=a.attributes||this.attributes,this.atom=a.feedXPath||this.atom,this.namespaces=a.namespaces||this.namespaces,this.paramSchema=
a.paramSchema||this.paramSchema,this.rewriteUrl=a.rewriteUrl,this.label=a.label||this.label,this.sendQuery=a.sendQuery||a.sendquery||this.sendQuery,this.unescapeHTML=a.unescapeHTML,"urlPreventCache"in a))this.urlPreventCache=a.urlPreventCache?!0:!1;if(!this.url)throw Error("sbt.data.AtomReadStore: A service URL must be specified when creating the data store");},getEndpoint:function(){return this._endpoint},setUrl:function(a){this.url=a},setAttributes:function(a){this.attributes=a},getValue:function(b,
e,f){var g=/^count\(.*\)$/;this._assertIsItem(b);this._assertIsAttribute(e);if(!b._attribs[e]){var h=this.attributes[e];if(c.isFunction(h))b._attribs[e]=h(b,e);else if(h.match(g))b._attribs[e]=a.selectNumber(b.element,this.attributes[e],this.namespaces)+"";else if((g=a.selectNodes(b.element,this.attributes[e],this.namespaces))&&1==g.length)b._attribs[e]=g[0].text||g[0].textContent;else if(g){b._attribs[e]=[];for(h=0;h<g.length;h++)b._attribs[e].push(g[h].text||g[h].textContent)}else b._attribs[e]=
null}if(!b._attribs[e])return f;if("object"==typeof b._attribs[e])for(f=0;f<b._attribs[e].length;f++)b._attribs[e][f]=i.encode(b._attribs[e][f]);else b._attribs[e]=i.encode(b._attribs[e]);return b._attribs[e]},getValues:function(b,c){this._assertIsItem(b);this._assertIsAttribute(c);if(!b._attribs[c]){for(var f=a.selectNodes(b.element,this.attributes[c],this.namespaces),g=[],h=0;h<f.length;h++)g[h]=f[h].text||f[h].textContent;b._attribs[c]=g}return b._attribs[c]},getAttributes:function(){var a=[],
b;for(b in this.attributes)this.attributes.hasOwnProperty(b)&&a.push(b);return a},hasAttribute:function(a,b){return void 0!=this.attributes[b]},containsValue:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},isItem:function(a){return a&&a.element&&a.store&&a.store===this?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},fetch:function(c){var e=this,f=c.scope||e,g=this._getServiceUrl(this._getQuery(c));
g?this._endpoint.xhrGet({serviceUrl:g,handleAs:"text",load:function(g){try{e.response=g;e._xmlData=b.parse(g);e.totalResults=parseInt(a.selectText(e._xmlData,e.atom.totalResults,e.namespaces));e.startIndex=parseInt(a.selectText(e._xmlData,e.atom.startIndex,e.namespaces));e.itemsPerPage=parseInt(a.selectText(e._xmlData,e.atom.itemsPerPage,e.namespaces));e.items=e._createItems(e._xmlData);c.onBegin&&c.onBegin.call(f,e.totalResults,c);if(c.onItem)for(g=0;g<e._entries;g++)c.onItem.call(f,e.entries[g],
c);c.onComplete&&c.onComplete.call(f,c.onItem?null:e.items,c)}catch(h){c.onError&&c.onError.call(h)}},error:function(a){c.onError&&c.onError.call(a)}}):c.onError&&c.onError.call(Error("sbt.data.AtomReadStore: No service URL specified."))},getFeatures:function(){return{"dojo.data.api.Read":!0}},close:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},getLabel:function(a){return this.getValue(a,this.label)},getLabelAttributes:function(){return[this.label]},_getQuery:function(a){var b=
a.query||{};b.pageSize=a.count||b.pageSize;b.pageNumber=Math.floor(a.start/a.count)+1;if(a.sort&&a.sort[0])if(a=a.sort[0],b.sortBy=a.attribute,!0===a.descending)b.sortOrder="desc";else if(!1===a.descending)b.sortOrder="asc";return b},_getServiceUrl:function(a){if(!this.sendQuery||!a)return this.url;if(c.isString(a))return this.url+a;var b="",f=this.paramSchema,g;for(g in a)if(g in f){var h=f[g].format(a[g]);h&&(b+=h+"&")}else b+=g+"="+a[g]+"&";if(!b)return this.url;a=this.url;a=0>a.indexOf("?")?a+
"?":a+"&";return a+b},_createItems:function(b){for(var b=a.selectNodes(b,this.atom.entries,this.namespaces),c=[],f=0;f<b.length;f++)c.push(this._createItem(b[f]));return c},_createItem:function(a){var b=this;return{element:a,store:this,_attribs:{},getValue:function(a){if(b.hasAttribute(this,a))return b.getValue(this,a)}}},_assertIsItem:function(a){if(!this.isItem(a))throw Error("sbt.data.AtomReadStore: Invalid item argument.");},_assertIsAttribute:function(a){if(!this.attributes[a])throw Error("sbt.data.AtomReadStore: Invalid attribute argument.");
}})})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(h){var g=h.getObject("dojox.html.entities",!0),c=function(b,a){var c,d;if(a._encCache&&a._encCache.regexp&&a._encCache.mapper&&a.length==a._encCache.length)c=a._encCache.mapper,d=a._encCache.regexp;else{c={};d=["["];var e;for(e=0;e<a.length;e++)c[a[e][0]]="&"+a[e][1]+";",d.push(a[e][0]);d.push("]");d=RegExp(d.join(""),"g");a._encCache={mapper:c,regexp:d,length:a.length}}return b=b.replace(d,function(a){return c[a]})},f=function(b,
a){var c,d;if(a._decCache&&a._decCache.regexp&&a._decCache.mapper&&a.length==a._decCache.length)c=a._decCache.mapper,d=a._decCache.regexp;else{c={};d=["("];var e;for(e=0;e<a.length;e++){var f="&"+a[e][1]+";";e&&d.push("|");c[f]=a[e][0];d.push(f)}d.push(")");d=RegExp(d.join(""),"g");a._decCache={mapper:c,regexp:d,length:a.length}}return b=b.replace(d,function(a){return c[a]})};g.html=[["&","amp"],['"',"quot"],["<","lt"],[">","gt"],["\u00a0","nbsp"]];g.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3",
"pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],
["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],
["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],
["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c",
"Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0",
"pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193",
"darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b",
"int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],
["\u2666","diams"],["\u0152","Elig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],
["\u203a","rsaquo"]];g.encode=function(b,a){b&&(a?b=c(b,a):(b=c(b,g.html),b=c(b,g.latin)));return b};g.decode=function(b,a){b&&(a?b=f(b,a):(b=f(b,g.html),b=f(b,g.latin)));return b};return g})},"sbt/smartcloud/ProfileConstants":function(){define(["../lang"],function(h){return h.mixin({},{DefaultCacheSize:10,GetProfile:"/lotuslive-shindig-server/social/rest/people/@me/@self",GetMyConnections:"/lotuslive-shindig-server/social/rest/people/@me/@friends",GetUserIdentity:"/manage/oauth/getUserIdentity",
GetContactByGUID:"/lotuslive-shindig-server/social/rest/people/lotuslive:contact:{idToBeReplaced}/@self",GetProfileByGUID:"/lotuslive-shindig-server/social/rest/people/lotuslive:user:{idToBeReplaced}/@self",GetMyContacts:"/lotuslive-shindig-server/social/rest/people/@me/@all",ProfileJPath:{thumbnailUrl:"$..photo",address:"$..address",department:"$..name",jobTitle:"$..jobtitle",telephone:"$..telephone",about:"$..aboutMe",id:"$..id",objectId:"$..objectId",displayName:"$..displayName",emailAddress:"$..emailAddress",
profileUrl:"$..profileUrl",country:"$..country",orgId:"$..orgId",org:"$..org.name",global:"$..",firstElement:"$[0]",totalResults:"totalResults",startIndex:"startIndex",itemsPerPage:"itemsPerPage"}})})},"sbt/smartcloud/ProfileService":function(){define("../declare,../lang,../config,../stringUtil,../Cache,./Subscriber,../Jsonpath,../base/BaseService,../base/JsonDataHandler,./ProfileConstants,../base/BaseEntity".split(","),function(h,g,c,f,b,a,i,d,e,n,l){var m=h(l,{constructor:function(){},load:function(a){var b=
this.getId(),c=this.service._validateProfileId(b);if(c)return c;c={};c.userid=b;g.mixin(c,a||{format:"json"});return this.service.getEntity(consts.GetProfile,{handleAs:"json",query:c},b,{createEntity:function(a,b){return new e({data:b,jsonpath:n.ProfileJPath})}},a)},getData:function(){return this.dataHandler.getEntityData()},getId:function(){return this.getAsString("id")},getObjectId:function(){return this.getAsString("objectId")},getDisplayName:function(){return this.getAsString("displayName")},
getEmail:function(){return this.getAsString("emailAddress")},getThumbnailUrl:function(){var a=this.getAsString("thumbnailUrl");a&&(a=this.service.endpoint.baseUrl+"/contacts/img/photos/"+a);return a},getAddress:function(){var a=this.getAsArray("address");return a=this.dataHandler.extractFirstElement(a)},getDepartment:function(){return this.getAsString("department")},getJobTitle:function(){return this.getAsString("jobTitle")},getProfileUrl:function(){return this.getAsString("profileUrl")},getTelephoneNumber:function(){return this.getAsString("telephone")},
getCountry:function(){return this.getAsString("country")},getOrgId:function(){return this.getAsString("orgId")},getOrg:function(){return this.getAsString("org")},getAbout:function(){return this.getAsString("about")}}),o={createEntity:function(a,b){var c=new e({data:b,jsonpath:n.ProfileJPath});return new m({service:a,id:c.getEntityId(),dataHandler:c})}},p={createEntities:function(a,b){return new e({data:b,jsonpath:n.ProfileJPath})},createEntity:function(a,b){var c=new e({data:b,jsonpath:n.ProfileJPath});
return new m({service:a,id:c.getEntityId(),dataHandler:c})}};return h(d,{_profiles:null,constructor:function(){if(!this.endpoint)this.endpoint=c.findEndpoint(this.getDefaultEndpointName());if(!this._cache&&(c.Properties.ProfileCacheSize||n.DefaultCacheSize))this._cache=new b(c.Properties.ProfileCacheSize||n.DefaultCacheSize)},getDefaultEndpointName:function(){return"smartcloud"},getProfile:function(a,b){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;g.mixin(c,b||{format:"json"});
d={method:"GET",handleAs:"json",query:b||{format:"json"}};c=encodeURIComponent(c.userid);return this.getEntity(this.constructUrl(n.GetProfileByGUID,{},{idToBeReplaced:c}),d,c,this.getProfileCallbacks())},getProfileByGUID:function(a,b){return this.getProfile(a,b)},getContact:function(a,b){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;d={method:"GET",handleAs:"json",query:g.mixin(c,b||{format:"json"})};c=c.userid;return this.getEntity(this.constructUrl(n.GetContactByGUID,{},{idToBeReplaced:c}),
d,c,this.getProfileCallbacks())},getContactByGUID:function(a,b){return this.getContact(a,b)},getMyConnections:function(a){return this.getEntities(n.GetMyConnections,{method:"GET",handleAs:"json",query:a||{format:"json"}},this.getProfileFeedCallbacks())},getMyContacts:function(a){return this.getEntities(n.GetMyContacts,{method:"GET",handleAs:"json",query:a||{format:"json"}},this.getProfileFeedCallbacks())},getMyContactsByIndex:function(a,b,c){a={method:"GET",handleAs:"json",query:g.mixin({startIndex:a,
count:b},c||{format:"json"})};return this.getEntities(n.GetMyContacts,a,this.getProfileFeedCallbacks())},getProfileCallbacks:function(){return o},getProfileFeedCallbacks:function(){return p},_toIdObject:function(a){var b={};if(g.isString(a))b.userid=a;else if(a instanceof m)b.userid=a.getUserid();return b},_validateIdObject:function(a){if(!a.userid)return this.createBadRequestPromise("Invalid argument, userid must be specified.")},_validateProfileId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid")}})})},
"sbt/smartcloud/Subscriber":function(){define(["../declare","../Endpoint"],function(h){return h(null,{endpoint:null,constructor:function(g,c){this.endpoint=g;c&&this.load(c)},load:function(g){var c=this;this.endpoint.xhrGet({serviceUrl:"/manage/oauth/getUserIdentity",loginUi:this.endpoint.loginUi,handleAs:"json",load:function(f){g(c,f)},error:function(){g(c,null);console.log("Error fetching feed for getUserIdentity")}})},getSubscriberId:function(g){return g&&g.subscriberid?g.subscriberid:null}})})},
"sbt/store/AtomStore":function(){define("../declare,../config,../lang,../base/core,../xml,../xpath,../itemFactory,dojo/_base/Deferred,dojo/promise/Promise,dojo/store/util/QueryResults,dojox/html/entities".split(","),function(h,g,c,f,b,a,i,d,e,n,l){var m=h(e,{_store:null,_isRejected:!1,_isFulfilled:!1,_isCancelled:!1,_callbacks:[],_errbacks:[],_endpoint:null,_xmlData:null,totalResults:null,startIndex:0,itemsPerPage:5,items:null,url:"",sendQuery:!0,unescapeHTML:!1,atom:f.feedXPath,attributes:f.entryXPath,
namespaces:f.namespaces,paramSchema:{},constructor:function(a,b,c){this._endpoint=g.findEndpoint(a.endpoint||"connections");this._options=c;this._callbacks=[];this._errbacks=[];if(a)this.url=a.url,this.attributes=a.attributes||this.attributes,this.atom=a.feedXPath||this.atom,this.namespaces=a.namespaces||this.namespaces,this.sendQuery=a.hasOwnProperty("sendQuery")?a.sendQuery:this.sendQuery,this.unescapeHTML=a.unescapeHTML||this.unescapeHTML,this.paramSchema=a.paramSchema||this.paramSchema;if(this.paramSchema.pageNumber)a=
Math.floor(c.start/c.count)+1,b.pageNumber=b.pageNumber||a;if(this.paramSchema.startIndex)b.startIndex=b.startIndex||c.start;if(this.paramSchema.pageSize)b.pageSize=b.pageSize||c.count;if(c.sort&&c.sort[0]){if(c.sort[0].attribute)b.sortBy=c.sort[0].attribute;if(!0===c.sort[0].descending)b.sortOrder="desc";else if(!1===c.sort[0].descending)b.sortOrder="asc"}this._doFetch({query:b})},then:function(a,b){this._isFulfilled?a(this.items):(a&&this._callbacks.push(a),b&&this._errbacks.push(b))},cancel:function(){this._isCancelled=
!0},isResolved:function(){return this._isRejected||this._isFulfilled},isRejected:function(){return this._isRejected},isFulfilled:function(){return this._isFulfilled},isCanceled:function(){return this._isCancelled},_doFetch:function(c){var d=this,e=this._getServiceUrl(c.query);e?this._endpoint.xhrGet({serviceUrl:e,handleAs:"text",load:function(c){try{d.response=c,d._xmlData=b.parse(c),d.totalResults=parseInt(a.selectText(d._xmlData,d.atom.totalResults,d.namespaces)),d.startIndex=parseInt(a.selectText(d._xmlData,
d.atom.startIndex,d.namespaces)),d.itemsPerPage=parseInt(a.selectText(d._xmlData,d.atom.itemsPerPage,d.namespaces)),d.items=d._createItems(d._xmlData),d._options.onComplete&&d._options.onComplete.call(d._options.scope||d,d.items,d._options),d._fulfilled(d.totalResults)}catch(e){d._rejected(e)}},error:function(a){d._rejected(a)}}):c.onError&&c.onError.call(Error("sbt.store.AtomStore: No service URL specified."))},_getServiceUrl:function(a){if(!this.sendQuery||!a)return this.url;if(c.isString(a))return this.url+
(~this.url.indexOf("?")?"&":"?")+a;var b=[],d=this.paramSchema,e;for(e in a)if(e in d){var f=d[e].format(a[e]);f&&b.push(f)}else b.push(encodeURIComponent(e)+"="+encodeURIComponent(a[e]));return 0==b.length?this.url:this.url+(~this.url.indexOf("?")?"&":"?")+b.join("&")},_createQuery:function(a){if(!a)return null;var b=[],c;for(c in a){var d=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")},_createItems:function(b){for(var b=a.selectNodes(b,this.atom.entries,this.namespaces),
c=[],d=0;d<b.length;d++)c.push(this._createItem(b[d]));return c},_createItem:function(b){for(var d=this._getAttributes(),e=/^count\(.*\)$/,f={element:b,getValue:function(a){var b=[];if("object"==typeof this[a])for(var c=0;c<this[a].length;c++)b[c]=l.encode(this[a][c]);else b=l.encode(this[a]);return b}},g=0;g<d.length;g++){var h=d[g],i=this.attributes[h];if(c.isFunction(i))f[h]=i(this,f);else if(i.match(e))f[h]=a.selectNumber(b,i,this.namespaces)+"";else if((i=a.selectNodes(b,i,this.namespaces))&&
1==i.length)f[h]=i[0].text||i[0].textContent;else if(i){f[h]=[];for(var m=0;m<i.length;m++)f[h].push(i[m].text||i[m].textContent)}else f[h]=null}return f},_getAttributes:function(){var a=[],b;for(b in this.attributes)this.attributes.hasOwnProperty(b)&&a.push(b);return a},_fulfilled:function(a){if(!this._isCancelled)for(this._isFulfilled=!0;0<this._callbacks.length;)this._callbacks.shift()(a)},_rejected:function(a){if(!this._isCancelled)for(this._isRejected=!0;0<this._errbacks.length;)this._errbacks.shift()(a)}});
return h(null,{idProperty:"id",_args:null,constructor:function(a){this._args=a},getEndpoint:function(){return g.findEndpoint(this._args.endpoint||"connections")},get:function(){throw Error("sbt.store.AtomStore: Not implemented yet!");},getIdentity:function(a){return a.id},setUrl:function(a){this._args.url=a},setAttributes:function(a){this._args.attributes=a},query:function(a,b){var c=new m(this._args,a,b);c.total=c;return n(c)}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array",
"../../_base/lang","../../_base/Deferred"],function(h,g,c){var f=function(b){function a(a){b[a]||(b[a]=function(){var d=arguments;return c.when(b,function(b){Array.prototype.unshift.call(d,b);return f(h[a].apply(h,d))})})}if(!b)return b;b.then&&(b=g.delegate(b));a("forEach");a("filter");a("map");if(!b.total)b.total=c.when(b,function(a){return a.length});return b};g.setObject("dojo.store.util.QueryResults",f);return f})},"sbt/store/parameter":function(){define(["../stringUtil","../config"],function(){var h=
{defaultFormat:function(c,f){return c.key+"="+f},sortField:function(c){return function(f,b){return f.key+"="+(c[b]||"")}},ascSortOrderBoolean:function(c,f){return c.key+"="+("asc"===f?!0:!1)},sortOrder:function(c,f){return c.key+"="+("asc"===f?"desc":"asc")},oneBasedInteger:function(c,f){var b=Math.floor(f);1>b&&(b=1);return c.key+"="+b},zeroBaseInteger:function(c,f){var b=Math.floor(f);0>b&&(b=0);return c.key+"="+b}},g=function(c){var f=this;this.key=c.key;var b=c.format||h.defaultFormat;this.format=
function(a){return b(f,a)}};return{defaultFormat:function(c){return new g({key:c,format:h.defaultFormat})},sortField:function(c,f){return new g({key:c,format:h.sortField(f)})},sortOrder:function(c){return new g({key:c,format:h.sortOrder})},booleanSortOrder:function(c){return new g({key:c,format:h.ascSortOrderBoolean})},zeroBasedInteger:function(c){return new g({key:c,format:h.zeroBasedInteger})},oneBasedInteger:function(c){return new g({key:c,format:h.oneBasedInteger})}}})}}});
define("sbt/compat,sbt/declare,sbt/dom,sbt/emailService,sbt/i18n,sbt/itemFactory,sbt/json,sbt/lang,sbt/log,sbt/pathUtil,sbt/Proxy,sbt/ready,sbt/stringUtil,sbt/text,sbt/util,sbt/validate,sbt/xml,sbt/xpath,sbt/xsl,sbt/authenticator/Basic,sbt/authenticator/GadgetOAuth,sbt/authenticator/OAuth,sbt/authenticator/SSO,sbt/authenticator/templates/login,sbt/authenticator/templates/messageSSO,sbt/base/AtomEntity,sbt/base/BaseConstants,sbt/base/BaseEntity,sbt/base/BaseService,sbt/base/DataHandler,sbt/base/JsonDataHandler,sbt/base/MyAtomEntity,sbt/base/VCardDataHandler,sbt/base/core,sbt/connections/ActivityConstants,sbt/connections/ActivityService,sbt/connections/ActivityStreamConstants,sbt/connections/ActivityStreamService,sbt/connections/CommunityConstants,sbt/connections/CommunityService,sbt/connections/ConnectionsConstants,sbt/connections/FileConstants,sbt/connections/FileService,sbt/connections/ForumConstants,sbt/connections/ForumService,sbt/connections/ProfileAdminService,sbt/connections/ProfileConstants,sbt/connections/ProfileService,sbt/connections/SearchConstants,sbt/connections/SearchService,sbt/data/AtomReadStore,sbt/smartcloud/ProfileConstants,sbt/smartcloud/ProfileService,sbt/smartcloud/Subscriber,sbt/store/AtomStore,sbt/store/parameter".split(","),function(){});