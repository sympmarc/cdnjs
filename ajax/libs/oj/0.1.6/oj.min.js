// oj.min.js v0.1.6 | Copyright 2013 Evan Moran | ojjs.org/license
(function(){function qt(){return qt.tag.apply(this,["oj"].concat([].slice.call(arguments)).concat([{__quiet__:1}]))}var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It=[].slice;h=this,qt.version="0.1.5",qt.isClient=!(typeof process!="undefined"&&process!==null?(xt=process.versions)!=null?xt.node:void 0:void 0);if(typeof $!="undefined")qt.$=$;else if(typeof require!="undefined")try{qt.$=require("jquery")}catch(Rt){}typeof module!="undefined"?s=module.exports=qt:h.oj=qt,qt.oj=qt,qt.load=function(e){return qt.$(function(){return qt.$.ojBody(require(e)),qt.onload()})},gt={queue:[],loaded:!1},qt.onload=function(e){if(qt.isUndefined(e)){gt.loaded=!0;while(e=gt.queue.shift())e()}else gt.loaded?e():gt.queue.push(e)},qt.emit=function(){var e;return e=qt.tag.apply(qt,["oj"].concat(It.call(arguments)))},qt.id=function(e,t){return"oj"+qt.guid(e,t)},Et=function(e,t){var n,r;return e===null||t===null||e>t?null:(n=t-e,r=Math.floor(Math.random()*(n+1)),r+e)},O="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),qt.guid=function(e,t){var n,r,i,s,o,u,a,f,l;e==null&&(e=8),t==null&&(t=O),n=t.length,i=Math.floor(Math.log(Math.pow(2,31)-1)/Math.log(n)),f=0,a=Math.pow(n,i)-1,o="";for(s=l=0;0<=e?l<e:l>e;s=0<=e?++l:--l)s%i===0&&(u=Et(f,a)),r=t[u%n],o+=r,u=Math.floor(u/n);return o},e=Array.prototype,t=Function.prototype,n=Object.prototype,p=e.slice,y=e.unshift,r=e.concat,qt.isOJ=function(e){return e!=null?!!e.isOJ:!!void 0},qt.isOJType=function(e){return qt.isOJ(e)&&e.type===e},qt.isOJInstance=function(e){return qt.isOJ(e)&&!qt.isOJType(e)},qt.isEvent=function(e){return!!(e&&e.on&&e.off&&e.trigger)},qt.isDOM=function(e){return!!e&&e.nodeType!=null},qt.isDOMElement=function(e){return!!e&&e.nodeType===1},qt.isDOMAttribute=function(e){return!!e&&e.nodeType===2},qt.isDOMText=function(e){return!!e&&e.nodeType===3},qt.isjQuery=function(e){return!!e&&!!e.jquery},qt.isUndefined=function(e){return e===void 0},qt.isBoolean=function(e){return e===!0||e===!1||n.toString.call(e)==="[object Boolean]"},qt.isNumber=function(e){return!!(e===0||e&&e.toExponential&&e.toFixed)},qt.isString=function(e){return!!(e===""||e&&e.charCodeAt&&e.substr)},qt.isDate=function(e){return!!(e&&e.getTimezoneOffset&&e.setUTCFullYear)},qt.isFunction=function(e){return typeof e=="function"},qt.isArray=Array.isArray||function(e){return n.toString.call(e)==="[object Array]"},qt.isRegEx=function(e){return n.toString.call(e)==="[object RegExp]"},qt.isArguments=function(e){return n.toString.call(e)==="[object Arguments]"},qt.isDefined=function(e){return typeof e!="undefined"},qt.typeOf=function(e){var t;return e===null?"null":(t=typeof e,t==="object"&&(qt.isArray(e)?t="array":qt.isOJ(e)?t=e.typeName:qt.isRegEx(e)?t="regexp":qt.isDate(e)?t="date":qt.isDOMElement(e)?t="dom-element":qt.isDOMText(e)?t="dom-text":qt.isDOMAttribute(e)?t="dom-attribute":qt.isjQuery(e)?t="jquery":t="object"),t)},qt.parse=function(e){var t;return e==="undefined"?void 0:e==="null"?null:e==="true"?!0:e==="false"?!1:isNaN(t=parseFloat(e))?e:t},qt.isObject=function(e){return qt.typeOf(e)==="object"},ut=function(e){return!!e.match(/[A-Z]/)},rt=function(e){return e},tt=function(e,t){return n.hasOwnProperty.call(e,t)},ht=Object.keys||function(e){var t,n;if(e!==Object(e))throw"Invalid object";n=[];for(t in e)tt(e,t)&&(n[n.length]=t);return n},Ft=function(e){var t;if(e!==Object(e))throw"Invalid object";return t=[],W(e,function(e){return t.push(e)}),t},V=function(e,t){return St(e,function(e,n){return qt.isArray(n)?e.concat(t?n:V(n)):(e[e.length]=n,e)},[])},St=function(n,r,i,s){var o,u,a;n==null&&(n=[]),u=arguments.length>2;if(e.reduce&&n.reduce===e.reduce)return s&&(r=a(r,s)),u?n.reduce(r,i):n.reduce(r);W(n,function(e,t,n){return u?i=r.call(s,i,e,t,n):(i=e,u=!0)});if(!u)throw new TypeError("Reduce of empty array with no initial value");return i,o=function(){},a=function(e,n){var r,i;return e.bind===t.bind&&t.bind?t.bind.apply(e,p.call(arguments,1)):(r=p.call(arguments,2),i=function(){var t,s;return this instanceof i?(o.prototype=e.prototype,s=new o,t=e.apply(s,r.concat(p.call(arguments))),Object(t)===t?t:s):e.apply(n,r.concat(p.call(arguments)))})}},Ot=function(e,t,n){var r,i,s;n==null&&(n=rt),i=0,r=e.length;while(i<r)s=i+r>>1,n(e[s])<n(t)?i=s+1:r=s;return i},it=function(t,n,r){var i;return t==null?-1:r?(i=Ot(t,n),t[i]===n?i:-1):e.indexOf&&t.indexOf===e.indexOf?t.indexOf(n):-1},Pt=function(e){return e?qt.isArray(e)?p.call(e):qt.isArguments(e)?p.call(e):e.toArray&&qt.isFunction(e.toArray)?e.toArray():Ft(e):[]},at=function(e){var t;if(qt.isArray(e))return e.length===0;for(t in e)if(tt(e,t))return!1;return!0},M=function(e){return!qt.isArray(e)&&!qt.isObject(e)?e:qt.isArray(e)?e.slice():X({},e)},B=function(t,n){return t==null?!1:e.indexOf&&t.indexOf===e.indexOf?t.indexOf(n)!==-1:At(t,function(e){return e===n})},At=function(t,n,r){var i;return n==null&&(n=rt),i=!1,t==null?i:e.some&&t.some===e.some?t.some(n,r):(W(t,function(e,t,s){if(i||(i=n.call(r,e,t,s)))return breaker}),!!i)},kt=function(){var e,t,n,r,i,s,o,u,a;i=arguments[0],n=3<=arguments.length?It.call(arguments,1,o=arguments.length-1):(o=1,[]),s=arguments[o++],r=i;for(e=u=0,a=n.length;u<a;e=++u){t=n[e],typeof r[t]!="object"&&typeof r[t]!="object"&&(r[t]={});if(e===n.length-1){r[t]=s;break}r=r[t]}return i},A={},W=function(t,n,r){var i,s,o,u,a;if(t===null)return;if(e.forEach&&t.forEach===e.forEach)return t.forEach(n,r);if(qt.isArray(t))for(i=u=0,a=t.length;u<a;i=++u){o=t[i];if(n.call(r,o,i,t)===A)return A}else for(s in t){o=t[s];if(tt(t,s)&&n.call(r,o,s,t)===A)return A}},vt=function(t,n,r){var i,s,o,u,a,f,l,c;r==null&&(r={}),i=r.context,l=r.recurse,s=r.evaluate,o=n,l&&function(e){return o=function(t,r,i){var s;return s=X(M(e),{key:r,object:t}),vt(t,n,s)}}(r);if(qt.isFunction(t)){if(!s)return t;while(s&&qt.isFunction(t))t=t()}a=t;if(qt.isArray(t)){a=[];if(!t)return a;if(e.map&&t.map===e.map)return t.map(o,i);W(t,function(e,t,n){return a[a.length]=o.call(i,e,t,n)}),t.length===+t.length&&(a.length=t.length)}else{if(!qt.isObject(t))return n.call(i,t,r.key,r.object);a={};if(!t)return a;for(u in t)c=t[u],(f=o.call(i,c,u,t))!==void 0&&(a[u]=f)}return a},X=function(e){return W(p.call(arguments,1),function(t){var n,r,i;i=[];for(n in t)r=t[n],i.push(e[n]=r);return i}),e},U=function(e){return W(p.call(arguments,1),function(t){var n,r;r=[];for(n in t)e[n]==null?r.push(e[n]=t[n]):r.push(void 0);return r}),e},mt=function(t){var n,i,s;n={},s=r.apply(e,p.call(arguments,1));for(i in t)B(s,i)||(n[i]=t[i]);return n},Bt=function(e,t){var n,r,i,s,o;t==null&&(t=!1),t||e.sort(),i=[];for(r=s=0,o=e.length;s<o;r=++s){n=e[r];if(r>0&&e[r-1]===e[r])continue;i.push(n)}return i},jt=function(e,t){return Bt(e.concat(t))},L=function(e,t,n,r){var i;i=e<0?e+t:e;if(0<=i&&i<t)return i;throw new Error("oj."+r+n+" is out of bounds ("+e+" in [0,"+(t-1)+"])")},Mt=function(e,t,n){var r;return r=e.split(t,n),vt(r,function(e){return e.trim()})},q=function(e){return R(e).replace(/[ _]/g,"-")},R=function(e){return e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()},wt=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/,bt=function(e){var t;return t=wt.exec(e),[t[1]||"",t[2]||"",t[3]||"",t[4]||""]},yt=function(e,t){var n,r,i;i=0,n=e.length-1;while(n>=0)r=e[n],r==="."?e.splice(n,1):r===".."?(e.splice(n,1),i++):i&&(e.splice(n,1),i--),n--;if(t)while(i--)e.unshift("..");return e},qt._pathResolve=function(){var e,t,n,r;r="",n=!1,e=arguments.length-1;while(e>=-1&&!n){t=e>=0?arguments[e]:process.cwd();if(typeof t!="string"||!t)continue;r=t+"/"+r,n=t.charAt(0)==="/",e--}return r=yt(r.split("/").filter(function(e){return!!e}),!n).join("/"),(n?"/":"")+r||"."},qt._pathNormalize=function(e){var t,n;return t=e.charAt(0)==="/",n=e.substr(-1)==="/",e=yt(e.split("/").filter(function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},qt._pathJoin=function(){var e;return e=p.call(arguments,0),qt._pathNormalize(e.filter(function(e,t){return e&&typeof e=="string"}).join("/"))},qt._pathDirname=function(e){var t,n;return n=bt(e),h=n[0],t=n[1],!h&&!t?".":(t&&(t=t.substr(0,t.length-1)),h+t)},qt.dependency=function(e,t){t==null&&(t=function(){return qt.isClient?qt.isDefined(window[e]):qt.isDefined(global[e])});if(!t())throw new Error("oj: "+e+" dependency is missing")},qt.addMethods=function(e,t){var n,r;for(r in t)n=t[r],qt.addMethod(e,r,n)},qt.addMethod=function(e,t,n){if(!qt.isString(t))throw"oj.addMethod: string expected for second argument";if(!qt.isFunction(n))throw"oj.addMethod: function expected for thrid argument";Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!1,configurable:!0})},qt.removeMethod=function(e,t){if(!qt.isString(t))throw"oj.removeMethod: string expected for second argument"},qt.addProperties=function(e,t){var n,r;for(r in t)n=t[r],(n!=null?n.get:void 0)==null&&(n!=null?n.value:void 0)==null&&(n={value:n,writable:!0}),qt.addProperty(e,r,n)},qt.addProperty=function(e,t,n){if(!qt.isString(t))throw new Error("oj.addProperty: string expected for second argument");if(!qt.isObject(n))throw new Error("oj.addProperty: object expected for third argument");U(n,{enumerable:!0,configurable:!0}),Object.getOwnPropertyDescriptor(e,t)!=null&&qt.removeProperty(e,t),Object.defineProperty(e,t,n)},qt.removeProperty=function(e,t){if(!qt.isString(t))throw new Error("oj.addProperty: string expected for second argument");return delete e[t]},qt.isProperty=function(e,t){if(!qt.isString(t))throw new Error("oj.isProperty: string expected for second argument");return Object.getOwnPropertyDescriptor(e,t).get!=null},qt.copyProperty=function(e,t,n){var r;return r=Object.getOwnPropertyDescriptor(t,n),r.value!=null&&(r.value=M(r.value)),Object.defineProperty(e,n,r)},w=[],qt._argsTop=function(){return w.length?w[w.length-1]:null},qt._argsPush=function(e){e==null&&(e=[]),w.push(e)},qt._argsPop=function(){return w.length?w.pop():null},qt._argsAppend=function(e){var t;t=qt._argsTop(),t!=null&&t.push(e)},qt.tag=function(){var e,t,n,r,i,s,o,u,a,f,l,c;s=arguments[0],a=2<=arguments.length?It.call(arguments,1):[];if(!qt.isString(s))throw"oj.tag error: argument 1 is not a string (expected tag name)";o=[s],c=qt.unionArguments(a),t=c.args,n=c.options,(r=n.__quiet__)&&delete n.__quiet__,at(n)||o.push(n),qt._argsPush(o);for(f=0,l=t.length;f<l;f++){e=t[f];if(qt.isObject(e))continue;qt.isFunction(e)?(i=qt._argsTop().length,u=e(),i===qt._argsTop().length&&u!=null&&qt._argsAppend(u)):qt._argsAppend(e)}return qt._argsPop(),r||qt._argsAppend(o),o},qt.tag.elements={closed:"a abbr acronym address applet article aside audio b bdo big blockquote body button canvas caption center cite code colgroup command datalist dd del details dfn dir div dl dt em embed fieldset figcaption figure font footer form frameset h1 h2 h3 h4 h5 h6 head header hgroup html i iframe ins keygen kbd label legend li map mark menu meter nav noframes noscript object ol optgroup option output p pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr tt u ul var video wbr xmp".split(" "),open:"area base br col command css !DOCTYPE embed hr img input keygen link meta param source track wbr".split(" ")},qt.tag.elements.all=qt.tag.elements.closed.concat(qt.tag.elements.open).sort(),qt.tag.isClosed=function(e){return it(qt.tag.elements.open,e,!0)===-1},Lt=function(e,t){e!=null&&(e.tagName=t)},et=function(e){return e.tagName},Z=function(e){return"_"+e},Ct=function(e,t){e!=null&&(e.oj=t)},Y=function(e){return(e!=null?e.oj:void 0)!=null?e.oj:null},Tt=qt.tag.elements.all,Q=function(e){var t;return qt[e]=function(){return qt.tag.apply(qt,[e].concat(It.call(arguments)))},t=Z(e),qt[t]=function(){return qt.tag.apply(qt,[e,{__quiet__:1}].concat(It.call(arguments)))},Lt(qt[e],e),Lt(qt[t],e)};for(nt=0,pt=Tt.length;nt<pt;nt++)m=Tt[nt],Q(m);i='HTML PUBLIC "-//W3C//DTD HTML 4.01',b='"http://www.w3.org/TR/html4/',v="html",d=i+'//EN" '+b+'strict.dtd"',z={5:v,"HTML 5":v,4:d,"HTML 4.01 Strict":d,"HTML 4.01 Frameset":i+' Frameset//EN" '+b+'frameset.dtd"',"HTML 4.01 Transitional":i+' Transitional//EN" '+b+'loose.dtd"'},qt.doctype=function(e){var t,n;return e==null&&(e="5"),t=(n=z[e])!=null?n:e,qt["!DOCTYPE"](t)},qt.useGlobally=qt.extendInto=function(e){var t,n,r,i;e==null&&(e=h),n={};for(t in qt)i=qt[t],t[0]!=="_"&&t!=="extendInto"&&t!=="useGlobally"&&(n[t]=i,r=Z(t),qt[r]&&(n[r]=qt[r]));return X(e,n)},qt.compile=function(e,t){var n,r,i,s,o,u,a;return t==null&&(t=e,e={}),e=U({},e,{html:!0,dom:!1,css:!1,cssMap:!1,minify:!1,ignore:{}}),X(e.ignore,{oj:1,css:1}),n=M(e),n.html=e.html?[]:null,n.dom=e.dom&&typeof document!="undefined"&&document!==null?document.createElement("OJ"):null,n.css=e.css||e.cssMap?{}:null,n.indent="",e.dom&&(n.types=[]),n.tags={},_(t,n),n.css!=null&&(a=J(n.css)),e.cssMap&&(i=a),e.css&&(r=I(a,{minify:e.minify,tags:0})),e.html&&(o=n.html.join("")),e.dom&&(s=n.dom.childNodes,s.length!=null&&(s=Pt(s),s=s.filter(function(e){return qt.isDOM(e)})),s.length===0?s=null:s.length===1&&(s=s[0])),u={html:o,dom:s,css:r,cssMap:i,types:n.types,tags:n.tags},u},Dt=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;t==null&&(t={}),U(t,{inline:!0,indent:""}),t.semi=!t.inline,a="",o=ht(e).sort(),n=(h=t.indent)!=null?h:"",u=t.inline?"":"\n";for(r=l=0,c=o.length;l<c;r=++l)s=o[r],f=t.semi||r!==o.length-1?";":"",i=q(s),a+=""+n+i+":"+e[s]+f+u;return a},C=function(e){var t,n,r,i,s,o,u;if(!qt.isObject(e))return e;n="",r="",u=ht(e).sort();for(s=0,o=u.length;s<o;s++)t=u[s],i=e[t],i===!0?n+=""+r+t:n+=""+r+t+'="'+i+'"',r=" ";return n},J=function(e){var t,n,r;n={};for(r in e)t=e[r],K(t,n,[""],[""],r);return n},K=function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;l={widescreen:"only screen and (min-width: 1200px)",monitor:"",tablet:"only screen and (min-width: 768px) and (max-width: 959px)",phone:"only screen and (max-width: 767px)"};for(m in e){h=e[m];if(typeof h=="object"){if(m.indexOf("@media")===0){b=n,m=m.slice("@media".length).trim(),a=Mt(m,","),a=vt(a,function(e){return l[e]!=null?l[e]:e}),c=[];for(w=0,x=r.length;w<x;w++){u=r[w];for(E=0,T=a.length;E<T;E++)o=a[E],s=o,o.indexOf("&")===-1&&u!==""&&(s="& and "+o),c.push(s.replace(/&/g,u))}}else{c=r,g=Mt(m,","),b=[];for(S=0,N=n.length;S<N;S++){v=n[S];for(k=0,C=g.length;k<C;k++)d=g[k],p=d,d.indexOf("&")===-1&&v!==""&&(p="& "+d),b.push(p.replace(/&/g,v))}}K(h,t,b,c,i)}else y=n.sort().join(","),f=r.sort().join(","),f!==""&&(f="@media "+f),kt(t,i,f,y,m,h)}},_t=function(e){return""+e+"-style"},qt._styleTagFromMediaObject=function(e,t,n){var r,i;return i=(n!=null?n.minify:void 0)?"":"\n",r=F(t,n),'<style class="'+_t(e)+'">'+i+r+"</style>"},qt._minifyJS=function(e,t){return e},qt._minifyCSS=function(e,t){return e},F=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;t==null&&(t={}),a=(m=t.minify)!=null?m:0,v=(g=t.tags)!=null?g:0,f=a?"":"\n",p=a?"":" ",o=a,n="";for(u in e){h=e[u],u&&(u=u.replace(/,/g,","+p),n+=""+u+p+"{"+f);for(c in h)d=h[c],i=!a&&u?"	":"",c=c.replace(/,/g,","+f),n+=""+i+c+p+"{"+f,s=a?i:i+"	",l=Dt(d,{inline:o,indent:s}),n+=l+i+"}"+f;u!==""&&(n+="}"+f)}try{n=qt._minifyCSS(n,t)}catch(y){throw r=y,new Error("css minification error: "+r.message+"\nCould not minify:\n"+n)}return n},I=function(e,t){var n,r,i,s,o,u,a,f,l,c;t==null&&(t={}),s=(l=t.minify)!=null?l:0,f=(c=t.tags)!=null?c:0,o=s?"":"\n",a=s?"":" ",r=s,n="";for(u in e)i=e[u],f&&(n+='<style class="'+u+'-style">'+o),n+=F(i,t),f&&(n+=""+o+"</style>"+o);return n},D=function(e,t,n){var r;return r=n.indent,n.indent+="	",e(t,n),n.indent=r},l=function(){},_=function(e,t){var n,r,i,s,o,u,a,f,l,c,p;switch(qt.typeOf(e)){case"array":P(e,t);break;case"string":(s=t.html)!=null&&s.push(e),e.length>0&&e[0]==="<"?(h=document.createElement("div"),h.innerHTML=e,n=h.childNodes,(o=t.dom)!=null&&o.appendChild(h)):(u=t.dom)!=null&&u.appendChild(document.createTextNode(e));break;case"boolean":case"number":(a=t.html)!=null&&a.push(""+e),(f=t.dom)!=null&&f.appendChild(document.createTextNode(""+e));break;case"function":_(qt(e),t);break;case"date":(l=t.html)!=null&&l.push(""+e.toLocaleString()),(c=t.dom)!=null&&c.appendChild(document.createTextNode(""+e.toLocaleString()));break;case"null":break;case"undefined":break;case"object":break;default:qt.isOJ(e)&&((p=t.types)!=null&&p.push(e),(r=t.html)!=null&&r.push(e.toHTML(t)),(i=t.dom)!=null&&i.appendChild(e.toDOM(t)),t.css!=null&&X(t.css,e.toCSSMap(t)))}},P=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,N,L,A,O,M;if(e.length===0)return;d=e[0],v=typeof d,d=v!=="function"&&v!=="object"||et(d)==null?d:et(d);if(!(qt.isString(d)&&d.length>0))throw new Error("oj.compile: tag name is missing");t.tags[d]=!0;if(ut(d[0]))return D(_,new qt[d](e.slice(1)),t);o=null,qt.isObject(e[1])&&(o=e[1]),a=o?e.slice(2):e.slice(1);if(t.css&&d==="css")for(c in o)p=o[c],(S=(m=t.css)["oj"])==null&&(m.oj={}),(x=(g=t.css["oj"])[c])==null&&(g[c]={}),X(t.css.oj[c],p);if(d==="!DOCTYPE"){if(!qt.isString(e[1]))throw new Error("oj.compile: doctype expects string as first argument");t.ignore[d]||t.html&&t.html.push("<"+d+" "+e[1]+">");return}if(!t.ignore[d]){l=k(o);if(t.dom&&typeof document!="undefined"&&document!==null){f=document.createElement(d),qt.isDOMElement(t.dom)&&t.dom.appendChild(f),t.dom=f;if(qt.isObject(o)){N=ht(o).sort();for(y=0,w=N.length;y<w;y++)i=N[y],s=o[i],s===!0?(n=document.createAttribute(i),f.setAttributeNode(n)):f.setAttribute(i,s)}T(l,f)}t.html&&(r=(L=C(o))!=null?L:"",h=r===""?"":" ",t.html.push("<"+d+h+r+">"))}if(t.ignore[d]!=="deep")for(b=0,E=a.length;b<E;b++)u=a[b],!t.minify&&a.length>1&&(A=t.html)!=null&&A.push("\n	"+t.indent),D(_,u,t);!t.minify&&a.length>1&&(O=t.html)!=null&&O.push("\n"+t.indent),t.ignore[d]||(t.html&&(a.length>0||qt.tag.isClosed(d))&&(M=t.html)!=null&&M.push("</"+d+">"),t.dom&&(t.dom=t.dom.parentNode))},x=function(e){qt.isObject(e!=null?e.style:void 0)&&(e.style=Dt(e.style,{inline:!0}))},E=function(e){qt.isArray(e!=null?e.c:void 0)&&(e.c=e.c.join(" ")),qt.isArray(e!=null?e["class"]:void 0)&&(e["class"]=e["class"].join(" ")),(e!=null?e.c:void 0)!=null&&((e!=null?e["class"]:void 0)!=null?e["class"]+=" "+e.c:e["class"]=e.c,delete e.c)},S=function(e){var t,n,r;if(qt.isObject(e)){r=[];for(t in e)n=e[t],n===null||n===void 0||n===!1?r.push(delete e[t]):r.push(void 0);return r}},u={bind:1,on:1,off:1,live:1,blur:1,change:1,click:1,dblclick:1,focus:1,focusin:1,focusout:1,hover:1,keydown:1,keypress:1,keyup:1,mousedown:1,mouseenter:1,mouseleave:1,mousemove:1,mouseout:1,mouseup:1,ready:1,resize:1,scroll:1,select:1},N=function(e){var t,n,r;n={};if(qt.isObject(e))for(t in e)r=e[t],u[t]!=null&&(n[t]=r,delete e[t]);return n},k=function(e){var t;return E(e),x(e),S(e),t=N(e),t},T=function(e,t){var n,r,i;i=[];for(n in e)r=e[n],qt.$!=null?qt.isArray(r)?i.push(qt.$(t)[n].apply(this,r)):i.push(qt.$(t)[n](r)):i.push(console.error("oj: jquery is missing when binding a '"+n+"' event"));return i},qt.toHTML=function(e,t){return qt.isObject(e)||(t=e,e={}),X(e,{dom:0,js:0,html:1,css:0}),qt.compile(e,t).html},qt.toCSS=function(e,t){return qt.isObject(e)||(t=e,e={}),X(e,{dom:0,js:0,html:0,css:1}),qt.compile(e,t).css},st=function(e,t){var n,r;for(r in t)qt.copyProperty(e,t,r);n=function(){},n.prototype=t.prototype,e.prototype=new n,e.base=t.prototype},qt._construct=H=function(e){return new(t.bind.apply(e,arguments))},qt.argumentShift=function(e,t){var n;return qt.isObject(e)&&t!=null&&e[t]!=null&&(n=e[t],delete e[t]),n},qt.createType=function(e,t){var n,r,i,s,o,u,a,f,l;t==null&&(t={});if(!qt.isString(e))throw"oj.createType: string expected for first argument";if(!qt.isObject(t))throw"oj.createType: object expected for second argument";return(f=t.methods)==null&&(t.methods={}),(l=t.properties)==null&&(t.properties={}),r="__DELAYED__",n=(new Function("return function "+e+"(){\n  var _this = this;\n  if ( !(this instanceof "+e+") ) {\n    _this = new "+e+"('"+r+"');\n    _this.__autonew__ = true;\n  }\n\n  if (arguments && arguments[0] != '"+r+"')\n    "+e+".prototype.constructor.apply(_this, arguments);\n\n  return _this;\n}"))(),t.base!=null&&(t.constructor==null||!t.hasOwnProperty("constructor"))&&(t.constructor=function(){var e;return(e=n.base)!=null?e.constructor.apply(this,arguments):void 0}),t.base!=null&&st(n,t.base),qt.addMethod(n.prototype,"constructor",t.constructor),a={type:{value:n,writable:!1,enumerable:!1},typeName:{value:e,writable:!1,enumerable:!1},isOJ:{value:!0,writable:!1,enumerable:!1}},qt.addProperties(n,a),qt.addProperties(n.prototype,a),o=ht(t.properties).sort(),n.prototype.properties!=null&&(o=jt(n.prototype.properties,o)),u={value:o,writable:!1,enumerable:!1},qt.addProperty(n.prototype,"properties",u),i=ht(t.methods).sort(),n.prototype.methods!=null&&(i=jt(n.prototype.methods,i)),s={value:i,writable:!1,enumerable:!1},qt.addProperty(n.prototype,"methods",s),X(t.methods,{get:function(e){var t,n,r,i,s;if(qt.isString(e))return this.has(e)?this[e]:void 0;t={},s=this.properties;for(r=0,i=s.length;r<i;r++)n=s[r],t[n]=this[n];return t},set:function(e,t){var n,r,i;r=e,qt.isObject(e)||(r={},r[e]=t);for(n in r)i=r[n],this.has(n)&&(this[n]=i)},has:function(e){return At(this.properties,function(t){return t===e})},can:function(e){return At(this.methods,function(t){return t===e})},toJSON:function(){var e,t,n,r,i;e={},i=this.properties;for(n=0,r=i.length;n<r;n++)t=i[n],e[t]=this[t];return e}}),qt.addMethods(n.prototype,t.methods),qt.addProperties(n.prototype,t.properties),n},qt.unionArguments=function(e){var t,n,r,i,s;n={},t=[];for(i=0,s=e.length;i<s;i++)r=e[i],qt.isObject(r)?n=X(n,r):t.push(r);return{options:n,args:t}},j=function(e){var t;return t=Z(e),qt[t]=function(){return H.apply(null,[qt[e]].concat(It.call(arguments),[{__quiet__:1}]))}},qt["enum"]=function(e,t){throw new Error("oj.enum: NYI")},qt.View=qt.createType("View",{constructor:function(){var e,t,n,r;if(!qt.isDOM(this.el))throw new Error("oj."+this.typeName+": constructor failed to set this.el");return Ct(this.el,this),n=qt.unionArguments(arguments),t=n.options,e=n.args,this.__autonew__&&!t.__quiet__&&this.emit(),t.__quiet__!=null&&delete t.__quiet__,(r=t.id)==null&&(t.id=qt.id()),this.$el.addClass("oj-"+this.typeName),this.set(t),t=mt.apply(null,[t].concat(It.call(this.properties))),this.addAttributes(t),this._isConstructed=!0},properties:{el:{get:function(){return this._el},set:function(e){qt.isDOMElement(e)?(this._el=e,this._$el=null):this._el=qt.compile({css:0,cssMap:0,dom:1,html:0},e).dom}},$el:{get:function(){var e;return(e=this._$el)!=null?e:this._$el=qt.$(this.el)}},id:{get:function(){return this.$el.attr("id")},set:function(e){return this.$el.attr("id",e)}},attributes:{get:function(){var e;return e={},qt.$.each(this.el.attributes,function(t,n){return e[n.name]=n.value}),e}},classes:{get:function(){return this.$el.attr("class").split(/\s+/)},set:function(e){this.$el.attr("class",e.join(" "))}},themes:{get:function(){var e,t,n,r,i,s;n=[],t="theme-",s=this.classes;for(r=0,i=s.length;r<i;r++)e=s[r],e.indexOf(t)===0&&n.push(e.slice(t.length));return n},set:function(e){var t,n,r;qt.isArray(e)||(e=[e]),this.clearThemes();for(n=0,r=e.length;n<r;n++)t=e[n],this.addTheme(t)}},theme:{get:function(){return this.themes},set:function(e){this.themes=e}},isConstructed:{get:function(){var e;return(e=this._isConstructed)!=null?e:!1}},isInserted:{get:function(){var e;return(e=this._isInserted)!=null?e:!1}}},methods:{$:function(){var e;return(e=this.$el).find.apply(e,arguments)},addAttribute:function(e,t){var n;n={},n[e]=t,this.addAttributes(n)},addAttributes:function(e){var t,n,r,i,s;n=M(e),r=k(n);if(qt.isObject(n))for(i in n)s=n[i],i==="class"?this.addClass(s):s===!0?(t=document.createAttribute(i),this.el.setAttributeNode(t)):this.$el.attr(i,s);r!=null&&T(r,this.el)},removeAttribute:function(e){this.$el.removeAttr(e)},removeAttributes:function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],this.removeAttribute(t)},addClass:function(e){this.$el.addClass(e)},removeClass:function(e){this.$el.removeClass(e)},hasClass:function(e){return this.$el.hasClass(e)},addTheme:function(e){this.addClass("theme-"+e)},removeTheme:function(e){this.removeClass("theme-"+e)},hasTheme:function(e){return this.hasClass("theme-"+e)},clearThemes:function(){var e,t,n,r;r=this.themes;for(t=0,n=r.length;t<n;t++)e=r[t],this.removeTheme(e)},emit:function(){qt._argsAppend(this)},toHTML:function(e){return this.el.outerHTML+((e!=null?e.minify:void 0)?"":"\n")},toDOM:function(){return this.el},toCSS:function(e){return I(J(this.cssMap),X({},{minify:e.minify,tags:0}))},toCSSMap:function(){return this.type.cssMap},toString:function(){return this.toHTML()},inserted:function(){return this._isInserted=!0}}}),qt.View.css=function(e){var t,n,r,i,s,o,u;if(!qt.isString(e)&&!qt.isObject(e))throw new Error("oj."+this.typeName+".css: object or string expected for first argument");qt.isString(e)?((o=(n=this.cssMap)[i="oj-"+this.typeName])==null&&(n[i]=""),this.cssMap["oj-"+this.typeName]+=e):((u=(r=this.cssMap)[s="oj-"+this.typeName])==null&&(r[s]={}),t=kt({},".oj-"+this.typeName,e),X(this.cssMap["oj-"+this.typeName],t))},qt.View.theme=function(e,t){var n,r,i,s,o;if(!qt.isString(e))throw new Error("oj."+this.typeName+".theme: string expected for first argument (theme name)");if(!qt.isObject(t))throw new Error("oj."+this.typeName+".css: object expected for second argument");(o=(i=this.cssMap)[s="oj-"+this.typeName])==null&&(i[s]={}),r=q(e),n=kt({},".oj-"+this.typeName+".theme-"+r,t),X(this.cssMap["oj-"+this.typeName],n),this.themes.push(r),this.themes=Bt(this.themes)},qt.View.cssMap={},qt.View.themes=[],qt.CollectionView=qt.createType("CollectionView",{base:qt.View,constructor:function(e){return(e!=null?e.each:void 0)!=null&&(this.each=qt.argumentShift(e,"each")),(e!=null?e.models:void 0)!=null&&(this.models=qt.argumentShift(e,"models")),qt.CollectionView.base.constructor.apply(this,arguments),this.make()},properties:{each:{get:function(){return this._each},set:function(e){this._each=e,this.isConstructed&&this.make()}},collection:{get:function(){return this.models},set:function(e){return this.models=e}},models:{get:function(){return this._models},set:function(e){var t,n;qt.isFunction((t=this._models)!=null?t.off:void 0)&&this._models.off("add remove change reset destroy",null,this),this._models=e,qt.isFunction((n=this._models)!=null?n.on:void 0)&&(this._models.on("add",this.collectionModelAdded,this),this._models.on("remove",this.collectionModelRemoved,this),this._models.on("change",this.collectionModelChanged,this),this._models.on("destroy",this.collectionModelDestroyed,this),this._models.on("reset",this.collectionReset,this)),this.isConstructed&&this.make()}}},methods:{make:function(){throw new Error("oj."+this.typeName+": `make` method not implemented by custom view")},collectionModelAdded:function(e,t){return this.make()},collectionModelRemoved:function(e,t,n){return this.make()},collectionModelChanged:function(e,t,n){},collectionModelDestroyed:function(e,t){return this.make()},collectionReset:function(e,t){return this.make()}}}),qt.ModelView=qt.createType("ModelView",{base:qt.View,constructor:function(e){return(e!=null?e.value:void 0)!=null&&(this.value=qt.argumentShift(e,"value")),(e!=null?e.model:void 0)!=null&&(this.model=qt.argumentShift(e,"model")),qt.ModelView.base.constructor.apply(this,arguments)},properties:{model:{get:function(){return this._model},set:function(e){qt.isEvent(this._model)&&this._model.off("change",null,this),this._model=e,qt.isEvent(this._model)&&this._model.on("change",this.modelChanged,this),this.modelChanged()}}},methods:{modelChanged:function(){var e=this;return this.$el.oj(function(){return e.make(e.mode)})},make:function(e){throw"oj."+this.typeName+": `make` method not implemented on custom view"}}}),qt.ModelKeyView=qt.createType("ModelKeyView",{base:qt.ModelView,constructor:function(e){return(e!=null?e.key:void 0)!=null&&(this.key=qt.argumentShift(e,"key")),qt.ModelKeyView.base.constructor.apply(this,arguments)},properties:{key:null,value:{get:function(){throw""+this.typeName+" value getter not implemented"},set:function(e){throw""+this.typeName+" value setter not implemented"}}},methods:{modelChanged:function(){this.model!=null&&this.key!=null&&(this._viewUpdatedModel||(this.value=this.model.get(this.key)))},viewChanged:function(){var e=this;setTimeout(function(){e.model!=null&&e.key!=null&&(e._viewUpdatedModel=!0,e.model.set(e.key,e.value),e._viewUpdatedModel=!1)},10)}}}),qt.TextBox=qt.createType("TextBox",{base:qt.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=qt.unionArguments(arguments),t=n.options,e=n.args,this.el=qt(function(){return qt.input({type:"text"},{keydown:function(){r.live&&setTimeout(function(){return r.$el.change()},10)},keyup:function(){r.live&&setTimeout(function(){return r.$el.change()},10)},change:function(){r.viewChanged()}})}),e.length>0&&(this.value=e[0]),(t!=null?t.live:void 0)!=null&&(this.live=qt.argumentShift(t,"live")),qt.TextBox.base.constructor.apply(this,[t])},properties:{value:{get:function(){var e;e=this.el.value;if(e==null||e==="undefined")e="";return e},set:function(e){this.el.value=e}},live:!0}}),qt.CheckBox=qt.createType("CheckBox",{base:qt.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=qt.unionArguments(arguments),t=n.options,e=n.args,this.el=qt(function(){return qt.input({type:"checkbox"},{change:function(){r.viewChanged()}})}),e.length>0&&(this.value=e[0]),qt.CheckBox.base.constructor.call(this,t)},properties:{value:{get:function(){return this.el.checked},set:function(e){e=!!e,this.el.checked=e,e?this.$el.attr("checked","checked"):this.$el.removeAttr("checked")}}}}),qt.Text=qt.createType("Text",{base:qt.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=qt.unionArguments(arguments),t=n.options,e=n.args,this._tagName=qt.argumentShift(t,"tagName"),this.el=qt(function(){return qt[r.tagName]()}),e.length>0&&(this.value=e[0]),qt.Text.base.constructor.call(this,t)},properties:{value:{get:function(){return this.$el.ojValue()},set:function(e){this.$el.oj(e)}},tagName:{get:function(){var e;return(e=this._tagName)!=null?e:"div"}}}}),qt.TextArea=qt.createType("TextArea",{base:qt.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=qt.unionArguments(arguments),t=n.options,e=n.args,this.el=qt(function(){return qt.textarea({keydown:function(){r.live&&setTimeout(function(){return r.$el.change()},10)},keyup:function(){r.live&&setTimeout(function(){return r.$el.change()},10)},change:function(){r.viewChanged()}})}),this.value=qt.argumentShift(t,"value")||e.join("\n"),qt.TextArea.base.constructor.call(this,t)},properties:{value:{get:function(){return this.el.value},set:function(e){this.el.value=e}},live:!0}}),qt.ListBox=qt.createType("ListBox",{base:qt.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=qt.unionArguments(arguments),t=n.options,e=n.args,this.el=qt(function(){return qt.select({change:function(){r.viewChanged()}})}),this.options=qt.argumentShift(t,"options"),e.length>0&&(this.value=e[0]),qt.ListBox.base.constructor.apply(this,[t])},properties:{value:{get:function(){return this.$el.val()},set:function(e){this.$el.val(e)}},options:{get:function(){return this._options},set:function(e){if(!qt.isArray(e))throw new Error("oj."+this.typeName+".options array is missing");this._options=e,this.$el.oj(function(){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],qt.option(t)})}}}}),qt.Button=qt.createType("Button",{base:qt.View,constructor:function(){var e,t,n,r,i=this;return r=qt.unionArguments(arguments),t=r.options,e=r.args,n="",e.length>0&&(n=e[0]),t.title!=null&&(n=qt.argumentShift(t,"title")),this.el=qt(function(){return qt.button(n)}),qt.Button.base.constructor.apply(this,[t]),this.title=n},properties:{title:{get:function(){var e;return(e=this._title)!=null?e:""},set:function(e){this.$el.oj(this._title=e)}}},methods:{click:function(){var e;return arguments.length>0?(e=this.$el).click.apply(e,arguments):this.$el.click()}}}),qt.List=qt.createType("List",{base:qt.CollectionView,constructor:function(){var e,t,n,r,i,s=this;return r=qt.unionArguments(arguments),n=r.options,e=r.args,this._tagName=qt.argumentShift(n,"tagName"),this.itemTagName=qt.argumentShift(n,"itemTagName"),this.el=qt(function(){return qt[s.tagName]()}),n.el!=null&&(this.el=qt.argumentShift(n,"el")),(i=n.each)==null&&(n.each=function(e){return qt.isString(e)||qt.isNumber(e)||qt.isBoolean(e)?e:JSON.stringify(e)}),qt.List.base.constructor.apply(this,[n]),t=e.length>0?e:null,this.items=n.items!=null?qt.argumentShift(n,"items"):t},properties:{items:{get:function(){var e;return this._items!=null?this._items:e=this.$items.ojValues()},set:function(e){this._items=e,this.make()}},count:{get:function(){return this.$items.length}},tagName:{get:function(){var e;return(e=this._tagName)!=null?e:"div"}},itemTagName:{get:function(){var e;return(e=this._itemTagName)!=null?e:"div"},set:function(e){this._itemTagName=e,this.make()}},$items:{get:function(){var e;return(e=this._$items)!=null?e:this._$items=this.$("> "+this.itemTagName)}}},methods:{item:function(e,t){e=this._bound(e,this.count,".item: index");if(t==null)return this.$item(e).ojValue();this.$item(e).oj(t)},$item:function(e){return e=this._bound(e,this.count,".$item: index"),this.$items.eq(e)},make:function(){var e,t,n,r,i,s=this;if(!this.isConstructed)return;n=[];if(this.models!=null&&this.each!=null){t=qt.isEvent(this.models)?this.models.models:this.models;for(r=0,i=t.length;r<i;r++)e=t[r],n.push(this._itemFromModel(e))}else this.items!=null&&(n=this.items);this.$el.oj(function(){var e,t,r,i;i=[];for(t=0,r=n.length;t<r;t++)e=n[t],i.push(s._itemElFromItem(e));return i}),this.itemsChanged()},collectionModelAdded:function(e,t){var n,r;r=t.indexOf(e),n=this._itemFromModel(e),this.add(r,n)},collectionModelRemoved:function(e,t,n){this.remove(n.index)},collectionReset:function(){this.make()},_itemFromModel:function(e){var t=this;return qt(function(){return t.each(e)})},_itemElFromItem:function(e){return qt[this.itemTagName](e)},_bound:function(e,t,n){return L(e,t,n,this.typeName)},itemsChanged:function(){this._items=null,this._$items=null},add:function(e,t){var n;t==null&&(t=e,e=-1),e=this._bound(e,this.count+1,".add: index"),n=this.itemTagName,this.count===0?this.$el.oj(function(){return qt[n](t)}):e===this.count?this.$item(e-1).ojAfter(function(){return qt[n](t)}):this.$item(e).ojBefore(function(){return qt[n](t)}),this.itemsChanged()},remove:function(e){var t;return e==null&&(e=-1),e=this._bound(e,this.count,".remove: index"),t=this.item(e),this.$item(e).remove(),this.itemsChanged(),t},move:function(e,t){t==null&&(t=-1);if(e===t)return;e=this._bound(e,this.count,".move: fromIndex"),t=this._bound(t,this.count,".move: toIndex"),t>e?this.$item(e).insertAfter(this.$item(t)):this.$item(e).insertBefore(this.$item(t)),this.itemsChanged()},swap:function(e,t){var n,r;if(e===t)return;e=this._bound(e,this.count,".swap: firstIndex"),t=this._bound(t,this.count,".swap: secondIndex"),Math.abs(e-t)===1?this.move(e,t):(r=Math.min(e,t),n=Math.max(e,t),this.move(n,r),this.move(r+1,n)),this.itemsChanged()},unshift:function(e){this.add(0,e)},shift:function(){return this.remove(0)},push:function(e){this.add(this.count,e)},pop:function(){return this.remove(-1)},clear:function(){this.$items.remove(),this.itemsChanged()}}}),qt.NumberList=qt.createType("NumberList",{base:qt.List,constructor:function(){var e;return e=[{tagName:"ol",itemTagName:"li"}].concat(It.call(arguments)),qt.NumberList.base.constructor.apply(this,e)}}),qt.BulletList=qt.createType("BulletList",{base:qt.List,constructor:function(){var e;return e=[{tagName:"ul",itemTagName:"li"}].concat(It.call(arguments)),qt.BulletList.base.constructor.apply(this,e)}}),qt.Table=qt.createType("Table",{base:qt.CollectionView,constructor:function(){var e,t,n,r,i,s,o,u,a,f=this;o=qt.unionArguments(arguments),n=o.options,t=o.args,this.el=qt(function(){return qt.table()}),n.el!=null&&(this.el=qt.argumentShift(n,"el")),(u=n.each)==null&&(n.each=function(e,t){var n,r,i,s,o;r=qt.isString(e)||qt.isNumber(e)||qt.isBoolean(e)?[e]:qt.isEvent(e)&&typeof e.attributes=="object"?Ft(e.attributes):Ft(e),o=[];for(i=0,s=r.length;i<s;i++)n=r[i],o.push(t(n));return o}),qt.Table.base.constructor.apply(this,[n]);for(i=0,s=t.length;i<s;i++){e=t[i];if(!qt.isArray(e))throw new Error("oj.Table: array expected for row arguments")}r=(a=qt.argumentShift(n,"rows"))!=null?a:t;if(r.length>0)return this.rows=r},properties:{rowCount:{get:function(){return this.$trs.length}},columnCount:{get:function(){var e,t,n;return(n=this.$tr(0).find("> td").length)>0?n:(t=this.$theadTR.find("> th").length)>0?t:(e=this.$tfootTR.find("> td").length)>0?e:0}},rows:{get:function(){var e,t,n,r;if(this._rows!=null)return this._rows;this._rows=[];for(t=n=0,r=this.rowCount;n<r;t=n+=1)e=vt(this.$tdsRow(t),function(e){return e.ojValues()}),this._rows.push(e);return this._rows},set:function(e){if(!(e!=null&&e.length>0))return this.clearBody();this._rows=e,this.make()}},header:{get:function(){return this.$theadTR.find("> th").ojValues()},set:function(e){var t=this;if(!qt.isArray(e))throw new Error("oj.Table.header: array expected for first argument");return e!=null&&e.length>0?this.$theadTRMake.oj(function(){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(qt.th(t));return i}):this.clearHeader()}},footer:{get:function(){return this.$tfootTR.find("> td").ojValues()},set:function(e){var t=this;if(!qt.isArray(e))throw new Error("oj.Table.footer: array expected for first argument");return e!=null&&e.length>0?this.$tfootTRMake.oj(function(){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(qt.td(t));return i}):this.clearFooter()}},caption:{get:function(){return this.$caption.ojValue()},set:function(e){this.$captionMake.oj(e)}},$table:{get:function(){return this.$el}},$caption:{get:function(){return this.$("> caption")}},$colgroup:{get:function(){return this.$("> colgroup")}},$thead:{get:function(){return this.$("> thead")}},$tfoot:{get:function(){return this.$("> tfoot")}},$tbody:{get:function(){return this.$("> tbody")}},$theadTR:{get:function(){return this.$thead.find("> tr")}},$tfootTR:{get:function(){return this.$tfoot.find("> tr")}},$ths:{get:function(){return this.$theadTR.find("> th")}},$trs:{get:function(){var e;return(e=this._$trs)!=null?e:this._$trs=this.$("> tbody > tr")}},$colgroupMake:{get:function(){return this.$colgroup.length>0?this.$colgroup:(m="<colgroup></colgroup>",this.$caption.length>0?this.$caption.insertAfter(m):this.$table.append(m),this.$tbody)}},$captionMake:{get:function(){return this.$caption.length>0?this.$caption:(this.$table.prepend("<caption></caption>"),this.$caption)}},$tfootMake:{get:function(){return this.$tfoot.length>0?this.$tfoot:(m="<tfoot></tfoot>",this.$tfoot.length>0?this.$tfoot.insertBefore(m):this.$table.append(m),this.$tfoot)}},$theadMake:{get:function(){return this.$thead.length>0?this.$thead:(m="<thead></thead>",this.$colgroup.length>0?this.$colgroup.insertAfter(m):this.$caption.length>0?this.$caption.insertAfter(m):this.$table.prepend(m),this.$thead)}},$tbodyMake:{get:function(){return this.$tbody.length>0?this.$tbody:(this.$table.append("<tbody></tbody>"),this.$tbody)}},$theadTRMake:{get:function(){return this.$theadTR.length>0?this.$theadTR:(this.$theadMake.html("<tr></tr>"),this.$theadTR)}},$tfootTRMake:{get:function(){return this.$tfootTR.length>0?this.$tfootTR:(this.$tfootMake.html("<tr></tr>"),this.$tfootTR)}}},methods:{make:function(){var e,t,n,r,i,s,o,u,a,f=this;if(!this.isConstructed)return;r=[];if(this.models!=null&&this.each!=null){t=qt.isEvent(this.models)?this.models.models:this._models;for(i=0,o=t.length;i<o;i++)e=t[i],r.push(this._rowFromModel(e))}else if(this.rows!=null){a=this.rows;for(s=0,u=a.length;s<u;s++)n=a[s],r.push(qt(function(){var e,t,r,i;i=[];for(t=0,r=n.length;t<r;t++)e=n[t],i.push(qt.td(e));return i}))}r.length>0&&this.$tbodyMake.oj(function(){var e,t,n,i;i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(qt.tr(e));return i}),this.bodyChanged()},collectionModelAdded:function(e,t){var n,r;r=t.indexOf(e),n=this._rowFromModel(e),this._addRowTR(r,qt(function(){return qt.tr(n)}))},collectionModelRemoved:function(e,t,n){this.removeRow(n.index)},collectionReset:function(){this.make()},$tr:function(e){return e=e<0?e+count:e,this.$trs.eq(e)},$tdsRow:function(e){return e=e<0?e+count:e,this.$tr(e).find("> td")},$td:function(e,t){return e=e<0?e+this.rowCount:e,t=t<0?t+this.columnCount:t,this.$tdsRow(e).eq(t)},row:function(e,t){var n,r,i,s;e=this._bound(e,this.rowCount,".row: rx");if(t==null)return this.$tdsRow(e).ojValues();if(t.length!==cellCount(e))throw new Error("oj."+this.typeName+": array expected for second argument with length length cellCount("+e+")");for(n=i=0,s=t.length;i<s;n=++i)r=t[n],this.$td(e,n).oj(r)},cell:function(e,t,n){return n!=null?this.$td(e,t).oj(n):this.$td(e,t).ojValue()},addRow:function(e,t){var n;t==null&&(t=e,e=-1),e=this._bound(e,this.rowCount+1,".addRow: rx");if(!qt.isArray(t))throw new Error("oj.addRow: expected array for row content");n=function(){return qt.tr(function(){var e,n,r,i;i=[];for(n=0,r=t.length;n<r;n++)e=t[n],i.push(qt.td(e));return i})},this._addRowTR(e,n)},_addRowTR:function(e,t){this.rowCount===0?this.$el.oj(t):e===this.rowCount?this.$tr(e-1).ojAfter(t):this.$tr(e).ojBefore(t),this.bodyChanged()},removeRow:function(e){var t;return e==null&&(e=-1),e=this._bound(e,this.rowCount,".removeRow: index"),t=this.row(e),this.$tr(e).remove(),this.bodyChanged(),t},moveRow:function(e,t){var n;if(e===t)return;e=this._bound(e,this.rowCount,".moveRow: fromIndex"),t=this._bound(t,this.rowCount,".moveRow: toIndex"),n=t>e?"insertAfter":"insertBefore",this.$tr(e)[n](this.$tr(t)),this.bodyChanged()},swapRow:function(e,t){var n,r;if(e===t)return;e=this._bound(e,this.rowCount,".swap: firstIndex"),t=this._bound(t,this.rowCount,".swap: secondIndex"),Math.abs(e-t)===1?this.moveRow(e,t):(r=Math.min(e,t),n=Math.max(e,t),this.moveRow(n,r),this.moveRow(r+1,n)),this.bodyChanged()},unshiftRow:function(e){this.addRow(0,e)},shiftRow:function(){return this.removeRow(0)},pushRow:function(e){this.addRow(this.rowCount,e)},popRow:function(){return this.removeRow(-1)},clearColgroup:function(){this.$colgroup.remove()},clearBody:function(){this.$tbody.remove(),this.bodyChanged()},clearHeader:function(){this.$thead.remove(),this.headerChanged()},clearFooter:function(){this.$tfoot.remove(),this.footerChanged()},clearCaption:function(){this.$capation.remove()},clear:function(){return this.clearBody(),this.clearHeader(),this.clearFooter(),this.$caption.remove()},bodyChanged:function(){this._rows=null,this._columns=null,this._$trs=null},headerChanged:function(){this._header=null},footerChanged:function(){this._footer=null},_rowFromModel:function(e){var t=this;return qt(function(){return t.each(e,qt.td)})},_rowElFromItem:function(e){return qt[this.rowTagName](e)},_bound:function(e,t,n){return L(e,t,n,this.typeName)}}});for(g in qt)ut(g[0])&&g.slice(g.length-4)!=="View"&&(qt[Z(g)]=j(g));qt.sandbox={},Nt=ht(qt);for(ft=0,dt=Nt.length;ft<dt;ft++)a=Nt[ft],(a.length>0&&a[0]!=="_"||a.length>0&&a[0]==="_"&&qt[a.slice(1)]!=null)&&qt.addProperty(qt.sandbox,a,{value:qt[a],writable:!1});qt.use=function(e,t){var n,r,i,s,o;t==null&&(t={});if(!qt.isFunction(e))throw new Error("oj.use: function expected for first argument");if(!qt.isObject(t))throw new Error("oj.use: object expected for second argument");i=e(qt,t),r=M(i);for(n in i)s=i[n],qt.isOJType(s)&&(r[Z(n)]=j(s.typeName));o=[];for(n in r)s=r[n],qt[n]=s,o.push(qt.addProperty(qt.sandbox,n,{value:s,writable:!1}));return o},ct=function(e){return e==null&&(e={}),U(e,{get:rt,set:rt,first:!1}),function(){var t,n,r,i,s,o,u,a,f;n=Pt(arguments),t=jQuery(this);if(qt.isFunction(e.get)&&n.length===0){i=[];for(o=0,a=t.length;o<a;o++){r=t[o],i.push(e.get(qt.$(r)));if(e.first)return i[0]}return i}if(qt.isFunction(e.set)){i=t;for(u=0,f=t.length;u<f;u++){r=t[u],s=e.set(qt.$(r),n);if(s!=null)return s}return t}}},Ht=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],t.inserted()},ot=function(e,t){var n,r;for(r in e){n=e[r];if(r==="oj-style"&&(t!=null?!t.global:!void 0))continue;qt.$("."+_t(r)).length===0&&qt.$("head").append(qt._styleTagFromMediaObject(r,n))}},qt.$.fn.oj=ct({set:function(e,t){var n,r,i,s,o,u,a;if(t.length===0)return e[0].oj;a=qt.compile.apply(qt,[{dom:1,html:0,cssMap:1}].concat(It.call(t))),i=a.dom,s=a.types,n=a.cssMap,ot(n,{global:0}),e.html(""),qt.isArray(i)||(i=[i]);for(o=0,u=i.length;o<u;o++)r=i[o],e.append(r);Ht(s)},get:function(e){return e[0].oj}}),qt.$.ojBody=function(e){var t,n,r,i,s,o;t={html:1,"!DOCTYPE":1,body:1,head:"deep",meta:1,title:"deep",link:"deep",script:"deep"};try{o=qt.compile({dom:1,html:0,css:0,cssMap:1,ignore:t},e),r=o.dom,s=o.types,n=o.cssMap}catch(u){throw i=u,new Error("oj.compile: "+i.message)}return r!=null&&qt.$("body").html(r),ot(n,{global:1}),Ht(s)},lt=function(e,t){var n,r,i,s;r=e[0],n=r.firstChild;switch(qt.typeOf(n)){case"dom-text":return s=qt.parse(n.nodeValue);case"dom-element":return(i=Y(n))!=null?i:n}},qt.$.fn.ojValue=ct({first:!0,set:null,get:lt}),qt.$.fn.ojValues=ct({first:!1,set:null,get:lt}),c={ojAfter:"after",ojBefore:"before",ojAppend:"append",ojPrepend:"prepend",ojReplaceWith:"replaceWith",ojWrap:"wrap",ojWrapInner:"wrapInner"},G=function(e,t){return qt.$.fn[e]=ct({set:function(e,n){var r,i,s,o;o=qt.compile.apply(qt,[{dom:1,html:0,css:0,cssMap:1}].concat(It.call(n))),i=o.dom,s=o.types,r=o.cssMap,ot(r,{global:0}),e[t](i),Ht(s)},get:null})};for(f in c)o=c[f],G(f,o)}).call(this)